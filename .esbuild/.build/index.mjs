var a$=Object.create;var tf=Object.defineProperty;var c$=Object.getOwnPropertyDescriptor;var d$=Object.getOwnPropertyNames;var l$=Object.getPrototypeOf,p$=Object.prototype.hasOwnProperty;var rf=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var d=(e,t)=>()=>(e&&(t=e(e=0)),t);var zn=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),zt=(e,t)=>{for(var r in t)tf(e,r,{get:t[r],enumerable:!0})},u$=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of d$(t))!p$.call(e,n)&&n!==r&&tf(e,n,{get:()=>t[n],enumerable:!(o=c$(t,n))||o.enumerable});return e};var Lx=(e,t,r)=>(r=e!=null?a$(l$(e)):{},u$(t||!e||!e.__esModule?tf(r,"default",{value:e,enumerable:!0}):r,e));var vy=d(()=>{});var Cy,Ay=d(()=>{(function(e){e.HEADER="header",e.QUERY="query"})(Cy||(Cy={}))});var Py,Dy=d(()=>{(function(e){e.HEADER="header",e.QUERY="query"})(Py||(Py={}))});var Ny=d(()=>{});var Oy=d(()=>{});var ky=d(()=>{});var $y=d(()=>{});var My=d(()=>{Ay();Dy();Ny();Oy();ky();$y()});var Ly=d(()=>{});var Uy=d(()=>{});var Fy=d(()=>{});var By=d(()=>{});var Hy=d(()=>{});var Vy=d(()=>{});var Gy=d(()=>{});var jy=d(()=>{Hy();Vy();Gy()});var Wy=d(()=>{});var zy=d(()=>{});var ii,Ky=d(()=>{(function(e){e.HTTP="http",e.HTTPS="https"})(ii||(ii={}))});var qy=d(()=>{});var Jy=d(()=>{});var Yy=d(()=>{});var Xy=d(()=>{});var Qy=d(()=>{});var Zy=d(()=>{qy();Jy();Yy();Xy();Qy()});var e0=d(()=>{});var ai,t0=d(()=>{(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(ai||(ai={}))});var r0=d(()=>{});var o0=d(()=>{});var n0=d(()=>{r0();o0();t0()});var s0=d(()=>{});var i0,a0=d(()=>{(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(i0||(i0={}))});var c0=d(()=>{});var d0=d(()=>{});var l0=d(()=>{});var p0=d(()=>{});var u0=d(()=>{});var f0=d(()=>{d0();l0();p0();u0()});var m0=d(()=>{});var fa,h0=d(()=>{fa="__smithy_context"});var g0=d(()=>{});var jo,x0=d(()=>{(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(jo||(jo={}))});var y0=d(()=>{});var S0=d(()=>{});var E0=d(()=>{});var _0=d(()=>{});var b0=d(()=>{});var w0=d(()=>{});var R0=d(()=>{});var I0=d(()=>{});var T0=d(()=>{});var v0=d(()=>{});var C0=d(()=>{});var A0=d(()=>{});var P0=d(()=>{});var D0=d(()=>{});var N0,O0=d(()=>{(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(N0||(N0={}))});var k0=d(()=>{});var $0=d(()=>{});var M0=d(()=>{});var L0=d(()=>{});var U0=d(()=>{});var F0=d(()=>{});var B0=d(()=>{});var Sn=d(()=>{vy();My();Ly();Uy();Fy();By();jy();Wy();zy();Ky();Zy();e0();n0();s0();a0();c0();f0();m0();h0();g0();x0();y0();S0();E0();_0();b0();w0();R0();I0();T0();v0();C0();A0();P0();D0();O0();k0();$0();M0();L0();U0();F0();B0()});var Fe,H0=d(()=>{Sn();Fe=e=>e[fa]||(e[fa]={})});var Ee,V0=d(()=>{Ee=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t}});var ft=d(()=>{H0();V0()});var ir,ar,Y0=d(()=>{ir=e=>({setHttpHandler(t){e.httpHandler=t},httpHandler(){return e.httpHandler},updateHttpClientConfig(t,r){e.httpHandler?.updateHttpClientConfig(t,r)},httpHandlerConfigs(){return e.httpHandler.httpHandlerConfigs()}}),ar=e=>({httpHandler:e.httpHandler()})});var X0=d(()=>{Y0()});var Q0=d(()=>{});var Z0=d(()=>{});var eS=d(()=>{});function mM(e){return Object.keys(e).reduce((t,r)=>{let o=e[r];return{...t,[r]:Array.isArray(o)?[...o]:o}},{})}var _e,tS=d(()=>{_e=class e{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){let r=new e({...t,headers:{...t.headers}});return r.query&&(r.query=mM(r.query)),r}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return e.clone(this)}}});var cr,rS=d(()=>{cr=class{statusCode;reason;headers;body;constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}}});var oS=d(()=>{});var nS=d(()=>{});var $e=d(()=>{X0();Q0();Z0();eS();tS();rS();oS();nS()});var iS=zn((cq,sS)=>{function Wo(e){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:e}),this.done=!1}Wo.prototype.next=function(){if(this.done)return{done:!0};var e=this._next();return e.done&&(this.done=!0),e};typeof Symbol<"u"&&(Wo.prototype[Symbol.iterator]=function(){return this});Wo.of=function(){var e=arguments,t=e.length,r=0;return new Wo(function(){return r>=t?{done:!0}:{done:!1,value:e[r++]}})};Wo.empty=function(){var e=new Wo(null);return e.done=!0,e};Wo.is=function(e){return e instanceof Wo?!0:typeof e=="object"&&e!==null&&typeof e.next=="function"};sS.exports=Wo});var Rf=zn((dq,lS)=>{var aS=typeof ArrayBuffer<"u",cS=typeof Symbol<"u";function dS(e,t){var r,o,n,s,i;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof t!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||aS&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(n=0,s=e.length;n<s;n++)t(e[n],n);return}if(typeof e.forEach=="function"){e.forEach(t);return}if(cS&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(r=e,n=0;i=r.next(),i.done!==!0;)t(i.value,n),n++;return}for(o in e)e.hasOwnProperty(o)&&t(e[o],o)}dS.forEachWithNullKeys=function(e,t){var r,o,n,s,i;if(!e)throw new Error("obliterator/forEachWithNullKeys: invalid iterable.");if(typeof t!="function")throw new Error("obliterator/forEachWithNullKeys: expecting a callback.");if(Array.isArray(e)||aS&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(n=0,s=e.length;n<s;n++)t(e[n],null);return}if(e instanceof Set){e.forEach(function(a){t(a,null)});return}if(typeof e.forEach=="function"){e.forEach(t);return}if(cS&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(r=e,n=0;i=r.next(),i.done!==!0;)t(i.value,null),n++;return}for(o in e)e.hasOwnProperty(o)&&t(e[o],o)};lS.exports=dS});var If=zn(So=>{var hM=Math.pow(2,8)-1,gM=Math.pow(2,16)-1,xM=Math.pow(2,32)-1,yM=Math.pow(2,7)-1,SM=Math.pow(2,15)-1,EM=Math.pow(2,31)-1;So.getPointerArray=function(e){var t=e-1;return t<=hM?Uint8Array:t<=gM?Uint16Array:t<=xM?Uint32Array:Float64Array};So.getSignedPointerArray=function(e){var t=e-1;return t<=yM?Int8Array:t<=SM?Int16Array:t<=EM?Int32Array:Float64Array};So.getNumberType=function(e){return e===(e|0)?Math.sign(e)===-1?e<=127&&e>=-128?Int8Array:e<=32767&&e>=-32768?Int16Array:Int32Array:e<=255?Uint8Array:e<=65535?Uint16Array:Uint32Array:Float64Array};var _M={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};So.getMinimalRepresentation=function(e,t){var r=null,o=0,n,s,i,a,c;for(a=0,c=e.length;a<c;a++)i=t?t(e[a]):e[a],s=So.getNumberType(i),n=_M[s.name],n>o&&(o=n,r=s);return r};So.isTypedArray=function(e){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(e)};So.concat=function(){var e=0,t,r,o;for(t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=new arguments[0].constructor(e);for(t=0,r=0;t<o;t++)n.set(arguments[t],r),r+=arguments[t].length;return n};So.indices=function(e){for(var t=So.getPointerArray(e),r=new t(e),o=0;o<e;o++)r[o]=o;return r}});var fS=zn(ha=>{var pS=Rf(),uS=If();function bM(e){return Array.isArray(e)||uS.isTypedArray(e)}function Tf(e){if(typeof e.length=="number")return e.length;if(typeof e.size=="number")return e.size}function wM(e){var t=Tf(e),r=typeof t=="number"?new Array(t):[],o=0;return pS(e,function(n){r[o++]=n}),r}function RM(e){var t=Tf(e),r=typeof t=="number"?uS.getPointerArray(t):Array,o=typeof t=="number"?new Array(t):[],n=typeof t=="number"?new r(t):[],s=0;return pS(e,function(i){o[s]=i,n[s]=s++}),[o,n]}ha.isArrayLike=bM;ha.guessLength=Tf;ha.toArray=wM;ha.toArrayWithIndices=RM});var hS=zn((uq,mS)=>{var vf=iS(),IM=Rf(),TM=If(),vM=fS();function Ye(e,t,r){if(arguments.length<2&&(r=e,e=null,t=null),this.capacity=r,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-cache: capacity should be positive number.");var o=TM.getPointerArray(r);this.forward=new o(r),this.backward=new o(r),this.K=typeof e=="function"?new e(r):new Array(r),this.V=typeof t=="function"?new t(r):new Array(r),this.size=0,this.head=0,this.tail=0,this.items={}}Ye.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}};Ye.prototype.splayOnTop=function(e){var t=this.head;if(this.head===e)return this;var r=this.backward[e],o=this.forward[e];return this.tail===e?this.tail=r:this.backward[o]=r,this.forward[r]=o,this.backward[t]=e,this.head=e,this.forward[e]=t,this};Ye.prototype.set=function(e,t){var r=this.items[e];if(typeof r<"u"){this.splayOnTop(r),this.V[r]=t;return}this.size<this.capacity?r=this.size++:(r=this.tail,this.tail=this.backward[r],delete this.items[this.K[r]]),this.items[e]=r,this.K[r]=e,this.V[r]=t,this.forward[r]=this.head,this.backward[this.head]=r,this.head=r};Ye.prototype.setpop=function(e,t){var r=null,o=null,n=this.items[e];return typeof n<"u"?(this.splayOnTop(n),r=this.V[n],this.V[n]=t,{evicted:!1,key:e,value:r}):(this.size<this.capacity?n=this.size++:(n=this.tail,this.tail=this.backward[n],r=this.V[n],o=this.K[n],delete this.items[this.K[n]]),this.items[e]=n,this.K[n]=e,this.V[n]=t,this.forward[n]=this.head,this.backward[this.head]=n,this.head=n,o?{evicted:!0,key:o,value:r}:null)};Ye.prototype.has=function(e){return e in this.items};Ye.prototype.get=function(e){var t=this.items[e];if(!(typeof t>"u"))return this.splayOnTop(t),this.V[t]};Ye.prototype.peek=function(e){var t=this.items[e];if(!(typeof t>"u"))return this.V[t]};Ye.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=0,o=this.size,n=this.head,s=this.K,i=this.V,a=this.forward;r<o;)e.call(t,i[n],s[n],this),n=a[n],r++};Ye.prototype.keys=function(){var e=0,t=this.size,r=this.head,o=this.K,n=this.forward;return new vf(function(){if(e>=t)return{done:!0};var s=o[r];return e++,e<t&&(r=n[r]),{done:!1,value:s}})};Ye.prototype.values=function(){var e=0,t=this.size,r=this.head,o=this.V,n=this.forward;return new vf(function(){if(e>=t)return{done:!0};var s=o[r];return e++,e<t&&(r=n[r]),{done:!1,value:s}})};Ye.prototype.entries=function(){var e=0,t=this.size,r=this.head,o=this.K,n=this.V,s=this.forward;return new vf(function(){if(e>=t)return{done:!0};var i=o[r],a=n[r];return e++,e<t&&(r=s[r]),{done:!1,value:[i,a]}})};typeof Symbol<"u"&&(Ye.prototype[Symbol.iterator]=Ye.prototype.entries);Ye.prototype.inspect=function(){for(var e=new Map,t=this.entries(),r;r=t.next(),!r.done;)e.set(r.value[0],r.value[1]);return Object.defineProperty(e,"constructor",{value:Ye,enumerable:!1}),e};typeof Symbol<"u"&&(Ye.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ye.prototype.inspect);Ye.from=function(e,t,r,o){if(arguments.length<2){if(o=vM.guessLength(e),typeof o!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(o=t,t=null,r=null);var n=new Ye(t,r,o);return IM(e,function(s,i){n.set(i,s)}),n};mS.exports=Ye});var CM,AM,dr,ps=d(()=>{$e();CM=e=>t=>async r=>{if(!_e.isInstance(r.request))return t(r);let{request:o}=r,{handlerProtocol:n=""}=e.requestHandler.metadata||{};if(n.indexOf("h2")>=0&&!o.headers[":authority"])delete o.headers.host,o.headers[":authority"]=o.hostname+(o.port?":"+o.port:"");else if(!o.headers.host){let s=o.hostname;o.port!=null&&(s+=`:${o.port}`),o.headers.host=s}return t(r)},AM={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},dr=e=>({applyToStack:t=>{t.add(CM(e),AM)}})});var PM,DM,lr,yS=d(()=>{PM=()=>(e,t)=>async r=>{try{let o=await e(r),{clientName:n,commandName:s,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:l}=a,p=c??t.inputFilterSensitiveLog,u=l??t.outputFilterSensitiveLog,{$metadata:f,...m}=o.output;return i?.info?.({clientName:n,commandName:s,input:p(r.input),output:u(m),metadata:f}),o}catch(o){let{clientName:n,commandName:s,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c}=a,l=c??t.inputFilterSensitiveLog;throw i?.error?.({clientName:n,commandName:s,input:l(r.input),error:o,metadata:o.$metadata}),o}},DM={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},lr=e=>({applyToStack:t=>{t.add(PM(),DM)}})});var us=d(()=>{yS()});var SS,ES=d(()=>{SS={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"}});var ga,Cf,ud,Af,Pf,fd,_S=d(()=>{ga={REQUEST_ID:Symbol.for("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol.for("_AWS_LAMBDA_X_RAY_TRACE_ID"),TENANT_ID:Symbol.for("_AWS_LAMBDA_TENANT_ID")},Cf=["true","1"].includes(process.env?.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA??"");Cf||(globalThis.awslambda=globalThis.awslambda||{});ud=class{static PROTECTED_KEYS=ga;isProtectedKey(t){return Object.values(ga).includes(t)}getRequestId(){return this.get(ga.REQUEST_ID)??"-"}getXRayTraceId(){return this.get(ga.X_RAY_TRACE_ID)}getTenantId(){return this.get(ga.TENANT_ID)}},Af=class extends ud{currentContext;getContext(){return this.currentContext}hasContext(){return this.currentContext!==void 0}get(t){return this.currentContext?.[t]}set(t,r){if(this.isProtectedKey(t))throw new Error(`Cannot modify protected Lambda context field: ${String(t)}`);this.currentContext=this.currentContext||{},this.currentContext[t]=r}run(t,r){return this.currentContext=t,r()}},Pf=class e extends ud{als;static async create(){let t=new e,r=await import("node:async_hooks");return t.als=new r.AsyncLocalStorage,t}getContext(){return this.als.getStore()}hasContext(){return this.als.getStore()!==void 0}get(t){return this.als.getStore()?.[t]}set(t,r){if(this.isProtectedKey(t))throw new Error(`Cannot modify protected Lambda context field: ${String(t)}`);let o=this.als.getStore();if(!o)throw new Error("No context available");o[t]=r}run(t,r){return this.als.run(t,r)}};(function(e){let t=null;async function r(){return t||(t=(async()=>{let n="AWS_LAMBDA_MAX_CONCURRENCY"in process.env?await Pf.create():new Af;return!Cf&&globalThis.awslambda?.InvokeStore?globalThis.awslambda.InvokeStore:(!Cf&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=n),n)})()),t}e.getInstanceAsync=r,e._testing=process.env.AWS_LAMBDA_BENCHMARK_MODE==="1"?{reset:()=>{t=null,globalThis.awslambda?.InvokeStore&&delete globalThis.awslambda.InvokeStore,globalThis.awslambda={}}}:void 0})(fd||(fd={}))});var Df,NM,OM,bS,Nf=d(()=>{_S();$e();Df="X-Amzn-Trace-Id",NM="AWS_LAMBDA_FUNCTION_NAME",OM="_X_AMZN_TRACE_ID",bS=()=>e=>async t=>{let{request:r}=t;if(!_e.isInstance(r))return e(t);let o=Object.keys(r.headers??{}).find(p=>p.toLowerCase()===Df.toLowerCase())??Df;if(r.headers.hasOwnProperty(o))return e(t);let n=process.env[NM],s=process.env[OM],c=(await fd.getInstanceAsync())?.getXRayTraceId()??s,l=p=>typeof p=="string"&&p.length>0;return l(n)&&l(c)&&(r.headers[Df]=c),e({...t,request:r})}});var pr,wS=d(()=>{ES();Nf();pr=e=>({applyToStack:t=>{t.add(bS(),SS)}})});var fs=d(()=>{wS();Nf()});var RS=d(()=>{});var IS,TS=d(()=>{IS=(e,t)=>{if(!t||t.length===0)return e;let r=[];for(let o of t)for(let n of e)n.schemeId.split("#")[1]===o&&r.push(n);for(let o of e)r.find(({schemeId:n})=>n===o.schemeId)||r.push(o);return r}});function kM(e){let t=new Map;for(let r of e)t.set(r.schemeId,r);return t}var vS,Of=d(()=>{ft();TS();vS=(e,t)=>(r,o)=>async n=>{let s=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,o,n.input)),i=e.authSchemePreference?await e.authSchemePreference():[],a=IS(s,i),c=kM(e.httpAuthSchemes),l=Fe(o),p=[];for(let u of a){let f=c.get(u.schemeId);if(!f){p.push(`HttpAuthScheme \`${u.schemeId}\` was not enabled for this service.`);continue}let m=f.identityProvider(await t.identityProviderConfigProvider(e));if(!m){p.push(`HttpAuthScheme \`${u.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:x={},signingProperties:E={}}=u.propertiesExtractor?.(e,o)||{};u.identityProperties=Object.assign(u.identityProperties||{},x),u.signingProperties=Object.assign(u.signingProperties||{},E),l.selectedHttpAuthScheme={httpAuthOption:u,identity:await m(u.identityProperties),signer:f.signer};break}if(!l.selectedHttpAuthScheme)throw new Error(p.join(`
`));return r(n)}});var $M,ur,CS=d(()=>{Of();$M={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},ur=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:o=>{o.addRelativeTo(vS(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),$M)}})});var AS=d(()=>{});var PS=d(()=>{});var md,DS=d(()=>{md={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}});var kf=d(()=>{AS();DS();PS()});var Kq,NS=d(()=>{kf();Kq={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:md.name}});var OS=d(()=>{Of();CS();NS()});var MM,LM,kS,$f=d(()=>{$e();ft();MM=e=>t=>{throw t},LM=(e,t)=>{},kS=e=>(t,r)=>async o=>{if(!_e.isInstance(o.request))return t(o);let s=Fe(r).selectedHttpAuthScheme;if(!s)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:i={}},identity:a,signer:c}=s,l=await t({...o,request:await c.sign(o.request,a,i)}).catch((c.errorHandler||MM)(i));return(c.successHandler||LM)(l.response,i),l}});var UM,fr,$S=d(()=>{$f();UM={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},fr=e=>({applyToStack:t=>{t.addRelativeTo(kS(e),UM)}})});var MS=d(()=>{$f();$S()});var ms,LS=d(()=>{ms=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t}});function zo(e,t,r,o,n){return async function*(i,a,...c){let l=a,p=i.startingToken??l[r],u=!0,f;for(;u;){if(l[r]=p,n&&(l[n]=l[n]??i.pageSize),i.client instanceof e)f=await FM(t,i.client,a,i.withCommand,...c);else throw new Error(`Invalid client, expected instance of ${e.name}`);yield f;let m=p;p=BM(f,o),u=!!(p&&(!i.stopOnSameToken||p!==m))}return void 0}}var FM,BM,US=d(()=>{FM=async(e,t,r,o=s=>s,...n)=>{let s=new e(r);return s=o(s)??s,await t.send(s,...n)};BM=(e,t)=>{let r=e,o=t.split(".");for(let n of o){if(!r||typeof r!="object")return;r=r[n]}return r}});var hd,Mf=d(()=>{hd=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]"});import{Buffer as Lf}from"buffer";var Ko,ci,hs=d(()=>{Mf();Ko=(e,t=0,r=e.byteLength-t)=>{if(!hd(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return Lf.from(e,t,r)},ci=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?Lf.from(e,t):Lf.from(e)}});var HM,Le,FS=d(()=>{hs();HM=/^[A-Za-z0-9+/]*={0,2}$/,Le=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!HM.exec(e))throw new TypeError("Invalid base64 string.");let t=ci(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}});var Oe,Uf=d(()=>{hs();Oe=e=>{let t=ci(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)}});var so,BS=d(()=>{Uf();so=e=>typeof e=="string"?Oe(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)});var De,HS=d(()=>{hs();De=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return Ko(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}});var He=d(()=>{Uf();BS();HS()});var Ne,VS=d(()=>{hs();He();Ne=e=>{let t;if(typeof e=="string"?t=Oe(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return Ko(t.buffer,t.byteOffset,t.byteLength).toString("base64")}});var mt=d(()=>{FS();VS()});var di,GS=d(()=>{mt();He();di=class e extends Uint8Array{static fromString(t,r="utf-8"){if(typeof t=="string")return r==="base64"?e.mutate(Le(t)):e.mutate(Oe(t));throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return t==="base64"?Ne(this):De(this)}}});var jS=d(()=>{});var Ff,Bf=d(()=>{Ff=e=>typeof ReadableStream=="function"&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream)});var WS=d(()=>{});var zS=d(()=>{});var KS=d(()=>{});var qS=d(()=>{});var Eo,VM,JS=d(()=>{Eo=e=>encodeURIComponent(e).replace(/[!'()*]/g,VM),VM=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`});var YS=d(()=>{});var gd=d(()=>{JS();YS()});function XS(e){let t=[];for(let r of Object.keys(e).sort()){let o=e[r];if(r=Eo(r),Array.isArray(o))for(let n=0,s=o.length;n<s;n++)t.push(`${r}=${Eo(o[n])}`);else{let n=r;(o||typeof o=="string")&&(n+=`=${Eo(o)}`),t.push(n)}}return t.join("&")}var QS=d(()=>{gd()});var ZS,eE=d(()=>{ZS=["ECONNRESET","EPIPE","ETIMEDOUT"]});var tE,rE=d(()=>{tE=e=>{let t={};for(let r of Object.keys(e)){let o=e[r];t[r]=Array.isArray(o)?o.join(","):o}return t}});var Ve,gs=d(()=>{Ve={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)}});var oE,nE,sE=d(()=>{gs();oE=1e3,nE=(e,t,r=0)=>{if(!r)return-1;let o=n=>{let s=Ve.setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${r} ms.`),{name:"TimeoutError"}))},r-n),i=a=>{a?.connecting?a.on("connect",()=>{Ve.clearTimeout(s)}):Ve.clearTimeout(s)};e.socket?i(e.socket):e.on("socket",i)};return r<2e3?(o(0),0):Ve.setTimeout(o.bind(null,oE),oE)}});var iE,aE=d(()=>{gs();iE=(e,t,r=0,o,n)=>r?Ve.setTimeout(()=>{let s=`@smithy/node-http-handler - [${o?"ERROR":"WARN"}] a request has exceeded the configured ${r} ms requestTimeout.`;if(o){let i=Object.assign(new Error(s),{name:"TimeoutError",code:"ETIMEDOUT"});e.destroy(i),t(i)}else s+=" Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.",n?.warn?.(s)},r):-1});var GM,cE,dE=d(()=>{gs();GM=3e3,cE=(e,{keepAlive:t,keepAliveMsecs:r},o=GM)=>{if(t!==!0)return-1;let n=()=>{e.socket?e.socket.setKeepAlive(t,r||0):e.on("socket",s=>{s.setKeepAlive(t,r||0)})};return o===0?(n(),0):Ve.setTimeout(n,o)}});var lE,pE,uE=d(()=>{gs();lE=3e3,pE=(e,t,r=0)=>{let o=n=>{let s=r-n,i=()=>{e.destroy(),t(Object.assign(new Error(`@smithy/node-http-handler - the request socket timed out after ${r} ms of inactivity (configured by client requestHandler).`),{name:"TimeoutError"}))};e.socket?(e.socket.setTimeout(s,i),e.on("close",()=>e.socket?.removeListener("timeout",i))):e.setTimeout(s,i)};return 0<r&&r<6e3?(o(0),0):Ve.setTimeout(o.bind(null,r===0?0:lE),lE)}});import{Readable as jM}from"stream";async function mE(e,t,r=fE,o=!1){let n=t.headers??{},s=n.Expect||n.expect,i=-1,a=!0;!o&&s==="100-continue"&&(a=await Promise.race([new Promise(c=>{i=Number(Ve.setTimeout(()=>c(!0),Math.max(fE,r)))}),new Promise(c=>{e.on("continue",()=>{Ve.clearTimeout(i),c(!0)}),e.on("response",()=>{Ve.clearTimeout(i),c(!1)}),e.on("error",()=>{Ve.clearTimeout(i),c(!1)})})])),a&&WM(e,t.body)}function WM(e,t){if(t instanceof jM){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||typeof t=="string"){e.end(t);return}let r=t;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){e.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}e.end(Buffer.from(t));return}e.end()}var fE,hE=d(()=>{gs();fE=6e3});import{Agent as Hf,request as zM}from"http";import{Agent as Vf,request as KM}from"https";var ht,gE=d(()=>{$e();QS();eE();rE();sE();aE();dE();uE();gs();hE();ht=class e{config;configProvider;socketWarningTimestamp=0;externalAgent=!1;metadata={handlerProtocol:"http/1.1"};static create(t){return typeof t?.handle=="function"?t:new e(t)}static checkSocketUsage(t,r,o=console){let{sockets:n,requests:s,maxSockets:i}=t;if(typeof i!="number"||i===1/0||Date.now()-15e3<r)return r;if(n&&s)for(let c in n){let l=n[c]?.length??0,p=s[c]?.length??0;if(l>=i&&p>=2*i)return o?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${l} and ${p} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}constructor(t){this.configProvider=new Promise((r,o)=>{typeof t=="function"?t().then(n=>{r(this.resolveDefaultConfig(n))}).catch(o):r(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:o,socketTimeout:n,socketAcquisitionWarningTimeout:s,httpAgent:i,httpsAgent:a,throwOnRequestTimeout:c}=t||{},l=!0,p=50;return{connectionTimeout:o,requestTimeout:r,socketTimeout:n,socketAcquisitionWarningTimeout:s,throwOnRequestTimeout:c,httpAgent:i instanceof Hf||typeof i?.destroy=="function"?(this.externalAgent=!0,i):new Hf({keepAlive:l,maxSockets:p,...i}),httpsAgent:a instanceof Vf||typeof a?.destroy=="function"?(this.externalAgent=!0,a):new Vf({keepAlive:l,maxSockets:p,...a}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(t,{abortSignal:r,requestTimeout:o}={}){return this.config||(this.config=await this.configProvider),new Promise((n,s)=>{let i=this.config,a,c=[],l=async Re=>{await a,c.forEach(Ve.clearTimeout),n(Re)},p=async Re=>{await a,c.forEach(Ve.clearTimeout),s(Re)};if(r?.aborted){let Re=new Error("Request aborted");Re.name="AbortError",p(Re);return}let u=t.protocol==="https:",f=t.headers??{},m=(f.Expect??f.expect)==="100-continue",x=u?i.httpsAgent:i.httpAgent;m&&!this.externalAgent&&(x=new(u?Vf:Hf)({keepAlive:!1,maxSockets:1/0})),c.push(Ve.setTimeout(()=>{this.socketWarningTimestamp=e.checkSocketUsage(x,this.socketWarningTimestamp,i.logger)},i.socketAcquisitionWarningTimeout??(i.requestTimeout??2e3)+(i.connectionTimeout??1e3)));let E=XS(t.query||{}),T;if(t.username!=null||t.password!=null){let Re=t.username??"",pt=t.password??"";T=`${Re}:${pt}`}let A=t.path;E&&(A+=`?${E}`),t.fragment&&(A+=`#${t.fragment}`);let O=t.hostname??"";O[0]==="["&&O.endsWith("]")?O=t.hostname.slice(1,-1):O=t.hostname;let ie={headers:t.headers,host:O,method:t.method,path:A,port:t.port,agent:x,auth:T},ve=(u?KM:zM)(ie,Re=>{let pt=new cr({statusCode:Re.statusCode||-1,reason:Re.statusMessage,headers:tE(Re.headers),body:Re});l({response:pt})});if(ve.on("error",Re=>{ZS.includes(Re.code)?p(Object.assign(Re,{name:"TimeoutError"})):p(Re)}),r){let Re=()=>{ve.destroy();let pt=new Error("Request aborted");pt.name="AbortError",p(pt)};if(typeof r.addEventListener=="function"){let pt=r;pt.addEventListener("abort",Re,{once:!0}),ve.once("close",()=>pt.removeEventListener("abort",Re))}else r.onabort=Re}let qe=o??i.requestTimeout;c.push(nE(ve,p,i.connectionTimeout)),c.push(iE(ve,p,qe,i.throwOnRequestTimeout,i.logger??console)),c.push(pE(ve,p,i.socketTimeout));let Lo=ie.agent;typeof Lo=="object"&&"keepAlive"in Lo&&c.push(cE(ve,{keepAlive:Lo.keepAlive,keepAliveMsecs:Lo.keepAliveMsecs})),a=mE(ve,t,qe,this.externalAgent).catch(Re=>(c.forEach(Ve.clearTimeout),s(Re)))})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(o=>({...o,[t]:r}))}httpHandlerConfigs(){return this.config??{}}}});var xE=d(()=>{});import{Writable as qM}from"stream";var xd,yE=d(()=>{xd=class extends qM{bufferedBytes=[];_write(t,r,o){this.bufferedBytes.push(t),o()}}});async function YM(e){let t=[],r=e.getReader(),o=!1,n=0;for(;!o;){let{done:a,value:c}=await r.read();c&&(t.push(c),n+=c.length),o=a}let s=new Uint8Array(n),i=0;for(let a of t)s.set(a,i),i+=a.length;return s}var Dt,JM,SE=d(()=>{yE();Dt=e=>JM(e)?YM(e):new Promise((t,r)=>{let o=new xd;e.pipe(o),e.on("error",n=>{o.end(),r(n)}),o.on("error",r),o.on("finish",function(){let n=new Uint8Array(Buffer.concat(this.bufferedBytes));t(n)})}),JM=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream});var qo=d(()=>{gE();xE();SE()});var EE=d(()=>{});async function XM(e){let t=await ZM(e),r=Le(t);return new Uint8Array(r)}async function QM(e){let t=[],r=e.getReader(),o=!1,n=0;for(;!o;){let{done:a,value:c}=await r.read();c&&(t.push(c),n+=c.length),o=a}let s=new Uint8Array(n),i=0;for(let a of t)s.set(a,i),i+=a.length;return s}function ZM(e){return new Promise((t,r)=>{let o=new FileReader;o.onloadend=()=>{if(o.readyState!==2)return r(new Error("Reader aborted too early"));let n=o.result??"",s=n.indexOf(","),i=s>-1?s+1:n.length;t(n.substring(i))},o.onabort=()=>r(new Error("Read aborted")),o.onerror=()=>r(o.error),o.readAsDataURL(e)})}var _E,bE=d(()=>{mt();_E=async e=>typeof Blob=="function"&&e instanceof Blob||e.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await e.arrayBuffer()):XM(e):QM(e)});var wE=d(()=>{EE();bE()});function IE(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let o=e.slice(r,r+2).toLowerCase();if(o in Gf)t[r/2]=Gf[o];else throw new Error(`Cannot decode unrecognized sequence ${o} as hexadecimal`)}return t}function Nt(e){let t="";for(let r=0;r<e.byteLength;r++)t+=RE[e[r]];return t}var RE,Gf,xs=d(()=>{RE={},Gf={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),RE[e]=t,Gf[t]=e}});var TE,CE,vE,AE=d(()=>{wE();mt();xs();He();Bf();TE="The stream has already been transformed.",CE=e=>{if(!vE(e)&&!Ff(e)){let n=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${n}`)}let t=!1,r=async()=>{if(t)throw new Error(TE);return t=!0,await _E(e)},o=n=>{if(typeof n.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return n.stream()};return Object.assign(e,{transformToByteArray:r,transformToString:async n=>{let s=await r();if(n==="base64")return Ne(s);if(n==="hex")return Nt(s);if(n===void 0||n==="utf8"||n==="utf-8")return De(s);if(typeof TextDecoder=="function")return new TextDecoder(n).decode(s);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(TE);if(t=!0,vE(e))return o(e);if(Ff(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})},vE=e=>typeof Blob=="function"&&e instanceof Blob});import{Readable as jf}from"stream";var PE,yd,DE=d(()=>{qo();hs();AE();PE="The stream has already been transformed.",yd=e=>{if(!(e instanceof jf))try{return CE(e)}catch{let n=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${n}`)}let t=!1,r=async()=>{if(t)throw new Error(PE);return t=!0,await Dt(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async o=>{let n=await r();return o===void 0||Buffer.isEncoding(o)?Ko(n.buffer,n.byteOffset,n.byteLength).toString(o):new TextDecoder(o).decode(n)},transformToWebStream:()=>{if(t)throw new Error(PE);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof jf.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return t=!0,jf.toWeb(e)}})}});var NE=d(()=>{});var Sd=d(()=>{GS();jS();WS();zS();KS();qS();DE();NE();Bf()});var Ot,Ed=d(()=>{Sd();Ot=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return di.mutate(e);if(!e)return di.mutate(new Uint8Array);let r=t.streamCollector(e);return di.mutate(await r)}});function li(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var Wf=d(()=>{});var En,zf=d(()=>{En=e=>typeof e=="function"?e():e});var _d,bd=d(()=>{_d=(e,t,r,o,n)=>({name:t,namespace:e,traits:r,input:o,output:n})});var OE,Kf,kE=d(()=>{$e();ft();bd();OE=e=>(t,r)=>async o=>{let{response:n}=await t(o),{operationSchema:s}=Fe(r),[,i,a,c,l,p]=s??[];try{let u=await e.protocol.deserializeResponse(_d(i,a,c,l,p),{...e,...r},n);return{response:n,output:u}}catch(u){if(Object.defineProperty(u,"$response",{value:n,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in u)){let f="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{u.message+=`
  `+f}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(f):r.logger?.warn?.(f)}typeof u.$responseBodyText<"u"&&u.$response&&(u.$response.body=u.$responseBodyText);try{if(cr.isInstance(n)){let{headers:m={}}=n,x=Object.entries(m);u.$metadata={httpStatusCode:n.statusCode,requestId:Kf(/^x-[\w-]+-request-?id$/,x),extendedRequestId:Kf(/^x-[\w-]+-id-2$/,x),cfId:Kf(/^x-[\w-]+-cf-id$/,x)}}}catch{}}throw u}},Kf=(e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1]});var $E,ME=d(()=>{ft();bd();$E=e=>(t,r)=>async o=>{let{operationSchema:n}=Fe(r),[,s,i,a,c,l]=n??[],p=r.endpointV2?.url&&e.urlParser?async()=>e.urlParser(r.endpointV2.url):e.endpoint,u=await e.protocol.serializeRequest(_d(s,i,a,c,l),o.input,{...e,...r,endpoint:p});return t({...o,request:u})}});function mr(e){return{applyToStack:t=>{t.add($E(e),tL),t.add(OE(e),eL),e.protocol.setSerdeContext(e)}}}var eL,tL,LE=d(()=>{kE();ME();eL={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},tL={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}});var hr,ys=d(()=>{hr=class{name;namespace;traits;static assign(t,r){return Object.assign(t,r)}static[Symbol.hasInstance](t){let r=this.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===this.symbol:r}getName(){return this.namespace+"#"+this.name}}});var UE,FE=d(()=>{ys();UE=class e extends hr{static symbol=Symbol.for("@smithy/lis");name;traits;valueSchema;symbol=e.symbol}});var BE,HE=d(()=>{ys();BE=class e extends hr{static symbol=Symbol.for("@smithy/map");name;traits;keySchema;valueSchema;symbol=e.symbol}});var VE,GE=d(()=>{ys();VE=class e extends hr{static symbol=Symbol.for("@smithy/ope");name;traits;input;output;symbol=e.symbol}});var wd,qf=d(()=>{ys();wd=class e extends hr{static symbol=Symbol.for("@smithy/str");name;traits;memberNames;memberList;symbol=e.symbol}});var jE,WE=d(()=>{qf();jE=class e extends wd{static symbol=Symbol.for("@smithy/err");ctor;symbol=e.symbol}});function Jo(e){if(typeof e=="object")return e;e=e|0;let t={},r=0;for(let o of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(e>>r++&1)===1&&(t[o]=1);return t}var Jf=d(()=>{});function xa(e,t){if(e instanceof j)return Object.assign(e,{memberName:t,_isMemberSchema:!0});let r=j;return new r(e,t)}var j,Yf,rL,zE=d(()=>{zf();Jf();j=class e{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=e.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(t,r){this.ref=t,this.memberName=r;let o=[],n=t,s=t;for(this._isMemberSchema=!1;Yf(n);)o.push(n[1]),n=n[0],s=En(n),this._isMemberSchema=!0;if(o.length>0){this.memberTraits={};for(let i=o.length-1;i>=0;--i){let a=o[i];Object.assign(this.memberTraits,Jo(a))}}else this.memberTraits=0;if(s instanceof e){let i=this.memberTraits;Object.assign(this,s),this.memberTraits=Object.assign({},i,s.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??s.memberName;return}if(this.schema=En(s),rL(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(s),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](t){let r=this.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===this.symbol:r}static of(t){let r=En(t);if(r instanceof e)return r;if(Yf(r)){let[o,n]=r;if(o instanceof e)return Object.assign(o.getMergedTraits(),Jo(n)),o;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(t,null,2)}.`)}return new e(r)}getSchema(){let t=this.schema;return t[0]===0?t[4]:t}getName(t=!1){let{name:r}=this;return!t&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let t=this.getSchema();return typeof t=="number"?t>=64&&t<128:t[0]===1}isMapSchema(){let t=this.getSchema();return typeof t=="number"?t>=128&&t<=255:t[0]===2}isStructSchema(){let r=this.getSchema()[0];return r===3||r===-3||r===4}isUnionSchema(){return this.getSchema()[0]===4}isBlobSchema(){let t=this.getSchema();return t===21||t===42}isTimestampSchema(){let t=this.getSchema();return typeof t=="number"&&t>=4&&t<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:t}=this.getMergedTraits();return!!t||this.getSchema()===42}isIdempotencyToken(){let t=s=>(s&4)===4||!!s?.idempotencyToken,{normalizedTraits:r,traits:o,memberTraits:n}=this;return t(r)||t(o)||t(n)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return Jo(this.memberTraits)}getOwnTraits(){return Jo(this.traits)}getKeySchema(){let[t,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!t&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let o=this.getSchema(),n=t?15:o[4]??0;return xa([n,0],"key")}getValueSchema(){let t=this.getSchema(),[r,o,n]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],s=typeof t=="number"?63&t:t&&typeof t=="object"&&(o||n)?t[3+t[0]]:r?15:void 0;if(s!=null)return xa([s,0],o?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(t){let r=this.getSchema();if(this.isStructSchema()&&r[4].includes(t)){let o=r[4].indexOf(t),n=r[5][o];return xa(Yf(n)?n:[n,0],t)}if(this.isDocumentSchema())return xa([15,0],t);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${t}.`)}getMemberSchemas(){let t={};try{for(let[r,o]of this.structIterator())t[r]=o}catch{}return t}getEventStreamMember(){if(this.isStructSchema()){for(let[t,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return t}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");let t=this.getSchema();for(let r=0;r<t[4].length;++r)yield[t[4][r],xa([t[5][r],0],t[4][r])]}};Yf=e=>Array.isArray(e)&&e.length===2,rL=e=>Array.isArray(e)&&e.length>=5});var KE,qE=d(()=>{ys();KE=class e extends hr{static symbol=Symbol.for("@smithy/sim");name;schemaRef;traits;symbol=e.symbol}});var JE=d(()=>{});var w,YE=d(()=>{w=class e{namespace;schemas;exceptions;static registries=new Map;constructor(t,r=new Map,o=new Map){this.namespace=t,this.schemas=r,this.exceptions=o}static for(t){return e.registries.has(t)||e.registries.set(t,new e(t)),e.registries.get(t)}register(t,r){let o=this.normalizeShapeId(t);e.for(o.split("#")[0]).schemas.set(o,r)}getSchema(t){let r=this.normalizeShapeId(t);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(t,r){let o=t,n=e.for(o[1]);n.schemas.set(o[1]+"#"+o[2],o),n.exceptions.set(o,r)}getErrorCtor(t){let r=t;return e.for(r[1]).exceptions.get(r)}getBaseException(){for(let t of this.exceptions.keys())if(Array.isArray(t)){let[,r,o]=t,n=r+"#"+o;if(n.startsWith("smithy.ts.sdk.synthetic.")&&n.endsWith("ServiceException"))return t}}find(t){return[...this.schemas.values()].find(t)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(t){return t.includes("#")?t:this.namespace+"#"+t}}});var ye=d(()=>{zf();LE();FE();HE();GE();bd();WE();zE();ys();qE();qf();JE();Jf();YE()});var XE=d(()=>{});var Xf,oL,QE,nL,ZE,e_,t_,sL,r_,o_,iL,Rd,pi,n_,aL,cL,Qf=d(()=>{Xf=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&cL.warn(aL(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},oL=Math.ceil(34028234663852886e22),QE=e=>{let t=Xf(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>oL)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},nL=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},ZE=e=>t_(e,16),e_=e=>t_(e,8),t_=(e,t)=>{let r=nL(e);if(r!==void 0&&sL(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},sL=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},r_=e=>Xf(typeof e=="string"?Rd(e):e),o_=e=>QE(typeof e=="string"?Rd(e):e),iL=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Rd=e=>{let t=e.match(iL);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},pi=e=>ZE(typeof e=="string"?Rd(e):e),n_=e=>e_(typeof e=="string"?Rd(e):e),aL=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),cL={warn:console.warn}});function fi(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),o=e.getUTCDay(),n=e.getUTCDate(),s=e.getUTCHours(),i=e.getUTCMinutes(),a=e.getUTCSeconds(),c=n<10?`0${n}`:`${n}`,l=s<10?`0${s}`:`${s}`,p=i<10?`0${i}`:`${i}`,u=a<10?`0${a}`:`${a}`;return`${dL[o]}, ${c} ${em[r]} ${t} ${l}:${p}:${u} GMT`}var dL,em,lL,s_,pL,i_,uL,fL,mL,a_,c_,ya,hL,gL,xL,Zf,yL,SL,EL,_o,_L,bL,ui,d_=d(()=>{Qf();dL=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],em=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];lL=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),s_=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=lL.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,o,n,s,i,a,c,l]=t,p=pi(ui(o)),u=_o(n,"month",1,12),f=_o(s,"day",1,31);return ya(p,u,f,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:l})},pL=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),i_=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=pL.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,o,n,s,i,a,c,l,p]=t,u=pi(ui(o)),f=_o(n,"month",1,12),m=_o(s,"day",1,31),x=ya(u,f,m,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:l});return p.toUpperCase()!="Z"&&x.setTime(x.getTime()-bL(p)),x},uL=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),fL=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),mL=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),a_=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=uL.exec(e);if(t){let[r,o,n,s,i,a,c,l]=t;return ya(pi(ui(s)),Zf(n),_o(o,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:l})}if(t=fL.exec(e),t){let[r,o,n,s,i,a,c,l]=t;return xL(ya(hL(s),Zf(n),_o(o,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:l}))}if(t=mL.exec(e),t){let[r,o,n,s,i,a,c,l]=t;return ya(pi(ui(l)),Zf(o),_o(n.trimLeft(),"day",1,31),{hours:s,minutes:i,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")},c_=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=r_(e);else if(typeof e=="object"&&e.tag===1)t=e.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},ya=(e,t,r,o)=>{let n=t-1;return SL(e,n,r),new Date(Date.UTC(e,n,r,_o(o.hours,"hour",0,23),_o(o.minutes,"minute",0,59),_o(o.seconds,"seconds",0,60),_L(o.fractionalMilliseconds)))},hL=e=>{let t=new Date().getUTCFullYear(),r=Math.floor(t/100)*100+pi(ui(e));return r<t?r+100:r},gL=50*365*24*60*60*1e3,xL=e=>e.getTime()-new Date().getTime()>gL?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,Zf=e=>{let t=em.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},yL=[31,28,31,30,31,30,31,31,30,31,30,31],SL=(e,t,r)=>{let o=yL[t];if(t===1&&EL(e)&&(o=29),r>o)throw new TypeError(`Invalid day for ${em[t]} in ${e}: ${r}`)},EL=e=>e%4===0&&(e%100!==0||e%400===0),_o=(e,t,r,o)=>{let n=n_(ui(e));if(n<r||n>o)throw new TypeError(`${t} must be between ${r} and ${o}, inclusive`);return n},_L=e=>e==null?0:o_("0."+e)*1e3,bL=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let o=Number(e.substring(1,3)),n=Number(e.substring(4,6));return r*(o*60+n)*60*1e3},ui=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)}});import l_ from"crypto";var tm,p_=d(()=>{tm=l_.randomUUID.bind(l_)});var gt,Yo,u_=d(()=>{p_();gt=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),Yo=()=>{if(tm)return tm();let e=new Uint8Array(16);return crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128,gt[e[0]]+gt[e[1]]+gt[e[2]]+gt[e[3]]+"-"+gt[e[4]]+gt[e[5]]+"-"+gt[e[6]]+gt[e[7]]+"-"+gt[e[8]]+gt[e[9]]+"-"+gt[e[10]]+gt[e[11]]+gt[e[12]]+gt[e[13]]+gt[e[14]]+gt[e[15]]}});var rm=d(()=>{u_()});var f_=d(()=>{rm()});var kt,m_=d(()=>{kt=function(t){return Object.assign(new String(t),{deserializeJSON(){return JSON.parse(String(t))},toString(){return String(t)},toJSON(){return String(t)}})};kt.from=e=>e&&typeof e=="object"&&(e instanceof kt||"deserializeJSON"in e)?e:typeof e=="string"||Object.getPrototypeOf(e)===String.prototype?kt(String(e)):kt(JSON.stringify(e));kt.fromObject=kt.from});function h_(e){return(e.includes(",")||e.includes('"'))&&(e=`"${e.replace(/"/g,'\\"')}"`),e}var g_=d(()=>{});function Xo(e,t,r){let o=Number(e);if(o<t||o>r)throw new Error(`Value ${o} out of range [${t}, ${r}]`)}var om,nm,sm,x_,y_,wL,RL,IL,TL,vL,S_,E_,__,b_=d(()=>{om="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",nm="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",sm="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",x_="(\\d?\\d)",y_="(\\d{4})",wL=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),RL=new RegExp(`^${om}, ${x_} ${nm} ${y_} ${sm} GMT$`),IL=new RegExp(`^${om}, ${x_}-${nm}-(\\d\\d) ${sm} GMT$`),TL=new RegExp(`^${om} ${nm} ( [1-9]|\\d\\d) ${sm} ${y_}$`),vL=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],S_=e=>{if(e==null)return;let t=NaN;if(typeof e=="number")t=e;else if(typeof e=="string"){if(!/^-?\d*\.?\d+$/.test(e))throw new TypeError("parseEpochTimestamp - numeric string invalid.");t=Number.parseFloat(e)}else typeof e=="object"&&e.tag===1&&(t=e.value);if(isNaN(t)||Math.abs(t)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(t*1e3))},E_=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC3339 timestamps must be strings");let t=wL.exec(e);if(!t)throw new TypeError(`Invalid RFC3339 timestamp format ${e}`);let[,r,o,n,s,i,a,,c,l]=t;Xo(o,1,12),Xo(n,1,31),Xo(s,0,23),Xo(i,0,59),Xo(a,0,60);let p=new Date(Date.UTC(Number(r),Number(o)-1,Number(n),Number(s),Number(i),Number(a),Number(c)?Math.round(parseFloat(`0.${c}`)*1e3):0));if(p.setUTCFullYear(Number(r)),l.toUpperCase()!="Z"){let[,u,f,m]=/([+-])(\d\d):(\d\d)/.exec(l)||[void 0,"+",0,0],x=u==="-"?1:-1;p.setTime(p.getTime()+x*(Number(f)*60*60*1e3+Number(m)*60*1e3))}return p},__=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC7231 timestamps must be strings.");let t,r,o,n,s,i,a,c;if((c=RL.exec(e))?[,t,r,o,n,s,i,a]=c:(c=IL.exec(e))?([,t,r,o,n,s,i,a]=c,o=(Number(o)+1900).toString()):(c=TL.exec(e))&&([,r,t,n,s,i,a,o]=c),o&&i){let l=Date.UTC(Number(o),vL.indexOf(r),Number(t),Number(n),Number(s),Number(i),a?Math.round(parseFloat(`0.${a}`)*1e3):0);Xo(t,1,31),Xo(n,0,23),Xo(s,0,59),Xo(i,0,60);let p=new Date(l);return p.setUTCFullYear(Number(o)),p}throw new TypeError(`Invalid RFC7231 date-time value ${e}.`)}});function w_(e,t,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let o=e.split(t);if(r===1)return o;let n=[],s="";for(let i=0;i<o.length;i++)s===""?s=o[i]:s+=t+o[i],(i+1)%r===0&&(n.push(s),s="");return s!==""&&n.push(s),n}var R_=d(()=>{});var Id,I_=d(()=>{Id=e=>{let t=e.length,r=[],o=!1,n,s=0;for(let i=0;i<t;++i){let a=e[i];switch(a){case'"':n!=="\\"&&(o=!o);break;case",":o||(r.push(e.slice(s,i)),s=i+1);break;default:}n=a}return r.push(e.slice(s)),r.map(i=>{i=i.trim();let a=i.length;return a<2?i:(i[0]==='"'&&i[a-1]==='"'&&(i=i.slice(1,a-1)),i.replace(/\\"/g,'"'))})}});var T_,tt,v_=d(()=>{T_=/^-?\d*(\.\d+)?$/,tt=class e{string;type;constructor(t,r){if(this.string=t,this.type=r,!T_.test(t))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](t){if(!t||typeof t!="object")return!1;let r=t;return e.prototype.isPrototypeOf(t)||r.type==="bigDecimal"&&T_.test(r.string)}}});var bo=d(()=>{XE();d_();f_();m_();Qf();g_();b_();R_();I_();v_()});var wo,mi=d(()=>{wo=class{serdeContext;setSerdeContext(t){this.serdeContext=t}}});var im,C_=d(()=>{He();im=class{marshaller;serializer;deserializer;serdeContext;defaultContentType;constructor({marshaller:t,serializer:r,deserializer:o,serdeContext:n,defaultContentType:s}){this.marshaller=t,this.serializer=r,this.deserializer=o,this.serdeContext=n,this.defaultContentType=s}async serializeEventStream({eventStream:t,requestSchema:r,initialRequest:o}){let n=this.marshaller,s=r.getEventStreamMember(),i=r.getMemberSchema(s),a=this.serializer,c=this.defaultContentType,l=Symbol("initialRequestMarker"),p={async*[Symbol.asyncIterator](){if(o){let u={":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:c}};a.write(r,o);let f=a.flush();yield{[l]:!0,headers:u,body:f}}for await(let u of t)yield u}};return n.serialize(p,u=>{if(u[l])return{headers:u.headers,body:u.body};let f=Object.keys(u).find(O=>O!=="__type")??"",{additionalHeaders:m,body:x,eventType:E,explicitPayloadContentType:T}=this.writeEventBody(f,i,u);return{headers:{":event-type":{type:"string",value:E},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:T??c},...m},body:x}})}async deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:o}){let n=this.marshaller,s=r.getEventStreamMember(),a=r.getMemberSchema(s).getMemberSchemas(),c=Symbol("initialResponseMarker"),l=n.deserialize(t.body,async f=>{let m=Object.keys(f).find(E=>E!=="__type")??"",x=f[m].body;if(m==="initial-response"){let E=await this.deserializer.read(r,x);return delete E[s],{[c]:!0,...E}}else if(m in a){let E=a[m];if(E.isStructSchema()){let T={},A=!1;for(let[O,ie]of E.structIterator()){let{eventHeader:ae,eventPayload:ve}=ie.getMergedTraits();if(A=A||!!(ae||ve),ve)ie.isBlobSchema()?T[O]=x:ie.isStringSchema()?T[O]=(this.serdeContext?.utf8Encoder??De)(x):ie.isStructSchema()&&(T[O]=await this.deserializer.read(ie,x));else if(ae){let qe=f[m].headers[O]?.value;qe!=null&&(ie.isNumericSchema()?qe&&typeof qe=="object"&&"bytes"in qe?T[O]=BigInt(qe.toString()):T[O]=Number(qe):T[O]=qe)}}if(A)return{[m]:T}}return{[m]:await this.deserializer.read(E,x)}}else return{$unknown:f}}),p=l[Symbol.asyncIterator](),u=await p.next();if(u.done)return l;if(u.value?.[c]){if(!r)throw new Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(let[f,m]of Object.entries(u.value))o[f]=m}return{async*[Symbol.asyncIterator](){for(u?.value?.[c]||(yield u.value);;){let{done:f,value:m}=await p.next();if(f)break;yield m}}}}writeEventBody(t,r,o){let n=this.serializer,s=t,i=null,a,c=r.getSchema()[4].includes(t),l={};if(c){let f=r.getMemberSchema(t);if(f.isStructSchema()){for(let[m,x]of f.structIterator()){let{eventHeader:E,eventPayload:T}=x.getMergedTraits();if(T)i=m;else if(E){let A=o[t][m],O="binary";x.isNumericSchema()?(-2)**31<=A&&A<=2**31-1?O="integer":O="long":x.isTimestampSchema()?O="timestamp":x.isStringSchema()?O="string":x.isBooleanSchema()&&(O="boolean"),A!=null&&(l[m]={type:O,value:A},delete o[t][m])}}if(i!==null){let m=f.getMemberSchema(i);m.isBlobSchema()?a="application/octet-stream":m.isStringSchema()&&(a="text/plain"),n.write(m,o[t][i])}else n.write(f,o[t])}else throw new Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}else{let[f,m]=o[t];s=f,n.write(15,m)}let p=n.flush();return{body:typeof p=="string"?(this.serdeContext?.utf8Decoder??Oe)(p):p,eventType:s,explicitPayloadContentType:a,additionalHeaders:l}}}});var A_={};zt(A_,{EventStreamSerde:()=>im});var P_=d(()=>{C_()});var hi,Td=d(()=>{ye();$e();mi();hi=class extends wo{options;constructor(t){super(),this.options=t}getRequestType(){return _e}getResponseType(){return cr}setSerdeContext(t){this.serdeContext=t,this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(t)}updateServiceEndpoint(t,r){if("url"in r){t.protocol=r.url.protocol,t.hostname=r.url.hostname,t.port=r.url.port?Number(r.url.port):void 0,t.path=r.url.pathname,t.fragment=r.url.hash||void 0,t.username=r.url.username||void 0,t.password=r.url.password||void 0,t.query||(t.query={});for(let[o,n]of r.url.searchParams.entries())t.query[o]=n;return t}else return t.protocol=r.protocol,t.hostname=r.hostname,t.port=r.port?Number(r.port):void 0,t.path=r.path,t.query={...r.query},t}setHostPrefix(t,r,o){let n=j.of(r.input),s=Jo(r.traits??{});if(s.endpoint){let i=s.endpoint?.[0];if(typeof i=="string"){let a=[...n.structIterator()].filter(([,c])=>c.getMergedTraits().hostLabel);for(let[c]of a){let l=o[c];if(typeof l!="string")throw new Error(`@smithy/core/schema - ${c} in input must be a string as hostLabel.`);i=i.replace(`{${c}}`,l)}t.hostname=i+t.hostname}}}deserializeMetadata(t){return{httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:t,requestSchema:r,initialRequest:o}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:t,requestSchema:r,initialRequest:o})}async deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:o}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:o})}async loadEventStreamCapability(){let{EventStreamSerde:t}=await Promise.resolve().then(()=>(P_(),A_));return new t({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(t,r,o,n,s){return[]}getEventStreamMarshaller(){let t=this.serdeContext;if(!t.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return t.eventStreamMarshaller}}});var vd,D_=d(()=>{ye();bo();$e();Sd();Ed();Wf();Td();vd=class extends hi{async serializeRequest(t,r,o){let n={...r??{}},s=this.serializer,i={},a={},c=await o.endpoint(),l=j.of(t?.input),p=l.getSchema(),u=!1,f,m=new _e({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:i,headers:a,body:void 0});if(c){this.updateServiceEndpoint(m,c),this.setHostPrefix(m,t,n);let x=Jo(t.traits);if(x.http){m.method=x.http[0];let[E,T]=x.http[1].split("?");m.path=="/"?m.path=E:m.path+=E;let A=new URLSearchParams(T??"");Object.assign(i,Object.fromEntries(A))}}for(let[x,E]of l.structIterator()){let T=E.getMergedTraits()??{},A=n[x];if(!(A==null&&!E.isIdempotencyToken()))if(T.httpPayload)E.isStreaming()?E.isStructSchema()?n[x]&&(f=await this.serializeEventStream({eventStream:n[x],requestSchema:l})):f=A:(s.write(E,A),f=s.flush()),delete n[x];else if(T.httpLabel){s.write(E,A);let O=s.flush();m.path.includes(`{${x}+}`)?m.path=m.path.replace(`{${x}+}`,O.split("/").map(li).join("/")):m.path.includes(`{${x}}`)&&(m.path=m.path.replace(`{${x}}`,li(O))),delete n[x]}else if(T.httpHeader)s.write(E,A),a[T.httpHeader.toLowerCase()]=String(s.flush()),delete n[x];else if(typeof T.httpPrefixHeaders=="string"){for(let[O,ie]of Object.entries(A)){let ae=T.httpPrefixHeaders+O;s.write([E.getValueSchema(),{httpHeader:ae}],ie),a[ae.toLowerCase()]=s.flush()}delete n[x]}else T.httpQuery||T.httpQueryParams?(this.serializeQuery(E,A,i),delete n[x]):u=!0}return u&&n&&(s.write(p,n),f=s.flush()),m.headers=a,m.query=i,m.body=f,m}serializeQuery(t,r,o){let n=this.serializer,s=t.getMergedTraits();if(s.httpQueryParams){for(let[i,a]of Object.entries(r))if(!(i in o)){let c=t.getValueSchema();Object.assign(c.getMergedTraits(),{...s,httpQuery:i,httpQueryParams:void 0}),this.serializeQuery(c,a,o)}return}if(t.isListSchema()){let i=!!t.getMergedTraits().sparse,a=[];for(let c of r){n.write([t.getValueSchema(),s],c);let l=n.flush();(i||l!==void 0)&&a.push(l)}o[s.httpQuery]=a}else n.write([t,s],r),o[s.httpQuery]=n.flush()}async deserializeResponse(t,r,o){let n=this.deserializer,s=j.of(t.output),i={};if(o.statusCode>=300){let c=await Ot(o.body,r);throw c.byteLength>0&&Object.assign(i,await n.read(15,c)),await this.handleError(t,r,o,i,this.deserializeMetadata(o)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let c in o.headers){let l=o.headers[c];delete o.headers[c],o.headers[c.toLowerCase()]=l}let a=await this.deserializeHttpMessage(s,r,o,i);if(a.length){let c=await Ot(o.body,r);if(c.byteLength>0){let l=await n.read(s,c);for(let p of a)i[p]=l[p]}}else a.discardResponseBody&&await Ot(o.body,r);return i.$metadata=this.deserializeMetadata(o),i}async deserializeHttpMessage(t,r,o,n,s){let i;n instanceof Set?i=s:i=n;let a=!0,c=this.deserializer,l=j.of(t),p=[];for(let[u,f]of l.structIterator()){let m=f.getMemberTraits();if(m.httpPayload){if(a=!1,f.isStreaming())f.isStructSchema()?i[u]=await this.deserializeEventStream({response:o,responseSchema:l}):i[u]=yd(o.body);else if(o.body){let E=await Ot(o.body,r);E.byteLength>0&&(i[u]=await c.read(f,E))}}else if(m.httpHeader){let x=String(m.httpHeader).toLowerCase(),E=o.headers[x];if(E!=null)if(f.isListSchema()){let T=f.getValueSchema();T.getMergedTraits().httpHeader=x;let A;T.isTimestampSchema()&&T.getSchema()===4?A=w_(E,",",2):A=Id(E);let O=[];for(let ie of A)O.push(await c.read(T,ie.trim()));i[u]=O}else i[u]=await c.read(f,E)}else if(m.httpPrefixHeaders!==void 0){i[u]={};for(let[x,E]of Object.entries(o.headers))if(x.startsWith(m.httpPrefixHeaders)){let T=f.getValueSchema();T.getMergedTraits().httpHeader=x,i[u][x.slice(m.httpPrefixHeaders.length)]=await c.read(T,E)}}else m.httpResponseCode?i[u]=o.statusCode:p.push(u)}return p.discardResponseBody=a,p}}});var gi,N_=d(()=>{ye();$e();Ed();Td();gi=class extends hi{async serializeRequest(t,r,o){let n=this.serializer,s={},i={},a=await o.endpoint(),c=j.of(t?.input),l=c.getSchema(),p,u=new _e({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:s,headers:i,body:void 0});a&&(this.updateServiceEndpoint(u,a),this.setHostPrefix(u,t,r));let f={...r};if(r){let m=c.getEventStreamMember();if(m){if(f[m]){let x={};for(let[E,T]of c.structIterator())E!==m&&f[E]&&(n.write(T,f[E]),x[E]=n.flush());p=await this.serializeEventStream({eventStream:f[m],requestSchema:c,initialRequest:x})}}else n.write(l,f),p=n.flush()}return u.headers=i,u.query=s,u.body=p,u.method="POST",u}async deserializeResponse(t,r,o){let n=this.deserializer,s=j.of(t.output),i={};if(o.statusCode>=300){let c=await Ot(o.body,r);throw c.byteLength>0&&Object.assign(i,await n.read(15,c)),await this.handleError(t,r,o,i,this.deserializeMetadata(o)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let c in o.headers){let l=o.headers[c];delete o.headers[c],o.headers[c.toLowerCase()]=l}let a=s.getEventStreamMember();if(a)i[a]=await this.deserializeEventStream({response:o,responseSchema:s,initialResponseContainer:i});else{let c=await Ot(o.body,r);c.byteLength>0&&Object.assign(i,await n.read(s,c))}return i.$metadata=this.deserializeMetadata(o),i}}});var O_=d(()=>{});var k_=d(()=>{});function Ro(e,t){if(t.timestampFormat.useTrait&&e.isTimestampSchema()&&(e.getSchema()===5||e.getSchema()===6||e.getSchema()===7))return e.getSchema();let{httpLabel:r,httpPrefixHeaders:o,httpHeader:n,httpQuery:s}=e.getMergedTraits();return(t.httpBindings?typeof o=="string"||n?6:s||r?5:void 0:void 0)??t.timestampFormat.default}var Cd=d(()=>{});var xi,am=d(()=>{ye();bo();mt();He();mi();Cd();xi=class extends wo{settings;constructor(t){super(),this.settings=t}read(t,r){let o=j.of(t);if(o.isListSchema())return Id(r).map(n=>this.read(o.getValueSchema(),n));if(o.isBlobSchema())return(this.serdeContext?.base64Decoder??Le)(r);if(o.isTimestampSchema())switch(Ro(o,this.settings)){case 5:return E_(r);case 6:return __(r);case 7:return S_(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(o.isStringSchema()){let n=o.getMergedTraits().mediaType,s=r;if(n)return o.getMergedTraits().httpHeader&&(s=this.base64ToUtf8(s)),(n==="application/json"||n.endsWith("+json"))&&(s=kt.from(s)),s}return o.isNumericSchema()?Number(r):o.isBigIntegerSchema()?BigInt(r):o.isBigDecimalSchema()?new tt(r,"bigDecimal"):o.isBooleanSchema()?String(r).toLowerCase()==="true":r}base64ToUtf8(t){return(this.serdeContext?.utf8Encoder??De)((this.serdeContext?.base64Decoder??Le)(t))}}});var Ad,$_=d(()=>{ye();He();mi();am();Ad=class extends wo{codecDeserializer;stringDeserializer;constructor(t,r){super(),this.codecDeserializer=t,this.stringDeserializer=new xi(r)}setSerdeContext(t){this.stringDeserializer.setSerdeContext(t),this.codecDeserializer.setSerdeContext(t),this.serdeContext=t}read(t,r){let o=j.of(t),n=o.getMergedTraits(),s=this.serdeContext?.utf8Encoder??De;if(n.httpHeader||n.httpResponseCode)return this.stringDeserializer.read(o,s(r));if(n.httpPayload){if(o.isBlobSchema()){let i=this.serdeContext?.utf8Decoder??Oe;return typeof r=="string"?i(r):r}else if(o.isStringSchema())return"byteLength"in r?s(r):r}return this.codecDeserializer.read(o,r)}}});var Pd,cm=d(()=>{ye();bo();mt();mi();Cd();Pd=class extends wo{settings;stringBuffer="";constructor(t){super(),this.settings=t}write(t,r){let o=j.of(t);switch(typeof r){case"object":if(r===null){this.stringBuffer="null";return}if(o.isTimestampSchema()){if(!(r instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${o.getName(!0)}`);switch(Ro(o,this.settings)){case 5:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=fi(r);break;case 7:this.stringBuffer=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1e3)}return}if(o.isBlobSchema()&&"byteLength"in r){this.stringBuffer=(this.serdeContext?.base64Encoder??Ne)(r);return}if(o.isListSchema()&&Array.isArray(r)){let i="";for(let a of r){this.write([o.getValueSchema(),o.getMergedTraits()],a);let c=this.flush(),l=o.getValueSchema().isTimestampSchema()?c:h_(c);i!==""&&(i+=", "),i+=l}this.stringBuffer=i;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":let n=o.getMergedTraits().mediaType,s=r;if(n&&((n==="application/json"||n.endsWith("+json"))&&(s=kt.from(s)),o.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??Ne)(s.toString());return}this.stringBuffer=r;break;default:o.isIdempotencyToken()?this.stringBuffer=Yo():this.stringBuffer=String(r)}}flush(){let t=this.stringBuffer;return this.stringBuffer="",t}}});var Dd,M_=d(()=>{ye();cm();Dd=class{codecSerializer;stringSerializer;buffer;constructor(t,r,o=new Pd(r)){this.codecSerializer=t,this.stringSerializer=o}setSerdeContext(t){this.codecSerializer.setSerdeContext(t),this.stringSerializer.setSerdeContext(t)}write(t,r){let o=j.of(t),n=o.getMergedTraits();if(n.httpHeader||n.httpLabel||n.httpQuery){this.stringSerializer.write(o,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(o,r)}flush(){if(this.buffer!==void 0){let t=this.buffer;return this.buffer=void 0,t}return this.codecSerializer.flush()}}});var Qo=d(()=>{Ed();Wf();D_();Td();N_();k_();O_();am();$_();M_();cm();Cd();mi()});var L_=d(()=>{});function U_(e,t,r){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=r}var F_=d(()=>{});var $t,B_=d(()=>{$t=class{authSchemes=new Map;constructor(t){for(let[r,o]of Object.entries(t))o!==void 0&&this.authSchemes.set(r,o)}getIdentityProvider(t){return this.authSchemes.get(t)}}});var H_=d(()=>{});var V_=d(()=>{});var gr,G_=d(()=>{gr=class{async sign(t,r,o){return t}}});var j_=d(()=>{H_();V_();G_()});var CL,W_,dm,z_,K_=d(()=>{CL=e=>function(r){return dm(r)&&r.expiration.getTime()-Date.now()<e},W_=CL(3e5),dm=e=>e.expiration!==void 0,z_=(e,t,r)=>{if(e===void 0)return;let o=typeof e!="function"?async()=>Promise.resolve(e):e,n,s,i,a=!1,c=async l=>{s||(s=o(l));try{n=await s,i=!0,a=!1}finally{s=void 0}return n};return t===void 0?async l=>((!i||l?.forceRefresh)&&(n=await c(l)),n):async l=>((!i||l?.forceRefresh)&&(n=await c(l)),a?n:r(n)?(t(n)&&await c(l),n):(a=!0,n))}});var q_=d(()=>{B_();j_();K_()});var Qe=d(()=>{RS();OS();MS();LS();US();L_();F_();q_()});function AL(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function xr(e){let t=ms(e.userAgentAppId??lm),{customUserAgent:r}=e;return Object.assign(e,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let o=await t();if(!AL(o)){let n=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;typeof o!="string"?n?.warn("userAgentAppId must be a string or undefined."):o.length>50&&n?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return o}})}var lm,J_=d(()=>{Qe();lm=void 0});var Mt,Y_=d(()=>{Mt=class{capacity;data=new Map;parameters=[];constructor({size:t,params:r}){this.capacity=t??50,r&&(this.parameters=r)}get(t,r){let o=this.hash(t);if(o===!1)return r();if(!this.data.has(o)){if(this.data.size>this.capacity+10){let n=this.data.keys(),s=0;for(;;){let{value:i,done:a}=n.next();if(this.data.delete(i),a||++s>10)break}}this.data.set(o,r())}return this.data.get(o)}size(){return this.data.size}hash(t){let r="",{parameters:o}=this;if(o.length===0)return!1;for(let n of o){let s=String(t[n]??"");if(s.includes("|;"))return!1;r+=s+"|;"}return r}}});var PL,Sa,pm=d(()=>{PL=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Sa=e=>PL.test(e)||e.startsWith("[")&&e.endsWith("]")});var DL,Ss,um=d(()=>{DL=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Ss=(e,t=!1)=>{if(!t)return DL.test(e);let r=e.split(".");for(let o of r)if(!Ss(o))return!1;return!0}});var st,Nd=d(()=>{st={}});var Zo,X_=d(()=>{Zo="endpoints"});function yr(e){return typeof e!="object"||e==null?e:"ref"in e?`$${yr(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(yr).join(", ")})`:JSON.stringify(e,null,2)}var Q_=d(()=>{});var Ea=d(()=>{X_();Q_()});var ke,Z_=d(()=>{ke=class extends Error{constructor(t){super(t),this.name="EndpointError"}}});var eb=d(()=>{});var tb=d(()=>{});var rb=d(()=>{});var ob=d(()=>{});var nb=d(()=>{});var sb=d(()=>{});var Sr=d(()=>{Z_();eb();tb();rb();ob();nb();sb()});var ib,ab=d(()=>{ib=(e,t)=>e===t});var cb,db=d(()=>{Sr();cb=e=>{let t=e.split("."),r=[];for(let o of t){let n=o.indexOf("[");if(n!==-1){if(o.indexOf("]")!==o.length-1)throw new ke(`Path: '${e}' does not end with ']'`);let s=o.slice(n+1,-1);if(Number.isNaN(parseInt(s)))throw new ke(`Invalid array index: '${s}' in path: '${e}'`);n!==0&&r.push(o.slice(0,n)),r.push(s)}else r.push(o)}return r}});var Od,lb=d(()=>{Sr();db();Od=(e,t)=>cb(t).reduce((r,o)=>{if(typeof r!="object")throw new ke(`Index '${o}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(o)]:r[o]},e)});var pb,ub=d(()=>{pb=e=>e!=null});var fb,mb=d(()=>{fb=e=>!e});var fm,hb,gb=d(()=>{Sn();pm();fm={[ii.HTTP]:80,[ii.HTTPS]:443},hb=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:f,port:m,protocol:x="",path:E="",query:T={}}=e,A=new URL(`${x}//${f}${m?`:${m}`:""}${E}`);return A.search=Object.entries(T).map(([O,ie])=>`${O}=${ie}`).join("&"),A}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:o,hostname:n,pathname:s,protocol:i,search:a}=t;if(a)return null;let c=i.slice(0,-1);if(!Object.values(ii).includes(c))return null;let l=Sa(n),p=r.includes(`${o}:${fm[c]}`)||typeof e=="string"&&e.includes(`${o}:${fm[c]}`),u=`${o}${p?`:${fm[c]}`:""}`;return{scheme:c,authority:u,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:l}}});var xb,yb=d(()=>{xb=(e,t)=>e===t});var Sb,Eb=d(()=>{Sb=(e,t,r,o)=>t>=r||e.length<r?null:o?e.substring(e.length-r,e.length-t):e.substring(t,r)});var _b,bb=d(()=>{_b=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)});var mm=d(()=>{ab();lb();ub();um();mb();gb();yb();Eb();bb()});var wb,Rb=d(()=>{mm();wb={booleanEquals:ib,getAttr:Od,isSet:pb,isValidHostLabel:Ss,not:fb,parseURL:hb,stringEquals:xb,substring:Sb,uriEncode:_b}});var kd,hm=d(()=>{mm();kd=(e,t)=>{let r=[],o={...t.endpointParams,...t.referenceRecord},n=0;for(;n<e.length;){let s=e.indexOf("{",n);if(s===-1){r.push(e.slice(n));break}r.push(e.slice(n,s));let i=e.indexOf("}",s);if(i===-1){r.push(e.slice(s));break}e[s+1]==="{"&&e[i+1]==="}"&&(r.push(e.slice(s+1,i)),n=i+2);let a=e.substring(s+1,i);if(a.includes("#")){let[c,l]=a.split("#");r.push(Od(o[c],l))}else r.push(o[a]);n=i+1}return r.join("")}});var Ib,Tb=d(()=>{Ib=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e]});var Es,$d,vb,_a=d(()=>{Sr();Nd();Rb();hm();Tb();Es=(e,t,r)=>{if(typeof e=="string")return kd(e,r);if(e.fn)return vb.callFunction(e,r);if(e.ref)return Ib(e,r);throw new ke(`'${t}': ${String(e)} is not a string, function or reference.`)},$d=({fn:e,argv:t},r)=>{let o=t.map(s=>["boolean","number"].includes(typeof s)?s:vb.evaluateExpression(s,"arg",r)),n=e.split(".");return n[0]in st&&n[1]!=null?st[n[0]][n[1]](...o):wb[e](...o)},vb={evaluateExpression:Es,callFunction:$d}});var Cb=d(()=>{_a()});var Ab,Pb=d(()=>{Ea();Sr();Cb();Ab=({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new ke(`'${e}' is already defined in Reference Record.`);let o=$d(t,r);return r.logger?.debug?.(`${Zo} evaluateCondition: ${yr(t)} = ${yr(o)}`),{result:o===""?!0:!!o,...e!=null&&{toAssign:{name:e,value:o}}}}});var yi,Md=d(()=>{Ea();Pb();yi=(e=[],t)=>{let r={};for(let o of e){let{result:n,toAssign:s}=Ab(o,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!n)return{result:n};s&&(r[s.name]=s.value,t.logger?.debug?.(`${Zo} assign: ${s.name} := ${yr(s.value)}`))}return{result:!0,referenceRecord:r}}});var Db,Nb=d(()=>{Sr();_a();Db=(e,t)=>Object.entries(e).reduce((r,[o,n])=>({...r,[o]:n.map(s=>{let i=Es(s,"Header value entry",t);if(typeof i!="string")throw new ke(`Header '${o}' value '${i}' is not a string`);return i})}),{})});var gm,Ob,kb,$b=d(()=>{Sr();hm();gm=(e,t)=>Object.entries(e).reduce((r,[o,n])=>({...r,[o]:kb.getEndpointProperty(n,t)}),{}),Ob=(e,t)=>{if(Array.isArray(e))return e.map(r=>Ob(r,t));switch(typeof e){case"string":return kd(e,t);case"object":if(e===null)throw new ke(`Unexpected endpoint property: ${e}`);return kb.getEndpointProperties(e,t);case"boolean":return e;default:throw new ke(`Unexpected endpoint property type: ${typeof e}`)}},kb={getEndpointProperty:Ob,getEndpointProperties:gm}});var Mb,Lb=d(()=>{Sr();_a();Mb=(e,t)=>{let r=Es(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(o){throw console.error(`Failed to construct URL with ${r}`,o),o}throw new ke(`Endpoint URL must be a string, got ${typeof r}`)}});var Ub,Fb=d(()=>{Ea();Md();Nb();$b();Lb();Ub=(e,t)=>{let{conditions:r,endpoint:o}=e,{result:n,referenceRecord:s}=yi(r,t);if(!n)return;let i={...t,referenceRecord:{...t.referenceRecord,...s}},{url:a,properties:c,headers:l}=o;return t.logger?.debug?.(`${Zo} Resolving endpoint from template: ${yr(o)}`),{...l!=null&&{headers:Db(l,i)},...c!=null&&{properties:gm(c,i)},url:Mb(a,i)}}});var Bb,Hb=d(()=>{Sr();Md();_a();Bb=(e,t)=>{let{conditions:r,error:o}=e,{result:n,referenceRecord:s}=yi(r,t);if(n)throw new ke(Es(o,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))}});var xm,NL,Vb,Gb=d(()=>{Sr();Md();Fb();Hb();xm=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let o=Ub(r,t);if(o)return o}else if(r.type==="error")Bb(r,t);else if(r.type==="tree"){let o=Vb.evaluateTreeRule(r,t);if(o)return o}else throw new ke(`Unknown endpoint rule: ${r}`);throw new ke("Rules evaluation failed")},NL=(e,t)=>{let{conditions:r,rules:o}=e,{result:n,referenceRecord:s}=yi(r,t);if(n)return Vb.evaluateRules(o,{...t,referenceRecord:{...t.referenceRecord,...s}})},Vb={evaluateRules:xm,evaluateTreeRule:NL}});var jb=d(()=>{Nd();Gb()});var Er,Wb=d(()=>{Ea();Sr();jb();Er=(e,t)=>{let{endpointParams:r,logger:o}=t,{parameters:n,rules:s}=e;t.logger?.debug?.(`${Zo} Initial EndpointParams: ${yr(r)}`);let i=Object.entries(n).filter(([,l])=>l.default!=null).map(([l,p])=>[l,p.default]);if(i.length>0)for(let[l,p]of i)r[l]=r[l]??p;let a=Object.entries(n).filter(([,l])=>l.required).map(([l])=>l);for(let l of a)if(r[l]==null)throw new ke(`Missing required parameter: '${l}'`);let c=xm(s,{endpointParams:r,logger:o,referenceRecord:{}});return t.logger?.debug?.(`${Zo} Resolved endpoint: ${yr(c)}`),c}});var io=d(()=>{Y_();pm();um();Nd();Wb();Sr()});var ym=d(()=>{io()});var Sm,zb=d(()=>{io();ym();Sm=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!Sm(r))return!1;return!0}return!(!Ss(e)||e.length<3||e.length>63||e!==e.toLowerCase()||Sa(e))}});var Kb,OL,qb,Jb=d(()=>{Kb=":",OL="/",qb=e=>{let t=e.split(Kb);if(t.length<6)return null;let[r,o,n,s,i,...a]=t;if(r!=="arn"||o===""||n===""||a.join(Kb)==="")return null;let c=a.map(l=>l.split(OL)).flat();return{partition:o,service:n,region:s,accountId:i,resourceId:c}}});var Xb,Yb=d(()=>{Xb={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],version:"1.1"}});var $L,ML,Qb,Zb,Em=d(()=>{Yb();$L=Xb,ML="",Qb=e=>{let{partitions:t}=$L;for(let o of t){let{regions:n,outputs:s}=o;for(let[i,a]of Object.entries(n))if(i===e)return{...s,...a}}for(let o of t){let{regionRegex:n,outputs:s}=o;if(new RegExp(n).test(e))return{...s}}let r=t.find(o=>o.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},Zb=()=>ML});var qt,ew=d(()=>{io();zb();Jb();Em();qt={isVirtualHostableS3Bucket:Sm,parseArn:qb,partition:Qb};st.aws=qt});function tw(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[o,n=null]=r.split("=");o=decodeURIComponent(o),n&&(n=decodeURIComponent(n)),o in t?Array.isArray(t[o])?t[o].push(n):t[o]=[t[o],n]:t[o]=n}return t}var rw=d(()=>{});var rt,en=d(()=>{rw();rt=e=>{if(typeof e=="string")return rt(new URL(e));let{hostname:t,pathname:r,port:o,protocol:n,search:s}=e,i;return s&&(i=tw(s)),{hostname:t,port:o?parseInt(o):void 0,protocol:n,path:r,query:i}}});var ow=d(()=>{});var nw=d(()=>{});var sw=d(()=>{});var iw=d(()=>{});var aw=d(()=>{});var cw=d(()=>{});var dw=d(()=>{});var lw=d(()=>{});var pw=d(()=>{sw();iw();aw();cw();dw();lw()});var _n=d(()=>{ew();Em();ym();ow();nw();pw()});var uw,_r,fw=d(()=>{uw={warningEmitted:!1},_r=e=>{e&&!uw.warningEmitted&&parseInt(e.substring(1,e.indexOf(".")))<20&&(uw.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js ${e} in January 2026.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/c895JFp`))}});function oe(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var mw=d(()=>{});function Jt(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}var hw=d(()=>{});var gw=d(()=>{});var it=d(()=>{fw();mw();hw();gw()});var _m,xw=d(()=>{$e();_m=e=>cr.isInstance(e)?e.headers?.date??e.headers?.Date:void 0});var Ld,bm=d(()=>{Ld=e=>new Date(Date.now()+e)});var yw,Sw=d(()=>{bm();yw=(e,t)=>Math.abs(Ld(t).getTime()-e)>=3e5});var wm,Ew=d(()=>{Sw();wm=(e,t)=>{let r=Date.parse(e);return yw(r,t)?r-Date.now():t}});var _w=d(()=>{xw();bm();Ew()});var ba,bw,at,ww=d(()=>{$e();_w();ba=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},bw=async e=>{let t=ba("context",e.context),r=ba("config",e.config),o=t.endpointV2?.properties?.authSchemes?.[0],s=await ba("signer",r.signer)(o),i=e?.signingRegion,a=e?.signingRegionSet,c=e?.signingName;return{config:r,signer:s,signingRegion:i,signingRegionSet:a,signingName:c}},at=class{async sign(t,r,o){if(!_e.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let n=await bw(o),{config:s,signer:i}=n,{signingRegion:a,signingName:c}=n,l=o.context;if(l?.authSchemes?.length??0>1){let[u,f]=l.authSchemes;u?.name==="sigv4a"&&f?.name==="sigv4"&&(a=f?.signingRegion??a,c=f?.signingName??c)}return await i.sign(t,{signingDate:Ld(s.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(t){return r=>{let o=r.ServerTime??_m(r.$response);if(o){let n=ba("config",t.config),s=n.systemClockOffset;n.systemClockOffset=wm(o,n.systemClockOffset),n.systemClockOffset!==s&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){let o=_m(t);if(o){let n=ba("config",r.config);n.systemClockOffset=wm(o,n.systemClockOffset)}}}});var Rm,Rw=d(()=>{Rm=e=>typeof e=="string"&&e.length>0?e.split(",").map(t=>t.trim()):[]});var Iw,Im=d(()=>{Iw=e=>`AWS_BEARER_TOKEN_${e.replace(/[\s-]/g,"_").toUpperCase()}`});var Tw,vw,br,Cw=d(()=>{Rw();Im();Tw="AWS_AUTH_SCHEME_PREFERENCE",vw="auth_scheme_preference",br={environmentVariableSelector:(e,t)=>{if(t?.signingName&&Iw(t.signingName)in e)return["httpBearerAuth"];if(Tw in e)return Rm(e[Tw])},configFileSelector:e=>{if(vw in e)return Rm(e[vw])},default:[]}});var wr,wa=d(()=>{wr=class e extends Error{name="ProviderError";tryNextLink;constructor(t,r=!0){let o,n=!0;typeof r=="boolean"?(o=void 0,n=r):r!=null&&typeof r=="object"&&(o=r.logger,n=r.tryNextLink??!0),super(t),this.tryNextLink=n,Object.setPrototypeOf(this,e.prototype),o?.debug?.(`@smithy/property-provider ${n?"->":"(!)"} ${t}`)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}}});var $,Aw=d(()=>{wa();$=class e extends wr{name="CredentialsProviderError";constructor(t,r=!0){super(t,r),Object.setPrototypeOf(this,e.prototype)}}});var Rr,Pw=d(()=>{wa();Rr=class e extends wr{name="TokenProviderError";constructor(t,r=!0){super(t,r),Object.setPrototypeOf(this,e.prototype)}}});var Si,Dw=d(()=>{wa();Si=(...e)=>async()=>{if(e.length===0)throw new wr("No providers in chain");let t;for(let r of e)try{return await r()}catch(o){if(t=o,o?.tryNextLink)continue;throw o}throw t}});var Nw,Ow=d(()=>{Nw=e=>()=>Promise.resolve(e)});var Ud,kw=d(()=>{Ud=(e,t,r)=>{let o,n,s,i=!1,a=async()=>{n||(n=e());try{o=await n,s=!0,i=!1}finally{n=void 0}return o};return t===void 0?async c=>((!s||c?.forceRefresh)&&(o=await a()),o):async c=>((!s||c?.forceRefresh)&&(o=await a()),i?o:r&&!r(o)?(i=!0,o):(t(o)&&await a(),o))}});var Ie=d(()=>{Aw();wa();Pw();Dw();Ow();kw()});var $w=d(()=>{});var Mw,Lw,Tm,Uw,Fw,vm,Cm,Am,Pm,LL,Bw,Hw,Ra,Vw,Gw,jw,Ww,Fd,zw,Kw,qw,Dm,Jw,bn=d(()=>{Mw="X-Amz-Algorithm",Lw="X-Amz-Credential",Tm="X-Amz-Date",Uw="X-Amz-SignedHeaders",Fw="X-Amz-Expires",vm="X-Amz-Signature",Cm="X-Amz-Security-Token",Am="authorization",Pm=Tm.toLowerCase(),LL="date",Bw=[Am,Pm,LL],Hw=vm.toLowerCase(),Ra="x-amz-content-sha256",Vw=Cm.toLowerCase(),Gw={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},jw=/^proxy-/,Ww=/^sec-/,Fd="AWS4-HMAC-SHA256",zw="AWS4-HMAC-SHA256-PAYLOAD",Kw="UNSIGNED-PAYLOAD",qw=50,Dm="aws4_request",Jw=60*60*24*7});var Bd,Nm,Hd,Xw,Yw,Om=d(()=>{xs();He();bn();Bd={},Nm=[],Hd=(e,t,r)=>`${e}/${t}/${r}/${Dm}`,Xw=async(e,t,r,o,n)=>{let s=await Yw(e,t.secretAccessKey,t.accessKeyId),i=`${r}:${o}:${n}:${Nt(s)}:${t.sessionToken}`;if(i in Bd)return Bd[i];for(Nm.push(i);Nm.length>qw;)delete Bd[Nm.shift()];let a=`AWS4${t.secretAccessKey}`;for(let c of[r,o,n,Dm])a=await Yw(e,a,c);return Bd[i]=a},Yw=(e,t,r)=>{let o=new e(t);return o.update(so(r)),o.digest()}});var km,Qw=d(()=>{bn();km=({headers:e},t,r)=>{let o={};for(let n of Object.keys(e).sort()){if(e[n]==null)continue;let s=n.toLowerCase();(s in Gw||t?.has(s)||jw.test(s)||Ww.test(s))&&(!r||r&&!r.has(s))||(o[s]=e[n].trim().replace(/\s+/g," "))}return o}});var Vd,Zw=d(()=>{Mf();xs();He();bn();Vd=async({headers:e,body:t},r)=>{for(let o of Object.keys(e))if(o.toLowerCase()===Ra)return e[o];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||hd(t)){let o=new r;return o.update(so(t)),Nt(await o.digest())}return Kw}});function tR(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var Gd,eR,UL,$m,rR=d(()=>{xs();He();Gd=class{format(t){let r=[];for(let s of Object.keys(t)){let i=Oe(s);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[s]))}let o=new Uint8Array(r.reduce((s,i)=>s+i.byteLength,0)),n=0;for(let s of r)o.set(s,n),n+=s.byteLength;return o}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let o=new DataView(new ArrayBuffer(5));return o.setUint8(0,4),o.setInt32(1,t.value,!1),new Uint8Array(o.buffer);case"long":let n=new Uint8Array(9);return n[0]=5,n.set(t.value.bytes,1),n;case"binary":let s=new DataView(new ArrayBuffer(3+t.value.byteLength));s.setUint8(0,6),s.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(s.buffer);return i.set(t.value,3),i;case"string":let a=Oe(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let l=new Uint8Array(c.buffer);return l.set(a,3),l;case"timestamp":let p=new Uint8Array(9);return p[0]=8,p.set($m.fromNumber(t.value.valueOf()).bytes,1),p;case"uuid":if(!UL.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let u=new Uint8Array(17);return u[0]=9,u.set(IE(t.value.replace(/\-/g,"")),1),u}}};(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(eR||(eR={}));UL=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,$m=class e{bytes;constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let o=7,n=Math.abs(Math.round(t));o>-1&&n>0;o--,n/=256)r[o]=n;return t<0&&tR(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&tR(t),parseInt(Nt(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}}});var oR,nR=d(()=>{oR=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1}});var sR,iR=d(()=>{$e();sR=(e,t={})=>{let{headers:r,query:o={}}=_e.clone(e);for(let n of Object.keys(r)){let s=n.toLowerCase();(s.slice(0,6)==="x-amz-"&&!t.unhoistableHeaders?.has(s)||t.hoistableHeaders?.has(s))&&(o[n]=r[n],delete r[n])}return{...e,headers:r,query:o}}});var Mm,aR=d(()=>{$e();bn();Mm=e=>{e=_e.clone(e);for(let t of Object.keys(e.headers))Bw.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e}});var cR,dR=d(()=>{gd();bn();cR=({query:e={}})=>{let t=[],r={};for(let o of Object.keys(e)){if(o.toLowerCase()===Hw)continue;let n=Eo(o);t.push(n);let s=e[o];typeof s=="string"?r[n]=`${n}=${Eo(s)}`:Array.isArray(s)&&(r[n]=s.slice(0).reduce((i,a)=>i.concat([`${n}=${Eo(a)}`]),[]).sort().join("&"))}return t.sort().map(o=>r[o]).filter(o=>o).join("&")}});var lR,FL,pR=d(()=>{lR=e=>FL(e).toISOString().replace(/\.\d{3}Z$/,"Z"),FL=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e});var jd,uR=d(()=>{xs();ft();gd();He();dR();pR();jd=class{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:t,credentials:r,region:o,service:n,sha256:s,uriEscapePath:i=!0}){this.service=n,this.sha256=s,this.uriEscapePath=i,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=Ee(o),this.credentialProvider=Ee(r)}createCanonicalRequest(t,r,o){let n=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${cR(t)}
${n.map(s=>`${s}:${r[s]}`).join(`
`)}

${n.join(";")}
${o}`}async createStringToSign(t,r,o,n){let s=new this.sha256;s.update(so(o));let i=await s.digest();return`${n}
${t}
${r}
${Nt(i)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let s of t.split("/"))s?.length!==0&&s!=="."&&(s===".."?r.pop():r.push(s));let o=`${t?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t?.endsWith("/")?"/":""}`;return Eo(o).replace(/%2F/g,"/")}return t}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(t){let r=lR(t).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(t){return Object.keys(t).sort().join(";")}}});var Ia,fR=d(()=>{xs();He();bn();Om();Qw();Zw();rR();nR();iR();aR();uR();Ia=class extends jd{headerFormatter=new Gd;constructor({applyChecksum:t,credentials:r,region:o,service:n,sha256:s,uriEscapePath:i=!0}){super({applyChecksum:t,credentials:r,region:o,service:n,sha256:s,uriEscapePath:i})}async presign(t,r={}){let{signingDate:o=new Date,expiresIn:n=3600,unsignableHeaders:s,unhoistableHeaders:i,signableHeaders:a,hoistableHeaders:c,signingRegion:l,signingService:p}=r,u=await this.credentialProvider();this.validateResolvedCredentials(u);let f=l??await this.regionProvider(),{longDate:m,shortDate:x}=this.formatDate(o);if(n>Jw)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let E=Hd(x,f,p??this.service),T=sR(Mm(t),{unhoistableHeaders:i,hoistableHeaders:c});u.sessionToken&&(T.query[Cm]=u.sessionToken),T.query[Mw]=Fd,T.query[Lw]=`${u.accessKeyId}/${E}`,T.query[Tm]=m,T.query[Fw]=n.toString(10);let A=km(T,s,a);return T.query[Uw]=this.getCanonicalHeaderList(A),T.query[vm]=await this.getSignature(m,E,this.getSigningKey(u,f,x,p),this.createCanonicalRequest(T,A,await Vd(t,this.sha256))),T}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:o=new Date,priorSignature:n,signingRegion:s,signingService:i}){let a=s??await this.regionProvider(),{shortDate:c,longDate:l}=this.formatDate(o),p=Hd(c,a,i??this.service),u=await Vd({headers:{},body:r},this.sha256),f=new this.sha256;f.update(t);let m=Nt(await f.digest()),x=[zw,l,p,n,m,u].join(`
`);return this.signString(x,{signingDate:o,signingRegion:a,signingService:i})}async signMessage(t,{signingDate:r=new Date,signingRegion:o,signingService:n}){return this.signEvent({headers:this.headerFormatter.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:o,signingService:n,priorSignature:t.priorSignature}).then(i=>({message:t.message,signature:i}))}async signString(t,{signingDate:r=new Date,signingRegion:o,signingService:n}={}){let s=await this.credentialProvider();this.validateResolvedCredentials(s);let i=o??await this.regionProvider(),{shortDate:a}=this.formatDate(r),c=new this.sha256(await this.getSigningKey(s,i,a,n));return c.update(so(t)),Nt(await c.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:o,unsignableHeaders:n,signingRegion:s,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let c=s??await this.regionProvider(),l=Mm(t),{longDate:p,shortDate:u}=this.formatDate(r),f=Hd(u,c,i??this.service);l.headers[Pm]=p,a.sessionToken&&(l.headers[Vw]=a.sessionToken);let m=await Vd(l,this.sha256);!oR(Ra,l.headers)&&this.applyChecksum&&(l.headers[Ra]=m);let x=km(l,n,o),E=await this.getSignature(p,f,this.getSigningKey(a,c,u,i),this.createCanonicalRequest(l,x,m));return l.headers[Am]=`${Fd} Credential=${a.accessKeyId}/${f}, SignedHeaders=${this.getCanonicalHeaderList(x)}, Signature=${E}`,l}async getSignature(t,r,o,n){let s=await this.createStringToSign(t,r,n,Fd),i=new this.sha256(await o);return i.update(so(s)),Nt(await i.digest())}getSigningKey(t,r,o,n){return Xw(this.sha256,t,o,r,n||this.service)}}});var mR=d(()=>{});var hR=d(()=>{fR();bn();Om();mR()});function BL(e,{credentials:t,credentialDefaultProvider:r}){let o;return t?t?.memoized?o=t:o=z_(t,W_,dm):r?o=ms(r(Object.assign({},e,{parentClientConfig:e}))):o=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},o.memoized=!0,o}function HL(e,t){if(t.configBound)return t;let r=async o=>t({...o,callerClientConfig:e});return r.memoized=t.memoized,r.configBound=!0,r}var Ir,gR=d(()=>{it();Qe();hR();Ir=e=>{let t=e.credentials,r=!!e.credentials,o;Object.defineProperty(e,"credentials",{set(l){l&&l!==t&&l!==o&&(r=!0),t=l;let p=BL(e,{credentials:t,credentialDefaultProvider:e.credentialDefaultProvider}),u=HL(e,p);r&&!u.attributed?(o=async f=>u(f).then(m=>oe(m,"CREDENTIALS_CODE","e")),o.memoized=u.memoized,o.configBound=u.configBound,o.attributed=!0):o=u},get(){return o},enumerable:!0,configurable:!0}),e.credentials=t;let{signingEscapePath:n=!0,systemClockOffset:s=e.systemClockOffset||0,sha256:i}=e,a;return e.signer?a=ms(e.signer):e.regionInfoProvider?a=()=>ms(e.region)().then(async l=>[await e.regionInfoProvider(l,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},l]).then(([l,p])=>{let{signingRegion:u,signingService:f}=l;e.signingRegion=e.signingRegion||u||p,e.signingName=e.signingName||f||e.serviceId;let m={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:n},x=e.signerConstructor||Ia;return new x(m)}):a=async l=>{l=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await ms(e.region)(),properties:{}},l);let p=l.signingRegion,u=l.signingName;e.signingRegion=e.signingRegion||p,e.signingName=e.signingName||u||e.serviceId;let f={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:n},m=e.signerConstructor||Ia;return new m(f)},Object.assign(e,{systemClockOffset:s,signingEscapePath:n,signer:a})}});var xR=d(()=>{ww();Cw();$w();gR()});var yR=d(()=>{xR();Im()});var _s,wn,Ei,SR,ER,_R=d(()=>{_s=(e,t)=>{let r=[];if(e&&r.push(e),t)for(let o of t)r.push(o);return r},wn=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,Ei=()=>{let e=[],t=[],r=!1,o=new Set,n=u=>u.sort((f,m)=>SR[m.step]-SR[f.step]||ER[m.priority||"normal"]-ER[f.priority||"normal"]),s=u=>{let f=!1,m=x=>{let E=_s(x.name,x.aliases);if(E.includes(u)){f=!0;for(let T of E)o.delete(T);return!1}return!0};return e=e.filter(m),t=t.filter(m),f},i=u=>{let f=!1,m=x=>{if(x.middleware===u){f=!0;for(let E of _s(x.name,x.aliases))o.delete(E);return!1}return!0};return e=e.filter(m),t=t.filter(m),f},a=u=>(e.forEach(f=>{u.add(f.middleware,{...f})}),t.forEach(f=>{u.addRelativeTo(f.middleware,{...f})}),u.identifyOnResolve?.(p.identifyOnResolve()),u),c=u=>{let f=[];return u.before.forEach(m=>{m.before.length===0&&m.after.length===0?f.push(m):f.push(...c(m))}),f.push(u),u.after.reverse().forEach(m=>{m.before.length===0&&m.after.length===0?f.push(m):f.push(...c(m))}),f},l=(u=!1)=>{let f=[],m=[],x={};return e.forEach(T=>{let A={...T,before:[],after:[]};for(let O of _s(A.name,A.aliases))x[O]=A;f.push(A)}),t.forEach(T=>{let A={...T,before:[],after:[]};for(let O of _s(A.name,A.aliases))x[O]=A;m.push(A)}),m.forEach(T=>{if(T.toMiddleware){let A=x[T.toMiddleware];if(A===void 0){if(u)return;throw new Error(`${T.toMiddleware} is not found when adding ${wn(T.name,T.aliases)} middleware ${T.relation} ${T.toMiddleware}`)}T.relation==="after"&&A.after.push(T),T.relation==="before"&&A.before.push(T)}}),n(f).map(c).reduce((T,A)=>(T.push(...A),T),[])},p={add:(u,f={})=>{let{name:m,override:x,aliases:E}=f,T={step:"initialize",priority:"normal",middleware:u,...f},A=_s(m,E);if(A.length>0){if(A.some(O=>o.has(O))){if(!x)throw new Error(`Duplicate middleware name '${wn(m,E)}'`);for(let O of A){let ie=e.findIndex(ve=>ve.name===O||ve.aliases?.some(qe=>qe===O));if(ie===-1)continue;let ae=e[ie];if(ae.step!==T.step||T.priority!==ae.priority)throw new Error(`"${wn(ae.name,ae.aliases)}" middleware with ${ae.priority} priority in ${ae.step} step cannot be overridden by "${wn(m,E)}" middleware with ${T.priority} priority in ${T.step} step.`);e.splice(ie,1)}}for(let O of A)o.add(O)}e.push(T)},addRelativeTo:(u,f)=>{let{name:m,override:x,aliases:E}=f,T={middleware:u,...f},A=_s(m,E);if(A.length>0){if(A.some(O=>o.has(O))){if(!x)throw new Error(`Duplicate middleware name '${wn(m,E)}'`);for(let O of A){let ie=t.findIndex(ve=>ve.name===O||ve.aliases?.some(qe=>qe===O));if(ie===-1)continue;let ae=t[ie];if(ae.toMiddleware!==T.toMiddleware||ae.relation!==T.relation)throw new Error(`"${wn(ae.name,ae.aliases)}" middleware ${ae.relation} "${ae.toMiddleware}" middleware cannot be overridden by "${wn(m,E)}" middleware ${T.relation} "${T.toMiddleware}" middleware.`);t.splice(ie,1)}}for(let O of A)o.add(O)}t.push(T)},clone:()=>a(Ei()),use:u=>{u.applyToStack(p)},remove:u=>typeof u=="string"?s(u):i(u),removeByTag:u=>{let f=!1,m=x=>{let{tags:E,name:T,aliases:A}=x;if(E&&E.includes(u)){let O=_s(T,A);for(let ie of O)o.delete(ie);return f=!0,!1}return!0};return e=e.filter(m),t=t.filter(m),f},concat:u=>{let f=a(Ei());return f.use(u),f.identifyOnResolve(r||f.identifyOnResolve()||(u.identifyOnResolve?.()??!1)),f},applyToStack:a,identify:()=>l(!0).map(u=>{let f=u.step??u.relation+" "+u.toMiddleware;return wn(u.name,u.aliases)+" - "+f}),identifyOnResolve(u){return typeof u=="boolean"&&(r=u),r},resolve:(u,f)=>{for(let m of l().map(x=>x.middleware).reverse())u=m(u,f);return r&&console.log(p.identify()),u}};return p},SR={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},ER={high:3,normal:2,low:1}});var Lm=d(()=>{_R()});var Ze,bR=d(()=>{Lm();Ze=class{config;middlewareStack=Ei();initConfig;handlers;constructor(t){this.config=t;let{protocol:r,protocolSettings:o}=t;o&&typeof r=="function"&&(t.protocol=new r(o))}send(t,r,o){let n=typeof r!="function"?r:void 0,s=typeof r=="function"?r:o,i=n===void 0&&this.config.cacheMiddleware===!0,a;if(i){this.handlers||(this.handlers=new WeakMap);let c=this.handlers;c.has(t.constructor)?a=c.get(t.constructor):(a=t.resolveMiddleware(this.middlewareStack,this.config,n),c.set(t.constructor,a))}else delete this.handlers,a=t.resolveMiddleware(this.middlewareStack,this.config,n);if(s)a(t).then(c=>s(null,c.output),c=>s(c)).catch(()=>{});else return a(t).then(c=>c.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}});var wR=d(()=>{Qo()});function Wd(e,t){if(t==null)return t;let r=j.of(e);if(r.getMergedTraits().sensitive)return Um;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return Um}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return Um}else if(r.isStructSchema()&&typeof t=="object"){let o=t,n={};for(let[s,i]of r.structIterator())o[s]!=null&&(n[s]=Wd(i,o[s]));return n}return t}var Um,RR=d(()=>{ye();Um="***SensitiveInformation***"});var Y,Fm,IR=d(()=>{Lm();Sn();RR();Y=class{middlewareStack=Ei();schema;static classBuilder(){return new Fm}resolveMiddlewareWithContext(t,r,o,{middlewareFn:n,clientName:s,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:l,additionalContext:p,CommandCtor:u}){for(let T of n.bind(this)(u,t,r,o))this.middlewareStack.use(T);let f=t.concat(this.middlewareStack),{logger:m}=r,x={logger:m,clientName:s,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[fa]:{commandInstance:this,...l},...p},{requestHandler:E}=r;return f.resolve(T=>E.handle(T.request,o||{}),x)}},Fm=class{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,o={}){return this._smithyContext={service:t,operation:r,...o},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=o=>o,r=o=>o){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}sc(t){return this._operationSchema=t,this._smithyContext.operationSchema=t,this}build(){let t=this,r;return r=class extends Y{input;static getEndpointParameterInstructions(){return t._ep}constructor(...[o]){super(),this.input=o??{},t._init(this),this.schema=t._operationSchema}resolveMiddleware(o,n,s){let i=t._operationSchema,a=i?.[4]??i?.input,c=i?.[5]??i?.output;return this.resolveMiddlewareWithContext(o,n,s,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog??(i?Wd.bind(null,a):l=>l),outputFilterSensitiveLog:t._outputFilterSensitiveLog??(i?Wd.bind(null,c):l=>l),smithyContext:t._smithyContext,additionalContext:t._additionalContext})}serialize=t._serializer;deserialize=t._deserializer}}}});var TR=d(()=>{});var Rn,vR=d(()=>{Rn=(e,t)=>{for(let r of Object.keys(e)){let o=e[r],n=async function(i,a,c){let l=new o(i);if(typeof a=="function")this.send(l,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(l,a||{},c)}else return this.send(l,a)},s=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[s]=n}}});var Lt,Bm,CR=d(()=>{Lt=class e extends Error{$fault;$response;$retryable;$metadata;constructor(t){super(t.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}static isInstance(t){if(!t)return!1;let r=t;return e.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](t){if(!t)return!1;let r=t;return this===e?e.isInstance(t):e.isInstance(t)?r.name&&this.name?this.prototype.isPrototypeOf(t)||r.name===this.name:this.prototype.isPrototypeOf(t):!1}},Bm=(e,t={})=>{Object.entries(t).filter(([,o])=>o!==void 0).forEach(([o,n])=>{(e[o]==null||e[o]==="")&&(e[o]=n)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e}});var AR=d(()=>{});var Tr,PR=d(()=>{Tr=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}}});var DR,vr,NR=d(()=>{DR=!1,vr=e=>{e&&!DR&&parseInt(e.substring(1,e.indexOf(".")))<16&&(DR=!0)}});var OR=d(()=>{});var kR,$R,MR=d(()=>{Sn();kR=e=>{let t=[];for(let r in ai){let o=ai[r];e[o]!==void 0&&t.push({algorithmId:()=>o,checksumConstructor:()=>e[o]})}return{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},$R=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t}});var LR,UR,FR=d(()=>{LR=e=>({setRetryStrategy(t){e.retryStrategy=t},retryStrategy(){return e.retryStrategy}}),UR=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t}});var Cr,Ar,BR=d(()=>{MR();FR();Cr=e=>Object.assign(kR(e),LR(e)),Ar=e=>Object.assign($R(e),UR(e))});var HR=d(()=>{BR()});var VR=d(()=>{});var Hm,GR=d(()=>{Hm=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=Hm(e[r]));return e}});var jR=d(()=>{});var xt,WR=d(()=>{xt=class{trace(){}debug(){}info(){}warn(){}error(){}}});var zR=d(()=>{});var KR=d(()=>{});var qR=d(()=>{});var Ta,JR=d(()=>{Ta=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(Ta);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=Ta(e[r]));return t}return e}});var F=d(()=>{bR();wR();IR();TR();vR();AR();PR();NR();CR();OR();HR();VR();GR();jR();WR();zR();KR();qR();JR();bo()});var In,zd=d(()=>{ye();F();In=class{queryCompat;constructor(t=!1){this.queryCompat=t}resolveRestContentType(t,r){let o=r.getMemberSchemas(),n=Object.values(o).find(s=>!!s.getMergedTraits().httpPayload);if(n){let s=n.getMergedTraits().mediaType;return s||(n.isStringSchema()?"text/plain":n.isBlobSchema()?"application/octet-stream":t)}else if(!r.isUnitSchema()&&Object.values(o).find(i=>{let{httpQuery:a,httpQueryParams:c,httpHeader:l,httpLabel:p,httpPrefixHeaders:u}=i.getMergedTraits();return!a&&!c&&!l&&!p&&u===void 0}))return t}async getErrorSchemaOrThrowBaseException(t,r,o,n,s,i){let a=r,c=t;t.includes("#")&&([a,c]=t.split("#"));let l={$metadata:s,$fault:o.statusCode<500?"client":"server"},p=w.for(a);try{return{errorSchema:i?.(p,c)??p.getSchema(t),errorMetadata:l}}catch{n.message=n.message??n.Message??"UnknownError";let f=w.for("smithy.ts.sdk.synthetic."+a),m=f.getBaseException();if(m){let x=f.getErrorCtor(m)??Error;throw this.decorateServiceException(Object.assign(new x({name:c}),l),n)}throw this.decorateServiceException(Object.assign(new Error(c),l),n)}}decorateServiceException(t,r={}){if(this.queryCompat){let o=t.Message??r.Message,n=Bm(t,r);o&&(n.message=o),n.Error={...n.Error,Type:n.Error.Type,Code:n.Error.Code,Message:n.Error.message??n.Error.Message??o};let s=n.$metadata.requestId;return s&&(n.RequestId=s),n}return Bm(t,r)}setQueryCompatError(t,r){let o=r.headers?.["x-amzn-query-error"];if(t!==void 0&&o!=null){let[n,s]=o.split(";"),i=Object.entries(t),a={Code:n,Type:s};Object.assign(t,a);for(let[c,l]of i)a[c==="message"?"Message":c]=l;delete a.__type,t.Error=a}}queryCompatOutput(t,r){t.Error&&(r.Error=t.Error),t.Type&&(r.Type=t.Type),t.Code&&(r.Code=t.Code)}findQueryCompatibleError(t,r){try{return t.getSchema(r)}catch{return t.find(n=>j.of(n).getMergedTraits().awsQueryError?.[0]===r)}}}});var YR=d(()=>{});var XR=d(()=>{});var Pr,_i=d(()=>{Pr=class{serdeContext;setSerdeContext(t){this.serdeContext=t}}});function*Kd(e,t){if(e.isUnitSchema())return;let r=e.getSchema();for(let o=0;o<r[4].length;++o){let n=r[4][o],s=r[5][o],i=new j([s,0],n);!(n in t)&&!i.isIdempotencyToken()||(yield[n,i])}}function*QR(e,t,r){if(e.isUnitSchema())return;let o=e.getSchema(),n=Object.keys(t).filter(s=>s!=="__type").length;for(let s=0;s<o[4].length&&n!==0;++s){let i=o[4][s],a=o[5][s],c=new j([a,0],i),l=i;r&&(l=c.getMergedTraits()[r]??i),l in t&&(yield[i,c],n-=1)}}var qd=d(()=>{ye()});var bi,Vm=d(()=>{bi=class{from;to;keys;constructor(t,r){this.from=t,this.to=r,this.keys=new Set(Object.keys(this.from).filter(o=>o!=="__type"))}mark(t){this.keys.delete(t)}hasUnknown(){return this.keys.size===1&&Object.keys(this.to).length===0}writeUnknown(){if(this.hasUnknown()){let t=this.keys.values().next().value,r=this.from[t];this.to.$unknown=[t,r]}}}});function ZR(e,t,r){if(r?.source){let o=r.source;if(typeof t=="number"&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER||o!==String(t)))return o.includes(".")?new tt(o,"bigDecimal"):BigInt(o)}return t}var eI=d(()=>{bo()});var tI,rI=d(()=>{F();He();tI=(e,t)=>Ot(e,t).then(r=>(t?.utf8Encoder??De)(r))});var oI,Jd,va=d(()=>{rI();oI=(e,t)=>tI(e,t).then(r=>{if(r.length)try{return JSON.parse(r)}catch(o){throw o?.name==="SyntaxError"&&Object.defineProperty(o,"$responseBodyText",{value:r}),o}return{}}),Jd=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),o=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},n=r(e.headers,"x-amzn-errortype");if(n!==void 0)return o(e.headers[n]);if(t&&typeof t=="object"){let s=r(t,"code");if(s&&t[s]!==void 0)return o(t[s]);if(t.__type!==void 0)return o(t.__type)}}});var wi,Gm=d(()=>{Qo();ye();bo();mt();_i();qd();Vm();eI();va();wi=class extends Pr{settings;constructor(t){super(),this.settings=t}async read(t,r){return this._read(t,typeof r=="string"?JSON.parse(r,ZR):await oI(r,this.serdeContext))}readObject(t,r){return this._read(t,r)}_read(t,r){let o=r!==null&&typeof r=="object",n=j.of(t);if(o){if(n.isStructSchema()){let i=n.isUnionSchema(),a={},c;i&&(c=new bi(r,a));for(let[l,p]of QR(n,r,this.settings.jsonName?"jsonName":!1)){let u=this.settings.jsonName?p.getMergedTraits().jsonName??l:l;i&&c.mark(u),r[u]!=null&&(a[l]=this._read(p,r[u]))}return i&&c.writeUnknown(),a}if(Array.isArray(r)&&n.isListSchema()){let i=n.getValueSchema(),a=[],c=!!n.getMergedTraits().sparse;for(let l of r)(c||l!=null)&&a.push(this._read(i,l));return a}if(n.isMapSchema()){let i=n.getValueSchema(),a={},c=!!n.getMergedTraits().sparse;for(let[l,p]of Object.entries(r))(c||p!=null)&&(a[l]=this._read(i,p));return a}}if(n.isBlobSchema()&&typeof r=="string")return Le(r);let s=n.getMergedTraits().mediaType;if(n.isStringSchema()&&typeof r=="string"&&s)return s==="application/json"||s.endsWith("+json")?kt.from(r):r;if(n.isTimestampSchema()&&r!=null)switch(Ro(n,this.settings)){case 5:return i_(r);case 6:return a_(r);case 7:return c_(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(n.isBigIntegerSchema()&&(typeof r=="number"||typeof r=="string"))return BigInt(r);if(n.isBigDecimalSchema()&&r!=null){if(r instanceof tt)return r;let i=r;return i.type==="bigDecimal"&&"string"in i?new tt(i.string,i.type):new tt(String(r),"bigDecimal")}if(n.isNumericSchema()&&typeof r=="string"){switch(r){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}return r}if(n.isDocumentSchema())if(o){let i=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof tt?i[a]=c:i[a]=this._read(n,c);return i}else return structuredClone(r);return r}}});var nI,Yd,sI=d(()=>{bo();nI="\u039D",Yd=class{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(t,r)=>{if(r instanceof tt){let o=`${nI+"nv"+this.counter++}_`+r.string;return this.values.set(`"${o}"`,r.string),o}if(typeof r=="bigint"){let o=r.toString(),n=`${nI+"b"+this.counter++}_`+o;return this.values.set(`"${n}"`,o),n}return r}}replaceInJson(t){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return t;for(let[r,o]of this.values)t=t.replace(r,o);return t}}});var Ri,jm=d(()=>{Qo();ye();bo();mt();_i();qd();sI();Ri=class extends Pr{settings;buffer;useReplacer=!1;rootSchema;constructor(t){super(),this.settings=t}write(t,r){this.rootSchema=j.of(t),this.buffer=this._write(this.rootSchema,r)}writeDiscriminatedDocument(t,r){this.write(t,r),typeof this.buffer=="object"&&(this.buffer.__type=j.of(t).getName(!0))}flush(){let{rootSchema:t,useReplacer:r}=this;if(this.rootSchema=void 0,this.useReplacer=!1,t?.isStructSchema()||t?.isDocumentSchema()){if(!r)return JSON.stringify(this.buffer);let o=new Yd;return o.replaceInJson(JSON.stringify(this.buffer,o.createReplacer(),0))}return this.buffer}_write(t,r,o){let n=r!==null&&typeof r=="object",s=j.of(t);if(n){if(s.isStructSchema()){let i={};for(let[a,c]of Kd(s,r)){let l=this._write(c,r[a],s);if(l!==void 0){let p=c.getMergedTraits().jsonName,u=this.settings.jsonName?p??a:a;i[u]=l}}if(s.isUnionSchema()&&Object.keys(i).length===0){let{$unknown:a}=r;if(Array.isArray(a)){let[c,l]=a;i[c]=this._write(15,l)}}return i}if(Array.isArray(r)&&s.isListSchema()){let i=s.getValueSchema(),a=[],c=!!s.getMergedTraits().sparse;for(let l of r)(c||l!=null)&&a.push(this._write(i,l));return a}if(s.isMapSchema()){let i=s.getValueSchema(),a={},c=!!s.getMergedTraits().sparse;for(let[l,p]of Object.entries(r))(c||p!=null)&&(a[l]=this._write(i,p));return a}if(r instanceof Uint8Array&&(s.isBlobSchema()||s.isDocumentSchema()))return s===this.rootSchema?r:(this.serdeContext?.base64Encoder??Ne)(r);if(r instanceof Date&&(s.isTimestampSchema()||s.isDocumentSchema()))switch(Ro(s,this.settings)){case 5:return r.toISOString().replace(".000Z","Z");case 6:return fi(r);case 7:return r.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",r),r.getTime()/1e3}r instanceof tt&&(this.useReplacer=!0)}if(!(r===null&&o?.isStructSchema())){if(s.isStringSchema()){if(typeof r>"u"&&s.isIdempotencyToken())return Yo();let i=s.getMergedTraits().mediaType;return r!=null&&i&&(i==="application/json"||i.endsWith("+json"))?kt.from(r):r}if(typeof r=="number"&&s.isNumericSchema())return Math.abs(r)===1/0||isNaN(r)?String(r):r;if(typeof r=="string"&&s.isBlobSchema())return s===this.rootSchema?r:(this.serdeContext?.base64Encoder??Ne)(r);if(typeof r=="bigint"&&(this.useReplacer=!0),s.isDocumentSchema())if(n){let i=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof tt?(this.useReplacer=!0,i[a]=c):i[a]=this._write(s,c);return i}else return structuredClone(r);return r}}}});var Tn,Xd=d(()=>{_i();Gm();jm();Tn=class extends Pr{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new Ri(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new wi(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var Qd,Wm=d(()=>{Qo();ye();zd();Xd();va();Qd=class extends gi{serializer;deserializer;serviceTarget;codec;mixin;awsQueryCompatible;constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:o,jsonCodec:n}){super({defaultNamespace:t}),this.serviceTarget=r,this.codec=n??new Tn({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!o,this.mixin=new In(this.awsQueryCompatible)}async serializeRequest(t,r,o){let n=await super.serializeRequest(t,r,o);return n.path.endsWith("/")||(n.path+="/"),Object.assign(n.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${t.name}`}),this.awsQueryCompatible&&(n.headers["x-amzn-query-mode"]="true"),(En(t.input)==="unit"||!n.body)&&(n.body="{}"),n}getPayloadCodec(){return this.codec}async handleError(t,r,o,n,s){this.awsQueryCompatible&&this.mixin.setQueryCompatError(n,o);let i=Jd(o,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,o,n,s,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),l=j.of(a),p=n.message??n.Message??"Unknown",u=w.for(a[1]).getErrorCtor(a)??Error,f=new u(p),m={};for(let[x,E]of l.structIterator())n[x]!=null&&(m[x]=this.codec.createDeserializer().readObject(E,n[x]));throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(n,m),this.mixin.decorateServiceException(Object.assign(f,c,{$fault:l.getMergedTraits().error,message:p},m),n)}}});var Zd,iI=d(()=>{Wm();Zd=class extends Qd{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:o,jsonCodec:n}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:o,jsonCodec:n})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}});var aI=d(()=>{});var vn,cI=d(()=>{Qo();ye();zd();Xd();va();vn=class extends vd{serializer;deserializer;codec;mixin=new In;constructor({defaultNamespace:t}){super({defaultNamespace:t});let r={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new Tn(r),this.serializer=new Dd(this.codec.createSerializer(),r),this.deserializer=new Ad(this.codec.createDeserializer(),r)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(t){this.codec.setSerdeContext(t),super.setSerdeContext(t)}async serializeRequest(t,r,o){let n=await super.serializeRequest(t,r,o),s=j.of(t.input);if(!n.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),s);i&&(n.headers["content-type"]=i)}return n.body==null&&n.headers["content-type"]===this.getDefaultContentType()&&(n.body="{}"),n}async deserializeResponse(t,r,o){let n=await super.deserializeResponse(t,r,o),s=j.of(t.output);for(let[i,a]of s.structIterator())a.getMemberTraits().httpPayload&&!(i in n)&&(n[i]=null);return n}async handleError(t,r,o,n,s){let i=Jd(o,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,o,n,s),l=j.of(a),p=n.message??n.Message??"Unknown",u=w.for(a[1]).getErrorCtor(a)??Error,f=new u(p);await this.deserializeHttpMessage(a,r,o,n);let m={};for(let[x,E]of l.structIterator()){let T=E.getMergedTraits().jsonName??x;m[x]=this.codec.createDeserializer().readObject(E,n[T])}throw this.mixin.decorateServiceException(Object.assign(f,c,{$fault:l.getMergedTraits().error,message:p},m),n)}getDefaultContentType(){return"application/json"}}});var dI=d(()=>{});var lI=d(()=>{});var pI=d(()=>{});function el(e,t){let r=[],o=t.exec(e);for(;o;){let n=[];n.startIndex=t.lastIndex-o[0].length;let s=o.length;for(let i=0;i<s;i++)n.push(o[i]);r.push(n),o=t.exec(e)}return r}function fI(e){return typeof e<"u"}var uI,VL,GL,jL,Ca,tl=d(()=>{"use strict";uI=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",VL=uI+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",GL="["+uI+"]["+VL+"]*",jL=new RegExp("^"+GL+"$");Ca=function(e){let t=jL.exec(e);return!(t===null||typeof t>"u")}});function yI(e,t){t=Object.assign({},WL,t);let r=[],o=!1,n=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let s=0;s<e.length;s++)if(e[s]==="<"&&e[s+1]==="?"){if(s+=2,s=hI(e,s),s.err)return s}else if(e[s]==="<"){let i=s;if(s++,e[s]==="!"){s=gI(e,s);continue}else{let a=!1;e[s]==="/"&&(a=!0,s++);let c="";for(;s<e.length&&e[s]!==">"&&e[s]!==" "&&e[s]!=="	"&&e[s]!==`
`&&e[s]!=="\r";s++)c+=e[s];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),s--),!ZL(c)){let u;return c.trim().length===0?u="Invalid space after '<'.":u="Tag '"+c+"' is an invalid name.",Ge("InvalidTag",u,It(e,s))}let l=qL(e,s);if(l===!1)return Ge("InvalidAttr","Attributes for '"+c+"' have open quote.",It(e,s));let p=l.value;if(s=l.index,p[p.length-1]==="/"){let u=s-p.length;p=p.substring(0,p.length-1);let f=xI(p,t);if(f===!0)o=!0;else return Ge(f.err.code,f.err.msg,It(e,u+f.err.line))}else if(a)if(l.tagClosed){if(p.trim().length>0)return Ge("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",It(e,i));if(r.length===0)return Ge("InvalidTag","Closing tag '"+c+"' has not been opened.",It(e,i));{let u=r.pop();if(c!==u.tagName){let f=It(e,u.tagStartPos);return Ge("InvalidTag","Expected closing tag '"+u.tagName+"' (opened in line "+f.line+", col "+f.col+") instead of closing tag '"+c+"'.",It(e,i))}r.length==0&&(n=!0)}}else return Ge("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",It(e,s));else{let u=xI(p,t);if(u!==!0)return Ge(u.err.code,u.err.msg,It(e,s-p.length+u.err.line));if(n===!0)return Ge("InvalidXml","Multiple possible root nodes found.",It(e,s));t.unpairedTags.indexOf(c)!==-1||r.push({tagName:c,tagStartPos:i}),o=!0}for(s++;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="!"){s++,s=gI(e,s);continue}else if(e[s+1]==="?"){if(s=hI(e,++s),s.err)return s}else break;else if(e[s]==="&"){let u=XL(e,s);if(u==-1)return Ge("InvalidChar","char '&' is not expected.",It(e,s));s=u}else if(n===!0&&!mI(e[s]))return Ge("InvalidXml","Extra text at the end",It(e,s));e[s]==="<"&&s--}}else{if(mI(e[s]))continue;return Ge("InvalidChar","char '"+e[s]+"' is not expected.",It(e,s))}if(o){if(r.length==1)return Ge("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",It(e,r[0].tagStartPos));if(r.length>0)return Ge("InvalidXml","Invalid '"+JSON.stringify(r.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Ge("InvalidXml","Start tag expected.",1);return!0}function mI(e){return e===" "||e==="	"||e===`
`||e==="\r"}function hI(e,t){let r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let o=e.substr(r,t-r);if(t>5&&o==="xml")return Ge("InvalidXml","XML declaration allowed only at the start of the document.",It(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function gI(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}function qL(e,t){let r="",o="",n=!1;for(;t<e.length;t++){if(e[t]===zL||e[t]===KL)o===""?o=e[t]:o!==e[t]||(o="");else if(e[t]===">"&&o===""){n=!0;break}r+=e[t]}return o!==""?!1:{value:r,index:t,tagClosed:n}}function xI(e,t){let r=el(e,JL),o={};for(let n=0;n<r.length;n++){if(r[n][1].length===0)return Ge("InvalidAttr","Attribute '"+r[n][2]+"' has no space in starting.",Aa(r[n]));if(r[n][3]!==void 0&&r[n][4]===void 0)return Ge("InvalidAttr","Attribute '"+r[n][2]+"' is without value.",Aa(r[n]));if(r[n][3]===void 0&&!t.allowBooleanAttributes)return Ge("InvalidAttr","boolean attribute '"+r[n][2]+"' is not allowed.",Aa(r[n]));let s=r[n][2];if(!QL(s))return Ge("InvalidAttr","Attribute '"+s+"' is an invalid name.",Aa(r[n]));if(!o.hasOwnProperty(s))o[s]=1;else return Ge("InvalidAttr","Attribute '"+s+"' is repeated.",Aa(r[n]))}return!0}function YL(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function XL(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,YL(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function Ge(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function QL(e){return Ca(e)}function ZL(e){return Ca(e)}function It(e,t){let r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function Aa(e){return e.startIndex+e[1].length}var WL,zL,KL,JL,SI=d(()=>{"use strict";tl();WL={allowBooleanAttributes:!1,unpairedTags:[]};zL='"',KL="'";JL=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g")});var e2,EI,_I=d(()=>{e2={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e},captureMetaData:!1},EI=function(e){return Object.assign({},e2,e)}});var rl,Yt,ol=d(()=>{"use strict";typeof Symbol!="function"?rl="@@xmlMetadata":rl=Symbol("XML Node Metadata");Yt=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t,r){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child}),r!==void 0&&(this.child[this.child.length-1][rl]={startIndex:r})}static getMetaDataSymbol(){return rl}}});function zm(e,t){let r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let o=1,n=!1,s=!1,i="";for(;t<e.length;t++)if(e[t]==="<"&&!s){if(n&&bs(e,"!ENTITY",t)){t+=7;let a,c;[a,c,t]=t2(e,t+1),c.indexOf("&")===-1&&(r[a]={regx:RegExp(`&${a};`,"g"),val:c})}else if(n&&bs(e,"!ELEMENT",t)){t+=8;let{index:a}=o2(e,t+1);t=a}else if(n&&bs(e,"!ATTLIST",t))t+=8;else if(n&&bs(e,"!NOTATION",t)){t+=9;let{index:a}=r2(e,t+1);t=a}else if(bs(e,"!--",t))s=!0;else throw new Error("Invalid DOCTYPE");o++,i=""}else if(e[t]===">"){if(s?e[t-1]==="-"&&e[t-2]==="-"&&(s=!1,o--):o--,o===0)break}else e[t]==="["?n=!0:i+=e[t];if(o!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}function t2(e,t){t=Cn(e,t);let r="";for(;t<e.length&&!/\s/.test(e[t])&&e[t]!=='"'&&e[t]!=="'";)r+=e[t],t++;if(Km(r),t=Cn(e,t),e.substring(t,t+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(e[t]==="%")throw new Error("Parameter entities are not supported");let o="";return[t,o]=nl(e,t,"entity"),t--,[r,o,t]}function r2(e,t){t=Cn(e,t);let r="";for(;t<e.length&&!/\s/.test(e[t]);)r+=e[t],t++;Km(r),t=Cn(e,t);let o=e.substring(t,t+6).toUpperCase();if(o!=="SYSTEM"&&o!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${o}"`);t+=o.length,t=Cn(e,t);let n=null,s=null;if(o==="PUBLIC")[t,n]=nl(e,t,"publicIdentifier"),t=Cn(e,t),(e[t]==='"'||e[t]==="'")&&([t,s]=nl(e,t,"systemIdentifier"));else if(o==="SYSTEM"&&([t,s]=nl(e,t,"systemIdentifier"),!s))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:r,publicIdentifier:n,systemIdentifier:s,index:--t}}function nl(e,t,r){let o="",n=e[t];if(n!=='"'&&n!=="'")throw new Error(`Expected quoted string, found "${n}"`);for(t++;t<e.length&&e[t]!==n;)o+=e[t],t++;if(e[t]!==n)throw new Error(`Unterminated ${r} value`);return t++,[t,o]}function o2(e,t){t=Cn(e,t);let r="";for(;t<e.length&&!/\s/.test(e[t]);)r+=e[t],t++;if(!Km(r))throw new Error(`Invalid element name: "${r}"`);t=Cn(e,t);let o="";if(e[t]==="E"&&bs(e,"MPTY",t))t+=4;else if(e[t]==="A"&&bs(e,"NY",t))t+=2;else if(e[t]==="("){for(t++;t<e.length&&e[t]!==")";)o+=e[t],t++;if(e[t]!==")")throw new Error("Unterminated content model")}else throw new Error(`Invalid Element Expression, found "${e[t]}"`);return{elementName:r,contentModel:o.trim(),index:t}}function bs(e,t,r){for(let o=0;o<t.length;o++)if(t[o]!==e[r+o+1])return!1;return!0}function Km(e){if(Ca(e))return e;throw new Error(`Invalid entity name ${e}`)}var Cn,bI=d(()=>{tl();Cn=(e,t)=>{for(;t<e.length&&/\s/.test(e[t]);)t++;return t}});function qm(e,t={}){if(t=Object.assign({},i2,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(e==="0")return 0;if(t.hex&&n2.test(r))return l2(r,16);if(r.includes("e")||r.includes("E"))return c2(e,r,t);{let o=s2.exec(r);if(o){let n=o[1]||"",s=o[2],i=d2(o[3]),a=n?e[s.length+1]===".":e[s.length]===".";if(!t.leadingZeros&&(s.length>1||s.length===1&&!a))return e;{let c=Number(r),l=String(c);if(c===0)return c;if(l.search(/[eE]/)!==-1)return t.eNotation?c:e;if(r.indexOf(".")!==-1)return l==="0"||l===i||l===`${n}${i}`?c:e;let p=s?i:r;return s?p===l||n+p===l?c:e:p===l||p===n+l?c:e}}else return e}}function c2(e,t,r){if(!r.eNotation)return e;let o=t.match(a2);if(o){let n=o[1]||"",s=o[3].indexOf("e")===-1?"E":"e",i=o[2],a=n?e[i.length+1]===s:e[i.length]===s;return i.length>1&&a?e:i.length===1&&(o[3].startsWith(`.${s}`)||o[3][0]===s)?Number(t):r.leadingZeros&&!a?(t=(o[1]||"")+o[3],Number(t)):e}else return e}function d2(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substring(0,e.length-1))),e}function l2(e,t){if(parseInt)return parseInt(e,t);if(Number.parseInt)return Number.parseInt(e,t);if(window&&window.parseInt)return window.parseInt(e,t);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}var n2,s2,i2,a2,wI=d(()=>{n2=/^[-+]?0x[a-fA-F0-9]+$/,s2=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,i2={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};a2=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/});function Jm(e){return typeof e=="function"?e:Array.isArray(e)?t=>{for(let r of e)if(typeof r=="string"&&t===r||r instanceof RegExp&&r.test(t))return!0}:()=>!1}var RI=d(()=>{});function p2(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let o=t[r];this.lastEntities[o]={regex:new RegExp("&"+o+";","g"),val:e[o]}}}function u2(e,t,r,o,n,s,i){if(e!==void 0&&(this.options.trimValues&&!o&&(e=e.trim()),e.length>0)){i||(e=this.replaceEntitiesValue(e));let a=this.options.tagValueProcessor(t,e,r,n,s);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?Xm(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?Xm(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function f2(e){if(this.options.removeNSPrefix){let t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}function h2(e,t,r){if(this.options.ignoreAttributes!==!0&&typeof e=="string"){let o=el(e,m2),n=o.length,s={};for(let i=0;i<n;i++){let a=this.resolveNameSpace(o[i][1]);if(this.ignoreAttributesFn(a,t))continue;let c=o[i][4],l=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(l=this.options.transformAttributeName(l)),l==="__proto__"&&(l="#__proto__"),c!==void 0){this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c);let p=this.options.attributeValueProcessor(a,c,t);p==null?s[l]=c:typeof p!=typeof c||p!==c?s[l]=p:s[l]=Xm(c,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[l]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){let i={};return i[this.options.attributesGroupName]=s,i}return s}}function x2(e,t,r,o){this.options.captureMetaData||(o=void 0);let n=this.options.updateTag(t.tagname,r,t[":@"]);n===!1||(typeof n=="string"&&(t.tagname=n),e.addChild(t,o))}function S2(e,t,r,o){return e&&(o===void 0&&(o=t.child.length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,o),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function E2(e,t,r){let o="*."+r;for(let n in e){let s=e[n];if(o===s||t===s)return!0}return!1}function _2(e,t,r=">"){let o,n="";for(let s=t;s<e.length;s++){let i=e[s];if(o)i===o&&(o="");else if(i==='"'||i==="'")o=i;else if(i===r[0])if(r[1]){if(e[s+1]===r[1])return{data:n,index:s}}else return{data:n,index:s};else i==="	"&&(i=" ");n+=i}}function ws(e,t,r,o){let n=e.indexOf(t,r);if(n===-1)throw new Error(o);return n+t.length-1}function Ym(e,t,r,o=">"){let n=_2(e,t+1,o);if(!n)return;let s=n.data,i=n.index,a=s.search(/\s/),c=s,l=!0;a!==-1&&(c=s.substring(0,a),s=s.substring(a+1).trimStart());let p=c;if(r){let u=c.indexOf(":");u!==-1&&(c=c.substr(u+1),l=c!==n.data.substr(u+1))}return{tagName:c,tagExp:s,closeIndex:i,attrExpPresent:l,rawTagName:p}}function b2(e,t,r){let o=r,n=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){let s=ws(e,">",r,`${t} is not closed`);if(e.substring(r+2,s).trim()===t&&(n--,n===0))return{tagContent:e.substring(o,r),i:s};r=s}else if(e[r+1]==="?")r=ws(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=ws(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=ws(e,"]]>",r,"StopNode is not closed.")-2;else{let s=Ym(e,r,">");s&&((s&&s.tagName)===t&&s.tagExp[s.tagExp.length-1]!=="/"&&n++,r=s.closeIndex)}}function Xm(e,t,r){if(t&&typeof e=="string"){let o=e.trim();return o==="true"?!0:o==="false"?!1:qm(e,r)}else return fI(e)?e:""}var Pa,m2,g2,y2,II=d(()=>{"use strict";tl();ol();bI();wI();RI();Pa=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(r,o)=>String.fromCodePoint(Number.parseInt(o,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(r,o)=>String.fromCodePoint(Number.parseInt(o,16))}},this.addExternalEntities=p2,this.parseXml=g2,this.parseTextData=u2,this.resolveNameSpace=f2,this.buildAttributesMap=h2,this.isItStopNode=E2,this.replaceEntitiesValue=y2,this.readStopNodeData=b2,this.saveTextToParentTag=S2,this.addChild=x2,this.ignoreAttributesFn=Jm(this.options.ignoreAttributes)}};m2=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");g2=function(e){e=e.replace(/\r\n?/g,`
`);let t=new Yt("!xml"),r=t,o="",n="";for(let s=0;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){let a=ws(e,">",s,"Closing Tag is not closed."),c=e.substring(s+2,a).trim();if(this.options.removeNSPrefix){let u=c.indexOf(":");u!==-1&&(c=c.substr(u+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&(o=this.saveTextToParentTag(o,r,n));let l=n.substring(n.lastIndexOf(".")+1);if(c&&this.options.unpairedTags.indexOf(c)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${c}>`);let p=0;l&&this.options.unpairedTags.indexOf(l)!==-1?(p=n.lastIndexOf(".",n.lastIndexOf(".")-1),this.tagsNodeStack.pop()):p=n.lastIndexOf("."),n=n.substring(0,p),r=this.tagsNodeStack.pop(),o="",s=a}else if(e[s+1]==="?"){let a=Ym(e,s,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(o=this.saveTextToParentTag(o,r,n),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){let c=new Yt(a.tagName);c.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(c[":@"]=this.buildAttributesMap(a.tagExp,n,a.tagName)),this.addChild(r,c,n,s)}s=a.closeIndex+1}else if(e.substr(s+1,3)==="!--"){let a=ws(e,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){let c=e.substring(s+4,a-2);o=this.saveTextToParentTag(o,r,n),r.add(this.options.commentPropName,[{[this.options.textNodeName]:c}])}s=a}else if(e.substr(s+1,2)==="!D"){let a=zm(e,s);this.docTypeEntities=a.entities,s=a.i}else if(e.substr(s+1,2)==="!["){let a=ws(e,"]]>",s,"CDATA is not closed.")-2,c=e.substring(s+9,a);o=this.saveTextToParentTag(o,r,n);let l=this.parseTextData(c,r.tagname,n,!0,!1,!0,!0);l==null&&(l=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[{[this.options.textNodeName]:c}]):r.add(this.options.textNodeName,l),s=a+2}else{let a=Ym(e,s,this.options.removeNSPrefix),c=a.tagName,l=a.rawTagName,p=a.tagExp,u=a.attrExpPresent,f=a.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&o&&r.tagname!=="!xml"&&(o=this.saveTextToParentTag(o,r,n,!1));let m=r;m&&this.options.unpairedTags.indexOf(m.tagname)!==-1&&(r=this.tagsNodeStack.pop(),n=n.substring(0,n.lastIndexOf("."))),c!==t.tagname&&(n+=n?"."+c:c);let x=s;if(this.isItStopNode(this.options.stopNodes,n,c)){let E="";if(p.length>0&&p.lastIndexOf("/")===p.length-1)c[c.length-1]==="/"?(c=c.substr(0,c.length-1),n=n.substr(0,n.length-1),p=c):p=p.substr(0,p.length-1),s=a.closeIndex;else if(this.options.unpairedTags.indexOf(c)!==-1)s=a.closeIndex;else{let A=this.readStopNodeData(e,l,f+1);if(!A)throw new Error(`Unexpected end of ${l}`);s=A.i,E=A.tagContent}let T=new Yt(c);c!==p&&u&&(T[":@"]=this.buildAttributesMap(p,n,c)),E&&(E=this.parseTextData(E,c,n,!0,u,!0,!0)),n=n.substr(0,n.lastIndexOf(".")),T.add(this.options.textNodeName,E),this.addChild(r,T,n,x)}else{if(p.length>0&&p.lastIndexOf("/")===p.length-1){c[c.length-1]==="/"?(c=c.substr(0,c.length-1),n=n.substr(0,n.length-1),p=c):p=p.substr(0,p.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));let E=new Yt(c);c!==p&&u&&(E[":@"]=this.buildAttributesMap(p,n,c)),this.addChild(r,E,n,x),n=n.substr(0,n.lastIndexOf("."))}else{let E=new Yt(c);this.tagsNodeStack.push(r),c!==p&&u&&(E[":@"]=this.buildAttributesMap(p,n,c)),this.addChild(r,E,n,x),r=E}o="",s=f}}else o+=e[s];return t.child};y2=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){let r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e}});function Zm(e,t){return TI(e,t)}function TI(e,t,r){let o,n={};for(let s=0;s<e.length;s++){let i=e[s],a=w2(i),c="";if(r===void 0?c=a:c=r+"."+a,a===t.textNodeName)o===void 0?o=i[a]:o+=""+i[a];else{if(a===void 0)continue;if(i[a]){let l=TI(i[a],t,c),p=I2(l,t);i[Qm]!==void 0&&(l[Qm]=i[Qm]),i[":@"]?R2(l,i[":@"],c,t):Object.keys(l).length===1&&l[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?l=l[t.textNodeName]:Object.keys(l).length===0&&(t.alwaysCreateTextNode?l[t.textNodeName]="":l=""),n[a]!==void 0&&n.hasOwnProperty(a)?(Array.isArray(n[a])||(n[a]=[n[a]]),n[a].push(l)):t.isArray(a,c,p)?n[a]=[l]:n[a]=l}}}return typeof o=="string"?o.length>0&&(n[t.textNodeName]=o):o!==void 0&&(n[t.textNodeName]=o),n}function w2(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let o=t[r];if(o!==":@")return o}}function R2(e,t,r,o){if(t){let n=Object.keys(t),s=n.length;for(let i=0;i<s;i++){let a=n[i];o.isArray(a,r+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function I2(e,t){let{textNodeName:r}=t,o=Object.keys(e).length;return!!(o===0||o===1&&(e[r]||typeof e[r]=="boolean"||e[r]===0))}var Qm,vI=d(()=>{"use strict";ol();Qm=Yt.getMetaDataSymbol()});var Ii,CI=d(()=>{_I();II();vI();SI();ol();Ii=class{constructor(t){this.externalEntities={},this.options=EI(t)}parse(t,r){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let s=yI(t,r);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}let o=new Pa(this.options);o.addExternalEntities(this.externalEntities);let n=o.parseXml(t);return this.options.preserveOrder||n===void 0?n:Zm(n,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}static getMetaDataSymbol(){return Yt.getMetaDataSymbol()}}});var AI=d(()=>{"use strict";CI()});function th(e){return eh.parse(e,!0)}var eh,PI=d(()=>{AI();eh=new Ii({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(e,t)=>t.trim()===""&&t.includes(`
`)?"":void 0});eh.addEntity("#xD","\r");eh.addEntity("#10",`
`)});var DI=d(()=>{pI();lI();PI()});var sl,rh=d(()=>{DI();Qo();ye();F();He();_i();Vm();sl=class extends Pr{settings;stringDeserializer;constructor(t){super(),this.settings=t,this.stringDeserializer=new xi(t)}setSerdeContext(t){this.serdeContext=t,this.stringDeserializer.setSerdeContext(t)}read(t,r,o){let n=j.of(t),s=n.getMemberSchemas();if(n.isStructSchema()&&n.isMemberSchema()&&!!Object.values(s).find(l=>!!l.getMemberTraits().eventPayload)){let l={},p=Object.keys(s)[0];return s[p].isBlobSchema()?l[p]=r:l[p]=this.read(s[p],r),l}let a=(this.serdeContext?.utf8Encoder??De)(r),c=this.parseXml(a);return this.readSchema(t,o?c[o]:c)}readSchema(t,r){let o=j.of(t);if(o.isUnitSchema())return;let n=o.getMergedTraits();if(o.isListSchema()&&!Array.isArray(r))return this.readSchema(o,[r]);if(r==null)return r;if(typeof r=="object"){let s=!!n.sparse,i=!!n.xmlFlattened;if(o.isListSchema()){let c=o.getValueSchema(),l=[],p=c.getMergedTraits().xmlName??"member",u=i?r:(r[0]??r)[p],f=Array.isArray(u)?u:[u];for(let m of f)(m!=null||s)&&l.push(this.readSchema(c,m));return l}let a={};if(o.isMapSchema()){let c=o.getKeySchema(),l=o.getValueSchema(),p;i?p=Array.isArray(r)?r:[r]:p=Array.isArray(r.entry)?r.entry:[r.entry];let u=c.getMergedTraits().xmlName??"key",f=l.getMergedTraits().xmlName??"value";for(let m of p){let x=m[u],E=m[f];(E!=null||s)&&(a[x]=this.readSchema(l,E))}return a}if(o.isStructSchema()){let c=o.isUnionSchema(),l;c&&(l=new bi(r,a));for(let[p,u]of o.structIterator()){let f=u.getMergedTraits(),m=f.httpPayload?f.xmlName??u.getName():u.getMemberTraits().xmlName??p;c&&l.mark(m),r[m]!=null&&(a[p]=this.readSchema(u,r[m]))}return c&&l.writeUnknown(),a}if(o.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${o.getName(!0)}`)}return o.isListSchema()?[]:o.isMapSchema()||o.isStructSchema()?{}:this.stringDeserializer.read(o,r)}parseXml(t){if(t.length){let r;try{r=th(t)}catch(i){throw i&&typeof i=="object"&&Object.defineProperty(i,"$responseBodyText",{value:t}),i}let o="#text",n=Object.keys(r)[0],s=r[n];return s[o]&&(s[n]=s[o],delete s[o]),Hm(s)}return{}}}});var il,NI=d(()=>{Qo();ye();bo();F();mt();_i();qd();il=class extends Pr{settings;buffer;constructor(t){super(),this.settings=t}write(t,r,o=""){this.buffer===void 0&&(this.buffer="");let n=j.of(t);if(o&&!o.endsWith(".")&&(o+="."),n.isBlobSchema())(typeof r=="string"||r instanceof Uint8Array)&&(this.writeKey(o),this.writeValue((this.serdeContext?.base64Encoder??Ne)(r)));else if(n.isBooleanSchema()||n.isNumericSchema()||n.isStringSchema())r!=null?(this.writeKey(o),this.writeValue(String(r))):n.isIdempotencyToken()&&(this.writeKey(o),this.writeValue(Yo()));else if(n.isBigIntegerSchema())r!=null&&(this.writeKey(o),this.writeValue(String(r)));else if(n.isBigDecimalSchema())r!=null&&(this.writeKey(o),this.writeValue(r instanceof tt?r.string:String(r)));else if(n.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(o),Ro(n,this.settings)){case 5:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue(fi(r));break;case 7:this.writeValue(String(r.getTime()/1e3));break}}else if(n.isDocumentSchema())Array.isArray(r)?this.write(79,r,o):r instanceof Date?this.write(4,r,o):r instanceof Uint8Array?this.write(21,r,o):r&&typeof r=="object"?this.write(143,r,o):(this.writeKey(o),this.writeValue(String(r)));else if(n.isListSchema()){if(Array.isArray(r))if(r.length===0)this.settings.serializeEmptyLists&&(this.writeKey(o),this.writeValue(""));else{let s=n.getValueSchema(),i=this.settings.flattenLists||n.getMergedTraits().xmlFlattened,a=1;for(let c of r){if(c==null)continue;let l=this.getKey("member",s.getMergedTraits().xmlName),p=i?`${o}${a}`:`${o}${l}.${a}`;this.write(s,c,p),++a}}}else if(n.isMapSchema()){if(r&&typeof r=="object"){let s=n.getKeySchema(),i=n.getValueSchema(),a=n.getMergedTraits().xmlFlattened,c=1;for(let[l,p]of Object.entries(r)){if(p==null)continue;let u=this.getKey("key",s.getMergedTraits().xmlName),f=a?`${o}${c}.${u}`:`${o}entry.${c}.${u}`,m=this.getKey("value",i.getMergedTraits().xmlName),x=a?`${o}${c}.${m}`:`${o}entry.${c}.${m}`;this.write(s,l,f),this.write(i,p,x),++c}}}else if(n.isStructSchema()){if(r&&typeof r=="object"){let s=!1;for(let[i,a]of Kd(n,r)){if(r[i]==null&&!a.isIdempotencyToken())continue;let c=this.getKey(i,a.getMergedTraits().xmlName),l=`${o}${c}`;this.write(a,r[i],l),s=!0}if(!s&&n.isUnionSchema()){let{$unknown:i}=r;if(Array.isArray(i)){let[a,c]=i,l=`${o}${a}`;this.write(15,c,l)}}}}else if(!n.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${n.getName(!0)}`)}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let t=this.buffer;return delete this.buffer,t}getKey(t,r){let o=r??t;return this.settings.capitalizeKeys?o[0].toUpperCase()+o.slice(1):o}writeKey(t){t.endsWith(".")&&(t=t.slice(0,t.length-1)),this.buffer+=`&${li(t)}=`}writeValue(t){this.buffer+=li(t)}}});var Ti,OI=d(()=>{Qo();ye();zd();rh();NI();Ti=class extends gi{options;serializer;deserializer;mixin=new In;constructor(t){super({defaultNamespace:t.defaultNamespace}),this.options=t;let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace,serializeEmptyLists:!0};this.serializer=new il(r),this.deserializer=new sl(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(t){this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(t,r,o){let n=await super.serializeRequest(t,r,o);n.path.endsWith("/")||(n.path+="/"),Object.assign(n.headers,{"content-type":"application/x-www-form-urlencoded"}),(En(t.input)==="unit"||!n.body)&&(n.body="");let s=t.name.split("#")[1]??t.name;return n.body=`Action=${s}&Version=${this.options.version}`+n.body,n.body.endsWith("&")&&(n.body=n.body.slice(-1)),n}async deserializeResponse(t,r,o){let n=this.deserializer,s=j.of(t.output),i={};if(o.statusCode>=300){let u=await Ot(o.body,r);u.byteLength>0&&Object.assign(i,await n.read(15,u)),await this.handleError(t,r,o,i,this.deserializeMetadata(o))}for(let u in o.headers){let f=o.headers[u];delete o.headers[u],o.headers[u.toLowerCase()]=f}let a=t.name.split("#")[1]??t.name,c=s.isStructSchema()&&this.useNestedResult()?a+"Result":void 0,l=await Ot(o.body,r);return l.byteLength>0&&Object.assign(i,await n.read(s,l,c)),{$metadata:this.deserializeMetadata(o),...i}}useNestedResult(){return!0}async handleError(t,r,o,n,s){let i=this.loadQueryErrorCode(o,n)??"Unknown",a=this.loadQueryError(n),c=this.loadQueryErrorMessage(n);a.message=c,a.Error={Type:a.Type,Code:a.Code,Message:c};let{errorSchema:l,errorMetadata:p}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,o,a,s,this.mixin.findQueryCompatibleError),u=j.of(l),f=w.for(l[1]).getErrorCtor(l)??Error,m=new f(c),x={Type:a.Error.Type,Code:a.Error.Code,Error:a.Error};for(let[E,T]of u.structIterator()){let A=T.getMergedTraits().xmlName??E,O=a[A]??n[A];x[E]=this.deserializer.readSchema(T,O)}throw this.mixin.decorateServiceException(Object.assign(m,p,{$fault:u.getMergedTraits().error,message:c},x),n)}loadQueryErrorCode(t,r){let o=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(o!==void 0)return o;if(t.statusCode==404)return"NotFound"}loadQueryError(t){return t.Errors?.[0]?.Error??t.Errors?.Error??t.Error}loadQueryErrorMessage(t){let r=this.loadQueryError(t);return r?.message??r?.Message??t.message??t.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}});var kI=d(()=>{});var $I=d(()=>{});var MI=d(()=>{});var LI=d(()=>{});var UI=d(()=>{});var tn=d(()=>{YR();XR();iI();aI();Wm();cI();Xd();Gm();jm();dI();va();kI();OI();UI();LI();rh();MI();$I()});var je=d(()=>{it();yR();tn()});async function FI(e,t,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&Jt(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){let s=await t.retryStrategy();typeof s.acquireInitialRetryToken=="function"?s.constructor?.name?.includes("Adaptive")?Jt(e,"RETRY_MODE_ADAPTIVE","F"):Jt(e,"RETRY_MODE_STANDARD","E"):Jt(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){let s=e.endpointV2;switch(String(s?.url?.hostname).match(T2)&&Jt(e,"ACCOUNT_ID_ENDPOINT","O"),await t.accountIdEndpointMode?.()){case"disabled":Jt(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":Jt(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":Jt(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let n=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(n?.$source){let s=n;s.accountId&&Jt(e,"RESOLVED_ACCOUNT_ID","T");for(let[i,a]of Object.entries(s.$source??{}))Jt(e,i,a)}}var T2,BI=d(()=>{je();T2=/\d{12}\.ddb/});var oh,al,nh,cl,HI,VI,sh,GI=d(()=>{oh="user-agent",al="x-amz-user-agent",nh=" ",cl="/",HI=/[^!$%&'*+\-.^_`|~\w]/g,VI=/[^!$%&'*+\-.^_`|~\w#]/g,sh="-"});function jI(e){let t="";for(let r in e){let o=e[r];if(t.length+o.length+1<=1024){t.length?t+=","+o:t+=o;continue}break}return t}var WI=d(()=>{});var v2,dl,C2,Dr,zI=d(()=>{_n();$e();BI();GI();WI();v2=e=>(t,r)=>async o=>{let{request:n}=o;if(!_e.isInstance(n))return t(o);let{headers:s}=n,i=r?.userAgent?.map(dl)||[],a=(await e.defaultUserAgentProvider()).map(dl);await FI(r,e,o);let c=r;a.push(`m/${jI(Object.assign({},r.__smithy_context?.features,c.__aws_sdk_context?.features))}`);let l=e?.customUserAgent?.map(dl)||[],p=await e.userAgentAppId();p&&a.push(dl(["app",`${p}`]));let u=Zb(),f=(u?[u]:[]).concat([...a,...i,...l]).join(nh),m=[...a.filter(x=>x.startsWith("aws-sdk-")),...l].join(nh);return e.runtime!=="browser"?(m&&(s[al]=s[al]?`${s[oh]} ${m}`:m),s[oh]=f):s[al]=f,t({...o,request:n})},dl=e=>{let t=e[0].split(cl).map(i=>i.replace(HI,sh)).join(cl),r=e[1]?.replace(VI,sh),o=t.indexOf(cl),n=t.substring(0,o),s=t.substring(o+1);return n==="api"&&(s=s.toLowerCase()),[n,s,r].filter(i=>i&&i.length>0).reduce((i,a,c)=>{switch(c){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},C2={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Dr=e=>({applyToStack:t=>{t.add(v2(e),C2)}})});var An=d(()=>{J_();zI()});var vi,KI=d(()=>{vi=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}}});var qI=d(()=>{});var Pn,JI=d(()=>{(function(e){e.ENV="env",e.CONFIG="shared config entry"})(Pn||(Pn={}))});var ih=d(()=>{KI();qI();JI()});var A2,P2,Nr,YI=d(()=>{ih();A2="AWS_USE_DUALSTACK_ENDPOINT",P2="use_dualstack_endpoint",Nr={environmentVariableSelector:e=>vi(e,A2,Pn.ENV),configFileSelector:e=>vi(e,P2,Pn.CONFIG),default:!1}});var D2,N2,Or,XI=d(()=>{ih();D2="AWS_USE_FIPS_ENDPOINT",N2="use_fips_endpoint",Or={environmentVariableSelector:e=>vi(e,D2,Pn.ENV),configFileSelector:e=>vi(e,N2,Pn.CONFIG),default:!1}});var QI=d(()=>{});var ZI=d(()=>{});var eT=d(()=>{YI();XI();QI();ZI()});var O2,k2,yt,Ut,tT=d(()=>{O2="AWS_REGION",k2="region",yt={environmentVariableSelector:e=>e[O2],configFileSelector:e=>e[k2],default:()=>{throw new Error("Region is missing")}},Ut={preferredFile:"credentials"}});var rT,oT,nT=d(()=>{io();rT=new Set,oT=(e,t=Ss)=>{if(!rT.has(e)&&!t(e))if(e==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${e}" is not a valid hostname component.`);else rT.add(e)}});var ll,ah=d(()=>{ll=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips"))});var sT,iT=d(()=>{ah();sT=e=>ll(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e});var kr,aT=d(()=>{nT();iT();ah();kr=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return Object.assign(e,{region:async()=>{let o=typeof t=="function"?await t():t,n=sT(o);return oT(n),n},useFipsEndpoint:async()=>{let o=typeof t=="string"?t:await t();return ll(o)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})}});var cT=d(()=>{tT();aT()});var dT=d(()=>{});var lT=d(()=>{});var pT=d(()=>{});var uT=d(()=>{dT();lT();pT()});var Tt=d(()=>{eT();cT();uT()});function $2(e){return t=>async r=>{let o=r.request;if(_e.isInstance(o)){let{body:n,headers:s}=o;if(n&&Object.keys(s).map(i=>i.toLowerCase()).indexOf(fT)===-1)try{let i=e(n);o.headers={...o.headers,[fT]:String(i)}}catch{}}return t({...r,request:o})}}var fT,M2,$r,Rs=d(()=>{$e();fT="content-length";M2={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},$r=e=>({applyToStack:t=>{t.add($2(e.bodyLengthChecker),M2)}})});var mT,L2,U2,F2,B2,H2,hT=d(()=>{mT=async e=>{let t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),H2(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!B2(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},L2=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,U2=/(\d+\.){3}\d+/,F2=/\.\./,B2=e=>L2.test(e)&&!U2.test(e)&&!F2.test(e),H2=e=>{let[t,r,o,,,n]=e.split(":"),s=t==="arn"&&e.split(":").length>=6,i=!!(s&&r&&o&&n);if(s&&!i)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return i}});var gT=d(()=>{hT()});var xT,yT=d(()=>{xT=(e,t,r,o=!1)=>{let n=async()=>{let s;return o?s=r.clientContextParams?.[e]??r[e]??r[t]:s=r[e]??r[t],typeof s=="function"?s():s};return e==="credentialScope"||t==="CredentialScope"?async()=>{let s=typeof r.credentials=="function"?await r.credentials():r.credentials;return s?.credentialScope??s?.CredentialScope}:e==="accountId"||t==="AccountId"?async()=>{let s=typeof r.credentials=="function"?await r.credentials():r.credentials;return s?.accountId??s?.AccountId}:e==="endpoint"||t==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;let s=await n();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){let{protocol:i,hostname:a,port:c,path:l}=s;return`${i}//${a}${c?":"+c:""}${l}`}}return s}:n}});function pl(e){try{let t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete("CONFIG"),t.delete("CONFIG_PREFIX_SEPARATOR"),t.delete("ENV"),[...t].join(", ")}catch{return e}}var ch=d(()=>{});var ST,ET=d(()=>{Ie();ch();ST=(e,t)=>async()=>{try{let r=e(process.env,t);if(r===void 0)throw new Error;return r}catch(r){throw new $(r.message||`Not found in ENV: ${pl(e.toString())}`,{logger:t?.logger})}}});import{homedir as V2}from"os";import{sep as G2}from"path";var dh,j2,Dn,Ci=d(()=>{dh={},j2=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",Dn=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:o=`C:${G2}`}=process.env;if(e)return e;if(t)return t;if(r)return`${o}${r}`;let n=j2();return dh[n]||(dh[n]=V2()),dh[n]}});var lh,W2,Ft,_T=d(()=>{lh="AWS_PROFILE",W2="default",Ft=e=>e.profile||process.env[lh]||W2});import{createHash as z2}from"crypto";import{join as K2}from"path";var ul,ph=d(()=>{Ci();ul=e=>{let r=z2("sha1").update(e).digest("hex");return K2(Dn(),".aws","sso","cache",`${r}.json`)}});import{readFile as q2}from"fs/promises";var Da,Na,uh=d(()=>{ph();Da={},Na=async e=>{if(Da[e])return Da[e];let t=ul(e),r=await q2(t,"utf8");return JSON.parse(r)}});var Xt,fl=d(()=>{Xt="."});var bT,wT=d(()=>{Sn();fl();bT=e=>Object.entries(e).filter(([t])=>{let r=t.indexOf(Xt);return r===-1?!1:Object.values(jo).includes(t.substring(0,r))}).reduce((t,[r,o])=>{let n=r.indexOf(Xt),s=r.substring(0,n)===jo.PROFILE?r.substring(n+1):r;return t[s]=o,t},{...e.default&&{default:e.default}})});import{join as J2}from"path";var Y2,ml,fh=d(()=>{Ci();Y2="AWS_CONFIG_FILE",ml=()=>process.env[Y2]||J2(Dn(),".aws","config")});import{join as X2}from"path";var Q2,RT,IT=d(()=>{Ci();Q2="AWS_SHARED_CREDENTIALS_FILE",RT=()=>process.env[Q2]||X2(Dn(),".aws","credentials")});var Z2,e4,Oa,mh=d(()=>{Sn();fl();Z2=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,e4=["__proto__","profile __proto__"],Oa=e=>{let t={},r,o;for(let n of e.split(/\r?\n/)){let s=n.split(/(^|\s)[;#]/)[0].trim();if(s[0]==="["&&s[s.length-1]==="]"){r=void 0,o=void 0;let a=s.substring(1,s.length-1),c=Z2.exec(a);if(c){let[,l,,p]=c;Object.values(jo).includes(l)&&(r=[l,p].join(Xt))}else r=a;if(e4.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=s.indexOf("=");if(![0,-1].includes(a)){let[c,l]=[s.substring(0,a).trim(),s.substring(a+1).trim()];if(l==="")o=c;else{o&&n.trimStart()===n&&(o=void 0),t[r]=t[r]||{};let p=o?[o,c].join(Xt):c;t[r][p]=l}}}}return t}});import{readFile as t4}from"node:fs/promises";var hh,ka,Nn,$a=d(()=>{hh={},ka={},Nn=(e,t)=>ka[e]!==void 0?ka[e]:((!hh[e]||t?.ignoreCache)&&(hh[e]=t4(e,"utf8")),hh[e])});import{join as TT}from"path";var vT,hl,gl=d(()=>{wT();fh();IT();Ci();mh();$a();fl();vT=()=>({}),hl=async(e={})=>{let{filepath:t=RT(),configFilepath:r=ml()}=e,o=Dn(),n="~/",s=t;t.startsWith(n)&&(s=TT(o,t.slice(2)));let i=r;r.startsWith(n)&&(i=TT(o,r.slice(2)));let a=await Promise.all([Nn(i,{ignoreCache:e.ignoreCache}).then(Oa).then(bT).catch(vT),Nn(s,{ignoreCache:e.ignoreCache}).then(Oa).catch(vT)]);return{configFile:a[0],credentialsFile:a[1]}}});var CT,AT=d(()=>{Sn();gl();CT=e=>Object.entries(e).filter(([t])=>t.startsWith(jo.SSO_SESSION+Xt)).reduce((t,[r,o])=>({...t,[r.substring(r.indexOf(Xt)+1)]:o}),{})});var r4,xl,PT=d(()=>{fh();AT();mh();$a();r4=()=>({}),xl=async(e={})=>Nn(e.configFilepath??ml()).then(Oa).then(CT).catch(r4)});var DT,NT=d(()=>{DT=(...e)=>{let t={};for(let r of e)for(let[o,n]of Object.entries(r))t[o]!==void 0?Object.assign(t[o],n):t[o]=n;return t}});var Io,OT=d(()=>{gl();NT();Io=async e=>{let t=await hl(e);return DT(t.configFile,t.credentialsFile)}});var Ma,kT=d(()=>{uh();$a();Ma={getFileRecord(){return ka},interceptFile(e,t){ka[e]=Promise.resolve(t)},getTokenRecord(){return Da},interceptToken(e,t){Da[e]=t}}});var $T=d(()=>{});var vt=d(()=>{Ci();_T();ph();uh();gl();PT();OT();kT();$T();$a()});var MT,LT=d(()=>{Ie();vt();ch();MT=(e,{preferredFile:t="config",...r}={})=>async()=>{let o=Ft(r),{configFile:n,credentialsFile:s}=await hl(r),i=s[o]||{},a=n[o]||{},c=t==="config"?{...i,...a}:{...a,...i};try{let p=e(c,t==="config"?n:s);if(p===void 0)throw new Error;return p}catch(l){throw new $(l.message||`Not found in config files w/ profile [${o}]: ${pl(e.toString())}`,{logger:r.logger})}}});var o4,UT,FT=d(()=>{Ie();o4=e=>typeof e=="function",UT=e=>o4(e)?async()=>await e():Nw(e)});var L,BT=d(()=>{Ie();ET();LT();FT();L=({environmentVariableSelector:e,configFileSelector:t,default:r},o={})=>{let{signingName:n,logger:s}=o;return Ud(Si(ST(e,{signingName:n,logger:s}),MT(t,o),UT(r)))}});var Mr=d(()=>{BT()});var HT,VT,GT,jT=d(()=>{vt();HT="AWS_ENDPOINT_URL",VT="endpoint_url",GT=e=>({environmentVariableSelector:t=>{let r=e.split(" ").map(s=>s.toUpperCase()),o=t[[HT,...r].join("_")];if(o)return o;let n=t[HT];if(n)return n},configFileSelector:(t,r)=>{if(r&&t.services){let n=r[["services",t.services].join(Xt)];if(n){let s=e.split(" ").map(a=>a.toLowerCase()),i=n[[s.join("_"),VT].join(Xt)];if(i)return i}}let o=t[VT];if(o)return o},default:void 0})});var yl,gh=d(()=>{Mr();jT();yl=async e=>L(GT(e??""))()});var Sl,El=d(()=>{en();Sl=e=>typeof e=="object"?"url"in e?rt(e.url):e:rt(e)});var WT,n4,xh=d(()=>{gT();yT();gh();El();WT=async(e,t,r,o)=>{if(!r.isCustomEndpoint){let i;r.serviceConfiguredEndpoint?i=await r.serviceConfiguredEndpoint():i=await yl(r.serviceId),i&&(r.endpoint=()=>Promise.resolve(Sl(i)),r.isCustomEndpoint=!0)}let n=await n4(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(n,o)},n4=async(e,t,r)=>{let o={},n=t?.getEndpointParameterInstructions?.()||{};for(let[s,i]of Object.entries(n))switch(i.type){case"staticContextParams":o[s]=i.value;break;case"contextParams":o[s]=e[i.name];break;case"clientContextParams":case"builtInParams":o[s]=await xT(i.name,s,r,i.type!=="builtInParams")();break;case"operationContextParams":o[s]=i.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(n).length===0&&Object.assign(o,r),String(r.serviceId).toLowerCase()==="s3"&&await mT(o),o}});var zT=d(()=>{xh();El()});var KT,yh=d(()=>{Qe();ft();xh();KT=({config:e,instructions:t})=>(r,o)=>async n=>{e.isCustomEndpoint&&U_(o,"ENDPOINT_OVERRIDE","N");let s=await WT(n.input,{getEndpointParameterInstructions(){return t}},{...e},o);o.endpointV2=s,o.authSchemes=s.properties?.authSchemes;let i=o.authSchemes?.[0];if(i){o.signing_region=i.signingRegion,o.signing_service=i.signingName;let c=Fe(o)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return r({...n})}});var s4,he,qT=d(()=>{kf();yh();s4={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:md.name},he=(e,t)=>({applyToStack:r=>{r.addRelativeTo(KT({config:e,instructions:t}),s4)}})});var Lr,JT=d(()=>{ft();gh();El();Lr=e=>{let t=e.tls??!0,{endpoint:r,useDualstackEndpoint:o,useFipsEndpoint:n}=e,s=r!=null?async()=>Sl(await Ee(r)()):void 0,a=Object.assign(e,{endpoint:s,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:Ee(o??!1),useFipsEndpoint:Ee(n??!1)}),c;return a.serviceConfiguredEndpoint=async()=>(e.serviceId&&!c&&(c=yl(e.serviceId)),c),a}});var YT=d(()=>{});var XT=d(()=>{});var Ue=d(()=>{zT();yh();qT();JT();YT();XT()});var rn,Ai,Bt,_l=d(()=>{(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(rn||(rn={}));Ai=3,Bt=rn.STANDARD});var QT,ZT,ev,tv,rv,ov=d(()=>{QT=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],ZT=["TimeoutError","RequestTimeout","RequestTimeoutException"],ev=[500,502,503,504],tv=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],rv=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"]});var i4,a4,c4,bl,wl,nv,Sh=d(()=>{ov();i4=e=>e?.$retryable!==void 0,a4=e=>e.$metadata?.clockSkewCorrected,c4=e=>{let t=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return e&&e instanceof TypeError?t.has(e.message):!1},bl=e=>e.$metadata?.httpStatusCode===429||QT.includes(e.name)||e.$retryable?.throttling==!0,wl=(e,t=0)=>i4(e)||a4(e)||ZT.includes(e.name)||tv.includes(e?.code||"")||rv.includes(e?.code||"")||ev.includes(e.$metadata?.httpStatusCode||0)||c4(e)||e.cause!==void 0&&t<=10&&wl(e.cause,t+1),nv=e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!wl(e)}return!1}});var Rl,Eh=d(()=>{Sh();Rl=class e{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(t){this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(o=>e.setTimeoutFn(o,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),bl(t)){let n=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=n,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(n),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let o=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(o)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let o=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(o*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}}});var sv,iv,av=d(()=>{sv="amz-sdk-invocation-id",iv="amz-sdk-request"});var dv,lv=d(()=>{dv=()=>{let e=100;return{computeNextBackoffDelay:o=>Math.floor(Math.min(2e4,Math.random()*2**o*e)),setDelayBase:o=>{e=o}}}});var _h,pv=d(()=>{_h=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(2e4,e),getRetryCost:()=>r})});var Pi,bh=d(()=>{_l();lv();pv();Pi=class{maxAttempts;mode=rn.STANDARD;capacity=500;retryBackoffStrategy=dv();maxAttemptsProvider;constructor(t){this.maxAttempts=t,this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return _h({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(t,r){let o=await this.getMaxAttempts();if(this.shouldRetry(t,r,o)){let n=r.errorType;this.retryBackoffStrategy.setDelayBase(n==="THROTTLING"?500:100);let s=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,s):s,a=this.getCapacityCost(n);return this.capacity-=a,_h({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(500,this.capacity+(t.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Ai}`),Ai}}shouldRetry(t,r,o){return t.getRetryCount()+1<o&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?10:5}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}}});var Il,uv=d(()=>{_l();Eh();bh();Il=class{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=rn.ADAPTIVE;constructor(t,r){this.maxAttemptsProvider=t;let{rateLimiter:o}=r??{};this.rateLimiter=o??new Rl,this.standardRetryStrategy=new Pi(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}}});var fv=d(()=>{});var mv=d(()=>{});var on=d(()=>{uv();fv();Eh();bh();_l();av();mv()});var hv=d(()=>{});var gv=d(()=>{});var xv,yv=d(()=>{xv=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`)});var Sv=d(()=>{});var Ev=d(()=>{});var _v,bv,Ur,Fr,p4,u4,Br,wv=d(()=>{ft();on();_v="AWS_MAX_ATTEMPTS",bv="max_attempts",Ur={environmentVariableSelector:e=>{let t=e[_v];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${_v} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[bv];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${bv} mast be a number, got "${t}"`);return r},default:Ai},Fr=e=>{let{retryStrategy:t,retryMode:r,maxAttempts:o}=e,n=Ee(o??Ai);return Object.assign(e,{maxAttempts:n,retryStrategy:async()=>t||(await Ee(r)()===rn.ADAPTIVE?new Il(n):new Pi(n))})},p4="AWS_RETRY_MODE",u4="retry_mode",Br={environmentVariableSelector:e=>e[p4],configFileSelector:e=>e[u4],default:Bt}});var Rv=d(()=>{});import{Readable as f4}from"stream";var Iv,Tv=d(()=>{Iv=e=>e?.body instanceof f4||typeof ReadableStream<"u"&&e?.body instanceof ReadableStream});var m4,h4,g4,x4,y4,Hr,S4,vv=d(()=>{$e();Sh();F();on();rm();Tv();yv();m4=e=>(t,r)=>async o=>{let n=await e.retryStrategy(),s=await e.maxAttempts();if(h4(n)){n=n;let i=await n.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,l=0,{request:p}=o,u=_e.isInstance(p);for(u&&(p.headers[sv]=Yo());;)try{u&&(p.headers[iv]=`attempt=${c+1}; max=${s}`);let{response:f,output:m}=await t(o);return n.recordSuccess(i),m.$metadata.attempts=c+1,m.$metadata.totalRetryDelay=l,{response:f,output:m}}catch(f){let m=g4(f);if(a=xv(f),u&&Iv(p))throw(r.logger instanceof xt?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{i=await n.refreshRetryTokenForRetry(i,m)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=l,a}c=i.getRetryCount();let x=i.getRetryDelay();l+=x,await new Promise(E=>setTimeout(E,x))}}else return n=n,n?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",n.mode]]),n.retry(t,o)},h4=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",g4=e=>{let t={error:e,errorType:x4(e)},r=S4(e.$response);return r&&(t.retryAfterHint=r),t},x4=e=>bl(e)?"THROTTLING":wl(e)?"TRANSIENT":nv(e)?"SERVER_ERROR":"CLIENT_ERROR",y4={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Hr=e=>({applyToStack:t=>{t.add(m4(e),y4)}}),S4=e=>{if(!cr.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],o=Number(r);return Number.isNaN(o)?new Date(r):new Date(o*1e3)}});var Qt=d(()=>{Ev();Sv();wv();hv();Rv();gv();vv()});var pp,up,uC,fC,mC,hC,Mh,gC=d(()=>{it();Ie();pp="AWS_ACCESS_KEY_ID",up="AWS_SECRET_ACCESS_KEY",uC="AWS_SESSION_TOKEN",fC="AWS_CREDENTIAL_EXPIRATION",mC="AWS_CREDENTIAL_SCOPE",hC="AWS_ACCOUNT_ID",Mh=e=>async()=>{e?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let t=process.env[pp],r=process.env[up],o=process.env[uC],n=process.env[fC],s=process.env[mC],i=process.env[hC];if(t&&r){let a={accessKeyId:t,secretAccessKey:r,...o&&{sessionToken:o},...n&&{expiration:new Date(n)},...s&&{credentialScope:s},...i&&{accountId:i}};return oe(a,"CREDENTIALS_ENV_VARS","g"),a}throw new $("Unable to find environment variable credentials.",{logger:e?.logger})}});var xC={};zt(xC,{ENV_ACCOUNT_ID:()=>hC,ENV_CREDENTIAL_SCOPE:()=>mC,ENV_EXPIRATION:()=>fC,ENV_KEY:()=>pp,ENV_SECRET:()=>up,ENV_SESSION:()=>uC,fromEnv:()=>Mh});var Lh=d(()=>{gC()});import{Buffer as F6}from"buffer";import{request as B6}from"http";function On(e){return new Promise((t,r)=>{let o=B6({method:"GET",...e,hostname:e.hostname?.replace(/^\[(.+)\]$/,"$1")});o.on("error",n=>{r(Object.assign(new wr("Unable to connect to instance metadata service"),n)),o.destroy()}),o.on("timeout",()=>{r(new wr("TimeoutError from instance metadata service")),o.destroy()}),o.on("response",n=>{let{statusCode:s=400}=n;(s<200||300<=s)&&(r(Object.assign(new wr("Error response received from instance metadata service"),{statusCode:s})),o.destroy());let i=[];n.on("data",a=>{i.push(a)}),n.on("end",()=>{t(F6.concat(i)),o.destroy()})}),o.end()})}var fp=d(()=>{Ie()});var mp,hp,Uh=d(()=>{mp=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",hp=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration),...e.AccountId&&{accountId:e.AccountId}})});var Zue,efe,Ha,gp=d(()=>{Zue=1e3,efe=0,Ha=({maxRetries:e=0,timeout:t=1e3})=>({maxRetries:e,timeout:t})});var Va,Fh=d(()=>{Va=(e,t)=>{let r=e();for(let o=0;o<t;o++)r=r.catch(e);return r}});import{parse as H6}from"url";var xp,yp,Bh,V6,G6,j6,W6,z6,K6,yC=d(()=>{Ie();fp();Uh();gp();Fh();xp="AWS_CONTAINER_CREDENTIALS_FULL_URI",yp="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",Bh="AWS_CONTAINER_AUTHORIZATION_TOKEN",V6=(e={})=>{let{timeout:t,maxRetries:r}=Ha(e);return()=>Va(async()=>{let o=await K6({logger:e.logger}),n=JSON.parse(await G6(t,o));if(!mp(n))throw new $("Invalid response received from instance metadata service.",{logger:e.logger});return hp(n)},r)},G6=async(e,t)=>(process.env[Bh]&&(t.headers={...t.headers,Authorization:process.env[Bh]}),(await On({...t,timeout:e})).toString()),j6="169.254.170.2",W6={localhost:!0,"127.0.0.1":!0},z6={"http:":!0,"https:":!0},K6=async({logger:e})=>{if(process.env[yp])return{hostname:j6,path:process.env[yp]};if(process.env[xp]){let t=H6(process.env[xp]);if(!t.hostname||!(t.hostname in W6))throw new $(`${t.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:e});if(!t.protocol||!(t.protocol in z6))throw new $(`${t.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:e});return{...t,port:t.port?parseInt(t.port,10):void 0}}throw new $(`The container metadata credential provider cannot be used unless the ${yp} or ${xp} environment variable is set`,{tryNextLink:!1,logger:e})}});var Sp,SC=d(()=>{Ie();Sp=class e extends ${tryNextLink;name="InstanceMetadataV1FallbackError";constructor(t,r=!0){super(t,r),this.tryNextLink=r,Object.setPrototypeOf(this,e.prototype)}}});var As,Hh=d(()=>{(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(As||(As={}))});var q6,J6,EC,_C=d(()=>{q6="AWS_EC2_METADATA_SERVICE_ENDPOINT",J6="ec2_metadata_service_endpoint",EC={environmentVariableSelector:e=>e[q6],configFileSelector:e=>e[J6],default:void 0}});var kn,Vh=d(()=>{(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(kn||(kn={}))});var Y6,X6,bC,wC=d(()=>{Vh();Y6="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",X6="ec2_metadata_service_endpoint_mode",bC={environmentVariableSelector:e=>e[Y6],configFileSelector:e=>e[X6],default:kn.IPv4}});var Ep,Q6,Z6,Gh=d(()=>{Mr();en();Hh();_C();Vh();wC();Ep=async()=>rt(await Q6()||await Z6()),Q6=async()=>L(EC)(),Z6=async()=>{let e=await L(bC)();switch(e){case kn.IPv4:return As.IPv4;case kn.IPv6:return As.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(kn)}`)}}});var eB,jh,RC=d(()=>{eB="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",jh=(e,t)=>{let r=300+Math.floor(Math.random()*300),o=new Date(Date.now()+r*1e3);t.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(o)}.
For more information, please visit: `+eB);let n=e.originalExpiration??e.expiration;return{...e,...n?{originalExpiration:n}:{},expiration:o}}});var IC,TC=d(()=>{RC();IC=(e,t={})=>{let r=t?.logger||console,o;return async()=>{let n;try{n=await e(),n.expiration&&n.expiration.getTime()<Date.now()&&(n=jh(n,r))}catch(s){if(o)r.warn("Credential renew failed: ",s),n=jh(o,r);else throw s}return o=n,n}}});var AC,tB,Wh,vC,CC,rB,oB,nB,sB,iB,PC=d(()=>{Mr();Ie();SC();fp();Uh();gp();Fh();Gh();TC();AC="/latest/meta-data/iam/security-credentials/",tB="/latest/api/token",Wh="AWS_EC2_METADATA_V1_DISABLED",vC="ec2_metadata_v1_disabled",CC="x-aws-ec2-metadata-token",rB=(e={})=>IC(oB(e),{logger:e.logger}),oB=(e={})=>{let t=!1,{logger:r,profile:o}=e,{timeout:n,maxRetries:s}=Ha(e),i=async(a,c)=>{if(t||c.headers?.[CC]==null){let u=!1,f=!1,m=await L({environmentVariableSelector:x=>{let E=x[Wh];if(f=!!E&&E!=="false",E===void 0)throw new $(`${Wh} not set in env, checking config file next.`,{logger:e.logger});return f},configFileSelector:x=>{let E=x[vC];return u=!!E&&E!=="false",u},default:!1},{profile:o})();if(e.ec2MetadataV1Disabled||m){let x=[];throw e.ec2MetadataV1Disabled&&x.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),u&&x.push(`config file profile (${vC})`),f&&x.push(`process environment variable (${Wh})`),new Sp(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${x.join(", ")}].`)}}let p=(await Va(async()=>{let u;try{u=await sB(c)}catch(f){throw f.statusCode===401&&(t=!1),f}return u},a)).trim();return Va(async()=>{let u;try{u=await iB(p,c,e)}catch(f){throw f.statusCode===401&&(t=!1),f}return u},a)};return async()=>{let a=await Ep();if(t)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),i(s,{...a,timeout:n});{let c;try{c=(await nB({...a,timeout:n})).toString()}catch(l){if(l?.statusCode===400)throw Object.assign(l,{message:"EC2 Metadata token request returned error"});return(l.message==="TimeoutError"||[403,404,405].includes(l.statusCode))&&(t=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),i(s,{...a,timeout:n})}return i(s,{...a,headers:{[CC]:c},timeout:n})}}},nB=async e=>On({...e,path:tB,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),sB=async e=>(await On({...e,path:AC})).toString(),iB=async(e,t,r)=>{let o=JSON.parse((await On({...t,path:AC+e})).toString());if(!mp(o))throw new $("Invalid response received from instance metadata service.",{logger:r.logger});return hp(o)}});var DC=d(()=>{});var Ga={};zt(Ga,{DEFAULT_MAX_RETRIES:()=>efe,DEFAULT_TIMEOUT:()=>Zue,ENV_CMDS_AUTH_TOKEN:()=>Bh,ENV_CMDS_FULL_URI:()=>xp,ENV_CMDS_RELATIVE_URI:()=>yp,Endpoint:()=>As,fromContainerMetadata:()=>V6,fromInstanceMetadata:()=>rB,getInstanceMetadataEndpoint:()=>Ep,httpRequest:()=>On,providerConfigFromInit:()=>Ha});var ja=d(()=>{yC();PC();gp();DC();fp();Gh();Hh()});var aB,cB,dB,NC,OC=d(()=>{Ie();aB="169.254.170.2",cB="169.254.170.23",dB="[fd00:ec2::23]",NC=(e,t)=>{if(e.protocol!=="https:"&&!(e.hostname===aB||e.hostname===cB||e.hostname===dB)){if(e.hostname.includes("[")){if(e.hostname==="[::1]"||e.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(e.hostname==="localhost")return;let r=e.hostname.split("."),o=n=>{let s=parseInt(n,10);return 0<=s&&s<=255};if(r[0]==="127"&&o(r[1])&&o(r[2])&&o(r[3])&&r.length===4)return}throw new $(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:t})}}});function kC(e){return new _e({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((t,[r,o])=>(t[r]=o,t),{}),fragment:e.hash})}async function $C(e,t){let o=await yd(e.body).transformToString();if(e.statusCode===200){let n=JSON.parse(o);if(typeof n.AccessKeyId!="string"||typeof n.SecretAccessKey!="string"||typeof n.Token!="string"||typeof n.Expiration!="string")throw new $("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:t});return{accessKeyId:n.AccessKeyId,secretAccessKey:n.SecretAccessKey,sessionToken:n.Token,expiration:s_(n.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let n={};try{n=JSON.parse(o)}catch{}throw Object.assign(new $(`Server responded with status: ${e.statusCode}`,{logger:t}),{Code:n.Code,Message:n.Message})}throw new $(`Server responded with status: ${e.statusCode}`,{logger:t})}var MC=d(()=>{Ie();$e();F();Sd()});var LC,UC=d(()=>{LC=(e,t,r)=>async()=>{for(let o=0;o<t;++o)try{return await e()}catch{await new Promise(s=>setTimeout(s,r))}return await e()}});import lB from"fs/promises";var pB,uB,fB,mB,hB,FC,BC=d(()=>{it();qo();Ie();OC();MC();UC();pB="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",uB="http://169.254.170.2",fB="AWS_CONTAINER_CREDENTIALS_FULL_URI",mB="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",hB="AWS_CONTAINER_AUTHORIZATION_TOKEN",FC=(e={})=>{e.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let t,r=e.awsContainerCredentialsRelativeUri??process.env[pB],o=e.awsContainerCredentialsFullUri??process.env[fB],n=e.awsContainerAuthorizationToken??process.env[hB],s=e.awsContainerAuthorizationTokenFile??process.env[mB],i=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?.warn?console.warn:e.logger.warn.bind(e.logger);if(r&&o&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),i("awsContainerCredentialsFullUri will take precedence.")),n&&s&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),i("awsContainerAuthorizationToken will take precedence.")),o)t=o;else if(r)t=`${uB}${r}`;else throw new $(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});let a=new URL(t);NC(a,e.logger);let c=ht.create({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return LC(async()=>{let l=kC(a);n?l.headers.Authorization=n:s&&(l.headers.Authorization=(await lB.readFile(s)).toString());try{let p=await c.handle(l);return $C(p.response).then(u=>oe(u,"CREDENTIALS_HTTP","z"))}catch(p){throw new $(String(p),{logger:e.logger})}},e.maxRetries??3,e.timeout??1e3)}});var zh={};zt(zh,{fromHttp:()=>FC});var Kh=d(()=>{BC()});var qh,Jh=d(()=>{qh=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string")});var jC=d(()=>{});var ki,_p=d(()=>{ki="To refresh this SSO session run 'aws sso login' with the corresponding profile."});function xB(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function yB(e){return{schemeId:"smithy.api#noAuth"}}var WC,zC,KC,Yh=d(()=>{je();ft();WC=async(e,t,r)=>({operation:Fe(t).operation,region:await Ee(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});zC=e=>{let t=[];switch(e.operation){case"CreateToken":{t.push(yB(e));break}default:t.push(xB(e))}return t},KC=e=>{let t=Ir(e);return Object.assign(t,{authSchemePreference:Ee(e.authSchemePreference??[])})}});var qC,JC,Xh=d(()=>{qC=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),JC={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var $i,bp=d(()=>{$i={name:"@aws-sdk/nested-clients",version:"3.958.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":'yarn g:turbo run build -F="$npm_package_name"',"build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=18.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.957.0","@aws-sdk/middleware-host-header":"3.957.0","@aws-sdk/middleware-logger":"3.957.0","@aws-sdk/middleware-recursion-detection":"3.957.0","@aws-sdk/middleware-user-agent":"3.957.0","@aws-sdk/region-config-resolver":"3.957.0","@aws-sdk/types":"3.957.0","@aws-sdk/util-endpoints":"3.957.0","@aws-sdk/util-user-agent-browser":"3.957.0","@aws-sdk/util-user-agent-node":"3.957.0","@smithy/config-resolver":"^4.4.5","@smithy/core":"^3.20.0","@smithy/fetch-http-handler":"^5.3.8","@smithy/hash-node":"^4.2.7","@smithy/invalid-dependency":"^4.2.7","@smithy/middleware-content-length":"^4.2.7","@smithy/middleware-endpoint":"^4.4.1","@smithy/middleware-retry":"^4.4.17","@smithy/middleware-serde":"^4.2.8","@smithy/middleware-stack":"^4.2.7","@smithy/node-config-provider":"^4.3.7","@smithy/node-http-handler":"^4.4.7","@smithy/protocol-http":"^5.3.7","@smithy/smithy-client":"^4.10.2","@smithy/types":"^4.11.0","@smithy/url-parser":"^4.2.7","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.16","@smithy/util-defaults-mode-node":"^4.2.19","@smithy/util-endpoints":"^3.2.7","@smithy/util-middleware":"^4.2.7","@smithy/util-retry":"^4.2.7","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./signin.d.ts","./signin.js","./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/signin/runtimeConfig":"./dist-es/submodules/signin/runtimeConfig.browser","./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./package.json":"./package.json","./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"},"./signin":{types:"./dist-types/submodules/signin/index.d.ts",module:"./dist-es/submodules/signin/index.js",node:"./dist-cjs/submodules/signin/index.js",import:"./dist-es/submodules/signin/index.js",require:"./dist-cjs/submodules/signin/index.js"}}}});var YC,XC=d(()=>{YC={isCrtAvailable:!1}});var QC,ZC=d(()=>{XC();QC=()=>YC.isCrtAvailable?["md/crt-avail"]:null});import{platform as EB,release as _B}from"os";import{env as eA,versions as bB}from"process";var Vr,tA=d(()=>{ZC();Vr=({serviceId:e,clientVersion:t})=>async r=>{let o=[["aws-sdk-js",t],["ua","2.1"],[`os/${EB()}`,_B()],["lang/js"],["md/nodejs",`${bB.node}`]],n=QC();n&&o.push(n),e&&o.push([`api/${e}`,t]),eA.AWS_EXECUTION_ENV&&o.push([`exec-env/${eA.AWS_EXECUTION_ENV}`]);let s=await r?.userAgentAppId?.();return s?[...o,[`app/${s}`]]:[...o]}});var wB,RB,IB,Gr,rA=d(()=>{An();wB="AWS_SDK_UA_APP_ID",RB="sdk_ua_app_id",IB="sdk-ua-app-id",Gr={environmentVariableSelector:e=>e[wB],configFileSelector:e=>e[RB]??e[IB],default:lm}});var Ps=d(()=>{tA();rA()});import{Buffer as TB}from"buffer";import{createHash as vB,createHmac as CB}from"crypto";function oA(e,t){return TB.isBuffer(e)?e:typeof e=="string"?ci(e,t):ArrayBuffer.isView(e)?Ko(e.buffer,e.byteOffset,e.byteLength):Ko(e)}var Vt,Ds=d(()=>{hs();He();Vt=class{algorithmIdentifier;secret;hash;constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(so(oA(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?CB(this.algorithmIdentifier,oA(this.secret)):vB(this.algorithmIdentifier)}}});import{fstatSync as AB,lstatSync as PB,ReadStream as DB}from"node:fs";var jr,nA=d(()=>{jr=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.byteLength(e);if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(e instanceof DB){if(e.path!=null)return PB(e.path).size;if(typeof e.fd=="number")return AB(e.fd).size}throw new Error(`Body Length computation failed for ${e}`)}});var Ns=d(()=>{nA()});var sA,Qh,Zh,iA,aA,cA,dA=d(()=>{sA="AWS_EXECUTION_ENV",Qh="AWS_REGION",Zh="AWS_DEFAULT_REGION",iA="AWS_EC2_METADATA_DISABLED",aA=["in-region","cross-region","mobile","standard","legacy"],cA="/latest/meta-data/placement/region"});var NB,OB,lA,pA=d(()=>{NB="AWS_DEFAULTS_MODE",OB="defaults_mode",lA={environmentVariableSelector:e=>e[NB],configFileSelector:e=>e[OB],default:"legacy"}});var Wr,kB,$B,uA=d(()=>{Tt();Mr();Ie();dA();pA();Wr=({region:e=L(yt),defaultsMode:t=L(lA)}={})=>Ud(async()=>{let r=typeof t=="function"?await t():t;switch(r?.toLowerCase()){case"auto":return kB(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${aA.join(", ")}, got ${r}`)}}),kB=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await $B();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},$B=async()=>{if(process.env[sA]&&(process.env[Qh]||process.env[Zh]))return process.env[Qh]??process.env[Zh];if(!process.env[iA])try{let{getInstanceMetadataEndpoint:e,httpRequest:t}=await Promise.resolve().then(()=>(ja(),Ga)),r=await e();return(await t({...r,path:cA})).toString()}catch{}}});var Os=d(()=>{uA()});var bA,Kr,qr,Ui,fA,Wa,Mi,Li,nn,eg,tg,mA,hA,gA,wA,RA,zr,xA,IA,yA,SA,EA,_A,MB,TA,vA=d(()=>{bA="required",Kr="fn",qr="argv",Ui="ref",fA="isSet",Wa="booleanEquals",Mi="error",Li="endpoint",nn="tree",eg="PartitionResult",tg="getAttr",mA={[bA]:!1,type:"string"},hA={[bA]:!0,default:!1,type:"boolean"},gA={[Ui]:"Endpoint"},wA={[Kr]:Wa,[qr]:[{[Ui]:"UseFIPS"},!0]},RA={[Kr]:Wa,[qr]:[{[Ui]:"UseDualStack"},!0]},zr={},xA={[Kr]:tg,[qr]:[{[Ui]:eg},"supportsFIPS"]},IA={[Ui]:eg},yA={[Kr]:Wa,[qr]:[!0,{[Kr]:tg,[qr]:[IA,"supportsDualStack"]}]},SA=[wA],EA=[RA],_A=[{[Ui]:"Region"}],MB={version:"1.0",parameters:{Region:mA,UseDualStack:hA,UseFIPS:hA,Endpoint:mA},rules:[{conditions:[{[Kr]:fA,[qr]:[gA]}],rules:[{conditions:SA,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Mi},{conditions:EA,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Mi},{endpoint:{url:gA,properties:zr,headers:zr},type:Li}],type:nn},{conditions:[{[Kr]:fA,[qr]:_A}],rules:[{conditions:[{[Kr]:"aws.partition",[qr]:_A,assign:eg}],rules:[{conditions:[wA,RA],rules:[{conditions:[{[Kr]:Wa,[qr]:[!0,xA]},yA],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:zr,headers:zr},type:Li}],type:nn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Mi}],type:nn},{conditions:SA,rules:[{conditions:[{[Kr]:Wa,[qr]:[xA,!0]}],rules:[{conditions:[{[Kr]:"stringEquals",[qr]:[{[Kr]:tg,[qr]:[IA,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:zr,headers:zr},type:Li},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:zr,headers:zr},type:Li}],type:nn},{error:"FIPS is enabled but this partition does not support FIPS",type:Mi}],type:nn},{conditions:EA,rules:[{conditions:[yA],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:zr,headers:zr},type:Li}],type:nn},{error:"DualStack is enabled but this partition does not support DualStack",type:Mi}],type:nn},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:zr,headers:zr},type:Li}],type:nn}],type:nn},{error:"Invalid Configuration: Missing Region",type:Mi}]},TA=MB});var LB,CA,AA=d(()=>{_n();io();vA();LB=new Mt({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),CA=(e,t={})=>LB.get(e,()=>Er(TA,{endpointParams:e,logger:t.logger}));st.aws=qt});var PA,DA=d(()=>{je();tn();Qe();F();en();mt();He();Yh();AA();PA=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??Le,base64Encoder:e?.base64Encoder??Ne,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??CA,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??zC,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new at},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new gr}],logger:e?.logger??new xt,protocol:e?.protocol??vn,protocolSettings:e?.protocolSettings??{defaultNamespace:"com.amazonaws.ssooidc",version:"2019-06-10",serviceTarget:"AWSSSOOIDCService"},serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??rt,utf8Decoder:e?.utf8Decoder??Oe,utf8Encoder:e?.utf8Encoder??De})});var NA,OA=d(()=>{bp();je();Ps();Tt();Ds();Qt();Mr();qo();F();Ns();Os();on();DA();NA=e=>{vr(process.version);let t=Wr(e),r=()=>t().then(Tr),o=PA(e);_r(process.version);let n={profile:e?.profile,logger:o.logger};return{...o,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??L(br,n),bodyLengthChecker:e?.bodyLengthChecker??jr,defaultUserAgentProvider:e?.defaultUserAgentProvider??Vr({serviceId:o.serviceId,clientVersion:$i.version}),maxAttempts:e?.maxAttempts??L(Ur,e),region:e?.region??L(yt,{...Ut,...n}),requestHandler:ht.create(e?.requestHandler??r),retryMode:e?.retryMode??L({...Br,default:async()=>(await r()).retryMode||Bt},e),sha256:e?.sha256??Vt.bind(null,"sha256"),streamCollector:e?.streamCollector??Dt,useDualstackEndpoint:e?.useDualstackEndpoint??L(Nr,n),useFipsEndpoint:e?.useFipsEndpoint??L(Or,n),userAgentAppId:e?.userAgentAppId??L(Gr,n)}}});var Jr,Yr,kA=d(()=>{Jr=e=>({setRegion(t){e.region=t},region(){return e.region}}),Yr=e=>({region:e.region()})});var $A=d(()=>{});function MA(e={}){return L({...yt,async default(){return UB.silence||console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly."),"us-east-1"}},{...Ut,...e})}var UB,LA=d(()=>{Tt();Mr();UB={silence:!1}});var $n=d(()=>{kA();$A();LA()});var UA,FA,BA=d(()=>{UA=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,o=e.credentials;return{setHttpAuthScheme(n){let s=t.findIndex(i=>i.schemeId===n.schemeId);s===-1?t.push(n):t.splice(s,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){o=n},credentials(){return o}}},FA=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var HA,VA=d(()=>{$n();$e();F();BA();HA=(e,t)=>{let r=Object.assign(Jr(e),Cr(e),ir(e),UA(e));return t.forEach(o=>o.configure(r)),Object.assign(e,Yr(r),Ar(r),ar(r),FA(r))}});var za,rg=d(()=>{ps();us();fs();An();Tt();Qe();ye();Rs();Ue();Qt();F();Yh();Xh();OA();VA();za=class extends Ze{config;constructor(...[t]){let r=NA(t||{});super(r),this.initConfig=r;let o=qC(r),n=xr(o),s=Fr(n),i=kr(s),a=i,c=Lr(a),l=KC(c),p=HA(l,t?.extensions||[]);this.config=p,this.middlewareStack.use(mr(this.config)),this.middlewareStack.use(Dr(this.config)),this.middlewareStack.use(Hr(this.config)),this.middlewareStack.use($r(this.config)),this.middlewareStack.use(dr(this.config)),this.middlewareStack.use(lr(this.config)),this.middlewareStack.use(pr(this.config)),this.middlewareStack.use(ur(this.config,{httpAuthSchemeParametersProvider:WC,identityProviderConfigProvider:async u=>new $t({"aws.auth#sigv4":u.credentials})})),this.middlewareStack.use(fr(this.config))}destroy(){super.destroy()}}});var ot,wp=d(()=>{F();ot=class e extends Lt{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var qa,Ja,Ya,Xa,Qa,Za,ec,tc,rc,oc,nc,og=d(()=>{wp();qa=class e extends ot{name="AccessDeniedException";$fault="client";error;reason;error_description;constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},Ja=class e extends ot{name="AuthorizationPendingException";$fault="client";error;error_description;constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Ya=class e extends ot{name="ExpiredTokenException";$fault="client";error;error_description;constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Xa=class e extends ot{name="InternalServerException";$fault="server";error;error_description;constructor(t){super({name:"InternalServerException",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Qa=class e extends ot{name="InvalidClientException";$fault="client";error;error_description;constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Za=class e extends ot{name="InvalidGrantException";$fault="client";error;error_description;constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},ec=class e extends ot{name="InvalidRequestException";$fault="client";error;reason;error_description;constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},tc=class e extends ot{name="InvalidScopeException";$fault="client";error;error_description;constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},rc=class e extends ot{name="SlowDownException";$fault="client";error;error_description;constructor(t){super({name:"SlowDownException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},oc=class e extends ot{name="UnauthorizedClientException";$fault="client";error;error_description;constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},nc=class e extends ot{name="UnsupportedGrantTypeException";$fault="client";error;error_description;constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}}});var FB,BB,HB,VB,GB,jB,WB,zB,KB,qB,JB,YB,XB,QB,ZB,e5,t5,r5,o5,n5,vo,s5,i5,a5,c5,d5,Be,l5,ao,p5,u5,co,f5,GA,jA,m5,h5,g5,WA,x5,be,y5,S5,E5,_5,zA,KA,qA,JA,YA,XA,QA,ZA,eP,tP,rP,oP,nP,sP,iP,ng,sg=d(()=>{ye();og();wp();FB="AccessDeniedException",BB="AuthorizationPendingException",HB="AccessToken",VB="ClientSecret",GB="CreateToken",jB="CreateTokenRequest",WB="CreateTokenResponse",zB="CodeVerifier",KB="ExpiredTokenException",qB="InvalidClientException",JB="InvalidGrantException",YB="InvalidRequestException",XB="InternalServerException",QB="InvalidScopeException",ZB="IdToken",e5="RefreshToken",t5="SlowDownException",r5="UnauthorizedClientException",o5="UnsupportedGrantTypeException",n5="accessToken",vo="client",s5="clientId",i5="clientSecret",a5="codeVerifier",c5="code",d5="deviceCode",Be="error",l5="expiresIn",ao="error_description",p5="grantType",u5="http",co="httpError",f5="idToken",GA="reason",jA="refreshToken",m5="redirectUri",h5="scope",g5="server",WA="smithy.ts.sdk.synthetic.com.amazonaws.ssooidc",x5="tokenType",be="com.amazonaws.ssooidc",y5=[0,be,HB,8,0],S5=[0,be,VB,8,0],E5=[0,be,zB,8,0],_5=[0,be,ZB,8,0],zA=[0,be,e5,8,0],KA=[-3,be,FB,{[Be]:vo,[co]:400},[Be,GA,ao],[0,0,0]];w.for(be).registerError(KA,qa);qA=[-3,be,BB,{[Be]:vo,[co]:400},[Be,ao],[0,0]];w.for(be).registerError(qA,Ja);JA=[3,be,jB,0,[s5,i5,p5,d5,c5,jA,h5,m5,a5],[0,[()=>S5,0],0,0,0,[()=>zA,0],64,0,[()=>E5,0]]],YA=[3,be,WB,0,[n5,x5,l5,jA,f5],[[()=>y5,0],0,1,[()=>zA,0],[()=>_5,0]]],XA=[-3,be,KB,{[Be]:vo,[co]:400},[Be,ao],[0,0]];w.for(be).registerError(XA,Ya);QA=[-3,be,XB,{[Be]:g5,[co]:500},[Be,ao],[0,0]];w.for(be).registerError(QA,Xa);ZA=[-3,be,qB,{[Be]:vo,[co]:401},[Be,ao],[0,0]];w.for(be).registerError(ZA,Qa);eP=[-3,be,JB,{[Be]:vo,[co]:400},[Be,ao],[0,0]];w.for(be).registerError(eP,Za);tP=[-3,be,YB,{[Be]:vo,[co]:400},[Be,GA,ao],[0,0,0]];w.for(be).registerError(tP,ec);rP=[-3,be,QB,{[Be]:vo,[co]:400},[Be,ao],[0,0]];w.for(be).registerError(rP,tc);oP=[-3,be,t5,{[Be]:vo,[co]:400},[Be,ao],[0,0]];w.for(be).registerError(oP,rc);nP=[-3,be,r5,{[Be]:vo,[co]:400},[Be,ao],[0,0]];w.for(be).registerError(nP,oc);sP=[-3,be,o5,{[Be]:vo,[co]:400},[Be,ao],[0,0]];w.for(be).registerError(sP,nc);iP=[-3,WA,"SSOOIDCServiceException",0,[],[]];w.for(WA).registerError(iP,ot);ng=[9,be,GB,{[u5]:["POST","/token",200]},()=>JA,()=>YA]});var sc,ig=d(()=>{Ue();F();Xh();sg();sc=class extends Y.classBuilder().ep(JC).m(function(t,r,o,n){return[he(o,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").sc(ng).build(){}});var b5,Rp,aP=d(()=>{F();ig();rg();b5={CreateTokenCommand:sc},Rp=class extends za{};Rn(b5,Rp)});var cP=d(()=>{ig()});var w5,R5,dP=d(()=>{w5={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},R5={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"}});var lP=d(()=>{});var ag={};zt(ag,{$Command:()=>Y,AccessDeniedException:()=>qa,AccessDeniedException$:()=>KA,AccessDeniedExceptionReason:()=>w5,AuthorizationPendingException:()=>Ja,AuthorizationPendingException$:()=>qA,CreateToken$:()=>ng,CreateTokenCommand:()=>sc,CreateTokenRequest$:()=>JA,CreateTokenResponse$:()=>YA,ExpiredTokenException:()=>Ya,ExpiredTokenException$:()=>XA,InternalServerException:()=>Xa,InternalServerException$:()=>QA,InvalidClientException:()=>Qa,InvalidClientException$:()=>ZA,InvalidGrantException:()=>Za,InvalidGrantException$:()=>eP,InvalidRequestException:()=>ec,InvalidRequestException$:()=>tP,InvalidRequestExceptionReason:()=>R5,InvalidScopeException:()=>tc,InvalidScopeException$:()=>rP,SSOOIDC:()=>Rp,SSOOIDCClient:()=>za,SSOOIDCServiceException:()=>ot,SSOOIDCServiceException$:()=>iP,SlowDownException:()=>rc,SlowDownException$:()=>oP,UnauthorizedClientException:()=>oc,UnauthorizedClientException$:()=>nP,UnsupportedGrantTypeException:()=>nc,UnsupportedGrantTypeException$:()=>sP,__Client:()=>Ze});var cg=d(()=>{rg();aP();cP();sg();dP();og();lP();wp()});var pP,uP=d(()=>{pP=async(e,t={},r)=>{let{SSOOIDCClient:o}=await Promise.resolve().then(()=>(cg(),ag)),n=i=>t.clientConfig?.[i]??t.parentClientConfig?.[i]??r?.[i];return new o(Object.assign({},t.clientConfig??{},{region:e??t.clientConfig?.region,logger:n("logger"),userAgentAppId:n("userAgentAppId")}))}});var fP,mP=d(()=>{uP();fP=async(e,t,r={},o)=>{let{CreateTokenCommand:n}=await Promise.resolve().then(()=>(cg(),ag));return(await pP(t,r,o)).send(new n({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}))}});var dg,hP=d(()=>{Ie();_p();dg=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new Rr(`Token is expired. ${ki}`,!1)}});var Mn,gP=d(()=>{Ie();_p();Mn=(e,t,r=!1)=>{if(typeof t>"u")throw new Rr(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${ki}`,!1)}});import{promises as I5}from"fs";var T5,xP,yP=d(()=>{vt();({writeFile:T5}=I5),xP=(e,t)=>{let r=ul(e),o=JSON.stringify(t,null,2);return T5(r,o)}});var SP,EP,_P=d(()=>{Ie();vt();_p();mP();hP();gP();yP();SP=new Date(0),EP=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/token-providers - fromSso");let r=await Io(e),o=Ft({profile:e.profile??t?.profile}),n=r[o];if(n){if(!n.sso_session)throw new Rr(`Profile '${o}' is missing required property 'sso_session'.`)}else throw new Rr(`Profile '${o}' could not be found in shared credentials file.`,!1);let s=n.sso_session,a=(await xl(e))[s];if(!a)throw new Rr(`Sso session '${s}' could not be found in shared credentials file.`,!1);for(let x of["sso_start_url","sso_region"])if(!a[x])throw new Rr(`Sso session '${s}' is missing required property '${x}'.`,!1);let c=a.sso_start_url,l=a.sso_region,p;try{p=await Na(s)}catch{throw new Rr(`The SSO session token associated with profile=${o} was not found or is invalid. ${ki}`,!1)}Mn("accessToken",p.accessToken),Mn("expiresAt",p.expiresAt);let{accessToken:u,expiresAt:f}=p,m={token:u,expiration:new Date(f)};if(m.expiration.getTime()-Date.now()>3e5)return m;if(Date.now()-SP.getTime()<30*1e3)return dg(m),m;Mn("clientId",p.clientId,!0),Mn("clientSecret",p.clientSecret,!0),Mn("refreshToken",p.refreshToken,!0);try{SP.setTime(Date.now());let x=await fP(p,l,e,t);Mn("accessToken",x.accessToken),Mn("expiresIn",x.expiresIn);let E=new Date(Date.now()+x.expiresIn*1e3);try{await xP(s,{...p,accessToken:x.accessToken,expiresAt:E.toISOString(),refreshToken:x.refreshToken})}catch{}return{token:x.accessToken,expiration:E}}catch{return dg(m),m}}});var bP=d(()=>{});var wP=d(()=>{});var RP=d(()=>{jC();_P();bP();wP()});function C5(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function Ip(e){return{schemeId:"smithy.api#noAuth"}}var IP,TP,vP,lg=d(()=>{je();ft();IP=async(e,t,r)=>({operation:Fe(t).operation,region:await Ee(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});TP=e=>{let t=[];switch(e.operation){case"GetRoleCredentials":{t.push(Ip(e));break}case"ListAccountRoles":{t.push(Ip(e));break}case"ListAccounts":{t.push(Ip(e));break}case"Logout":{t.push(Ip(e));break}default:t.push(C5(e))}return t},vP=e=>{let t=Ir(e);return Object.assign(t,{authSchemePreference:Ee(e.authSchemePreference??[])})}});var CP,Ln,Fi=d(()=>{CP=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),Ln={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var PP,AP=d(()=>{PP={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.958.0",scripts:{build:"concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":'yarn g:turbo run build -F="$npm_package_name"',"build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso","test:index":"tsc --noEmit ./test/index-types.ts && node ./test/index-objects.spec.mjs"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.957.0","@aws-sdk/middleware-host-header":"3.957.0","@aws-sdk/middleware-logger":"3.957.0","@aws-sdk/middleware-recursion-detection":"3.957.0","@aws-sdk/middleware-user-agent":"3.957.0","@aws-sdk/region-config-resolver":"3.957.0","@aws-sdk/types":"3.957.0","@aws-sdk/util-endpoints":"3.957.0","@aws-sdk/util-user-agent-browser":"3.957.0","@aws-sdk/util-user-agent-node":"3.957.0","@smithy/config-resolver":"^4.4.5","@smithy/core":"^3.20.0","@smithy/fetch-http-handler":"^5.3.8","@smithy/hash-node":"^4.2.7","@smithy/invalid-dependency":"^4.2.7","@smithy/middleware-content-length":"^4.2.7","@smithy/middleware-endpoint":"^4.4.1","@smithy/middleware-retry":"^4.4.17","@smithy/middleware-serde":"^4.2.8","@smithy/middleware-stack":"^4.2.7","@smithy/node-config-provider":"^4.3.7","@smithy/node-http-handler":"^4.4.7","@smithy/protocol-http":"^5.3.7","@smithy/smithy-client":"^4.10.2","@smithy/types":"^4.11.0","@smithy/url-parser":"^4.2.7","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.16","@smithy/util-defaults-mode-node":"^4.2.19","@smithy/util-endpoints":"^3.2.7","@smithy/util-middleware":"^4.2.7","@smithy/util-retry":"^4.2.7","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var BP,Qr,Zr,Vi,DP,ic,Bi,Hi,sn,pg,ug,NP,OP,kP,HP,VP,Xr,$P,GP,MP,LP,UP,FP,P5,jP,WP=d(()=>{BP="required",Qr="fn",Zr="argv",Vi="ref",DP="isSet",ic="booleanEquals",Bi="error",Hi="endpoint",sn="tree",pg="PartitionResult",ug="getAttr",NP={[BP]:!1,type:"string"},OP={[BP]:!0,default:!1,type:"boolean"},kP={[Vi]:"Endpoint"},HP={[Qr]:ic,[Zr]:[{[Vi]:"UseFIPS"},!0]},VP={[Qr]:ic,[Zr]:[{[Vi]:"UseDualStack"},!0]},Xr={},$P={[Qr]:ug,[Zr]:[{[Vi]:pg},"supportsFIPS"]},GP={[Vi]:pg},MP={[Qr]:ic,[Zr]:[!0,{[Qr]:ug,[Zr]:[GP,"supportsDualStack"]}]},LP=[HP],UP=[VP],FP=[{[Vi]:"Region"}],P5={version:"1.0",parameters:{Region:NP,UseDualStack:OP,UseFIPS:OP,Endpoint:NP},rules:[{conditions:[{[Qr]:DP,[Zr]:[kP]}],rules:[{conditions:LP,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Bi},{conditions:UP,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Bi},{endpoint:{url:kP,properties:Xr,headers:Xr},type:Hi}],type:sn},{conditions:[{[Qr]:DP,[Zr]:FP}],rules:[{conditions:[{[Qr]:"aws.partition",[Zr]:FP,assign:pg}],rules:[{conditions:[HP,VP],rules:[{conditions:[{[Qr]:ic,[Zr]:[!0,$P]},MP],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Xr,headers:Xr},type:Hi}],type:sn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Bi}],type:sn},{conditions:LP,rules:[{conditions:[{[Qr]:ic,[Zr]:[$P,!0]}],rules:[{conditions:[{[Qr]:"stringEquals",[Zr]:[{[Qr]:ug,[Zr]:[GP,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:Xr,headers:Xr},type:Hi},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Xr,headers:Xr},type:Hi}],type:sn},{error:"FIPS is enabled but this partition does not support FIPS",type:Bi}],type:sn},{conditions:UP,rules:[{conditions:[MP],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Xr,headers:Xr},type:Hi}],type:sn},{error:"DualStack is enabled but this partition does not support DualStack",type:Bi}],type:sn},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Xr,headers:Xr},type:Hi}],type:sn}],type:sn},{error:"Invalid Configuration: Missing Region",type:Bi}]},jP=P5});var D5,zP,KP=d(()=>{_n();io();WP();D5=new Mt({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),zP=(e,t={})=>D5.get(e,()=>Er(jP,{endpointParams:e,logger:t.logger}));st.aws=qt});var qP,JP=d(()=>{je();tn();Qe();F();en();mt();He();lg();KP();qP=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??Le,base64Encoder:e?.base64Encoder??Ne,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??zP,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??TP,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new at},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new gr}],logger:e?.logger??new xt,protocol:e?.protocol??vn,protocolSettings:e?.protocolSettings??{defaultNamespace:"com.amazonaws.sso",version:"2019-06-10",serviceTarget:"SWBPortalService"},serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??rt,utf8Decoder:e?.utf8Decoder??Oe,utf8Encoder:e?.utf8Encoder??De})});var YP,XP=d(()=>{AP();je();Ps();Tt();Ds();Qt();Mr();qo();F();Ns();Os();on();JP();YP=e=>{vr(process.version);let t=Wr(e),r=()=>t().then(Tr),o=qP(e);_r(process.version);let n={profile:e?.profile,logger:o.logger};return{...o,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??L(br,n),bodyLengthChecker:e?.bodyLengthChecker??jr,defaultUserAgentProvider:e?.defaultUserAgentProvider??Vr({serviceId:o.serviceId,clientVersion:PP.version}),maxAttempts:e?.maxAttempts??L(Ur,e),region:e?.region??L(yt,{...Ut,...n}),requestHandler:ht.create(e?.requestHandler??r),retryMode:e?.retryMode??L({...Br,default:async()=>(await r()).retryMode||Bt},e),sha256:e?.sha256??Vt.bind(null,"sha256"),streamCollector:e?.streamCollector??Dt,useDualstackEndpoint:e?.useDualstackEndpoint??L(Nr,n),useFipsEndpoint:e?.useFipsEndpoint??L(Or,n),userAgentAppId:e?.userAgentAppId??L(Gr,n)}}});var QP,ZP,eD=d(()=>{QP=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,o=e.credentials;return{setHttpAuthScheme(n){let s=t.findIndex(i=>i.schemeId===n.schemeId);s===-1?t.push(n):t.splice(s,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){o=n},credentials(){return o}}},ZP=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var tD,rD=d(()=>{$n();$e();F();eD();tD=(e,t)=>{let r=Object.assign(Jr(e),Cr(e),ir(e),QP(e));return t.forEach(o=>o.configure(r)),Object.assign(e,Yr(r),Ar(r),ar(r),ZP(r))}});var Co,ac=d(()=>{ps();us();fs();An();Tt();Qe();ye();Rs();Ue();Qt();F();lg();Fi();XP();rD();Co=class extends Ze{config;constructor(...[t]){let r=YP(t||{});super(r),this.initConfig=r;let o=CP(r),n=xr(o),s=Fr(n),i=kr(s),a=i,c=Lr(a),l=vP(c),p=tD(l,t?.extensions||[]);this.config=p,this.middlewareStack.use(mr(this.config)),this.middlewareStack.use(Dr(this.config)),this.middlewareStack.use(Hr(this.config)),this.middlewareStack.use($r(this.config)),this.middlewareStack.use(dr(this.config)),this.middlewareStack.use(lr(this.config)),this.middlewareStack.use(pr(this.config)),this.middlewareStack.use(ur(this.config,{httpAuthSchemeParametersProvider:IP,identityProviderConfigProvider:async u=>new $t({"aws.auth#sigv4":u.credentials})})),this.middlewareStack.use(fr(this.config))}destroy(){super.destroy()}}});var an,fg=d(()=>{F();an=class e extends Lt{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var Tp,vp,Cp,Ap,mg=d(()=>{fg();Tp=class e extends an{name="InvalidRequestException";$fault="client";constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},vp=class e extends an{name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Cp=class e extends an{name="TooManyRequestsException";$fault="client";constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ap=class e extends an{name="UnauthorizedException";$fault="client";constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}}});var N5,O5,k5,$5,M5,L5,U5,F5,B5,H5,V5,G5,j5,W5,z5,K5,q5,J5,Y5,X5,Q5,Z5,e9,Pp,t9,r9,o9,Dp,oD,Np,Op,n9,s9,kp,$p,Mp,ks,Lp,nD,sD,Up,iD,i9,a9,aD,c9,cD,d9,l9,Fp,Pe,Bp,p9,u9,f9,m9,h9,g9,x9,y9,S9,E9,_9,b9,w9,R9,I9,T9,v9,C9,A9,P9,dD,lD,pD,uD,Gi=d(()=>{ye();mg();fg();N5="AccountInfo",O5="AccountListType",k5="AccessTokenType",$5="GetRoleCredentials",M5="GetRoleCredentialsRequest",L5="GetRoleCredentialsResponse",U5="InvalidRequestException",F5="Logout",B5="ListAccounts",H5="ListAccountsRequest",V5="ListAccountRolesRequest",G5="ListAccountRolesResponse",j5="ListAccountsResponse",W5="ListAccountRoles",z5="LogoutRequest",K5="RoleCredentials",q5="RoleInfo",J5="RoleListType",Y5="ResourceNotFoundException",X5="SecretAccessKeyType",Q5="SessionTokenType",Z5="TooManyRequestsException",e9="UnauthorizedException",Pp="accountId",t9="accessKeyId",r9="accountList",o9="accountName",Dp="accessToken",oD="account_id",Np="client",Op="error",n9="emailAddress",s9="expiration",kp="http",$p="httpError",Mp="httpHeader",ks="httpQuery",Lp="message",nD="maxResults",sD="max_result",Up="nextToken",iD="next_token",i9="roleCredentials",a9="roleList",aD="roleName",c9="role_name",cD="smithy.ts.sdk.synthetic.com.amazonaws.sso",d9="secretAccessKey",l9="sessionToken",Fp="x-amz-sso_bearer_token",Pe="com.amazonaws.sso",Bp=[0,Pe,k5,8,0],p9=[0,Pe,X5,8,0],u9=[0,Pe,Q5,8,0],f9=[3,Pe,N5,0,[Pp,o9,n9],[0,0,0]],m9=[3,Pe,M5,0,[aD,Pp,Dp],[[0,{[ks]:c9}],[0,{[ks]:oD}],[()=>Bp,{[Mp]:Fp}]]],h9=[3,Pe,L5,0,[i9],[[()=>w9,0]]],g9=[-3,Pe,U5,{[Op]:Np,[$p]:400},[Lp],[0]];w.for(Pe).registerError(g9,Tp);x9=[3,Pe,V5,0,[Up,nD,Dp,Pp],[[0,{[ks]:iD}],[1,{[ks]:sD}],[()=>Bp,{[Mp]:Fp}],[0,{[ks]:oD}]]],y9=[3,Pe,G5,0,[Up,a9],[0,()=>P9]],S9=[3,Pe,H5,0,[Up,nD,Dp],[[0,{[ks]:iD}],[1,{[ks]:sD}],[()=>Bp,{[Mp]:Fp}]]],E9=[3,Pe,j5,0,[Up,r9],[0,()=>A9]],_9=[3,Pe,z5,0,[Dp],[[()=>Bp,{[Mp]:Fp}]]],b9=[-3,Pe,Y5,{[Op]:Np,[$p]:404},[Lp],[0]];w.for(Pe).registerError(b9,vp);w9=[3,Pe,K5,0,[t9,d9,l9,s9],[0,[()=>p9,0],[()=>u9,0],1]],R9=[3,Pe,q5,0,[aD,Pp],[0,0]],I9=[-3,Pe,Z5,{[Op]:Np,[$p]:429},[Lp],[0]];w.for(Pe).registerError(I9,Cp);T9=[-3,Pe,e9,{[Op]:Np,[$p]:401},[Lp],[0]];w.for(Pe).registerError(T9,Ap);v9="unit",C9=[-3,cD,"SSOServiceException",0,[],[]];w.for(cD).registerError(C9,an);A9=[1,Pe,O5,0,()=>f9],P9=[1,Pe,J5,0,()=>R9],dD=[9,Pe,$5,{[kp]:["GET","/federation/credentials",200]},()=>m9,()=>h9],lD=[9,Pe,W5,{[kp]:["GET","/assignment/roles",200]},()=>x9,()=>y9],pD=[9,Pe,B5,{[kp]:["GET","/assignment/accounts",200]},()=>S9,()=>E9],uD=[9,Pe,F5,{[kp]:["POST","/logout",200]},()=>_9,()=>v9]});var ji,hg=d(()=>{Ue();F();Fi();Gi();ji=class extends Y.classBuilder().ep(Ln).m(function(t,r,o,n){return[he(o,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").sc(dD).build(){}});var Wi,Hp=d(()=>{Ue();F();Fi();Gi();Wi=class extends Y.classBuilder().ep(Ln).m(function(t,r,o,n){return[he(o,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").sc(lD).build(){}});var zi,Vp=d(()=>{Ue();F();Fi();Gi();zi=class extends Y.classBuilder().ep(Ln).m(function(t,r,o,n){return[he(o,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").sc(pD).build(){}});var Gp,gg=d(()=>{Ue();F();Fi();Gi();Gp=class extends Y.classBuilder().ep(Ln).m(function(t,r,o,n){return[he(o,t.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").sc(uD).build(){}});var D9,xg,fD=d(()=>{F();hg();Hp();Vp();gg();ac();D9={GetRoleCredentialsCommand:ji,ListAccountRolesCommand:Wi,ListAccountsCommand:zi,LogoutCommand:Gp},xg=class extends Co{};Rn(D9,xg)});var mD=d(()=>{hg();Hp();Vp();gg()});var hD=d(()=>{});var Kye,gD=d(()=>{Qe();Hp();ac();Kye=zo(Co,Wi,"nextToken","nextToken","maxResults")});var Qye,xD=d(()=>{Qe();Vp();ac();Qye=zo(Co,zi,"nextToken","nextToken","maxResults")});var yD=d(()=>{hD();gD();xD()});var SD=d(()=>{});var ED=d(()=>{ac();fD();mD();Gi();yD();mg();SD()});var _D={};zt(_D,{GetRoleCredentialsCommand:()=>ji,SSOClient:()=>Co});var bD=d(()=>{ED()});var cc,yg,wD=d(()=>{it();RP();Ie();vt();cc=!1,yg=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:o,ssoRoleName:n,ssoClient:s,clientConfig:i,parentClientConfig:a,callerClientConfig:c,profile:l,filepath:p,configFilepath:u,ignoreCache:f,logger:m})=>{let x,E="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let y=await EP({profile:l,filepath:p,configFilepath:u,ignoreCache:f})();x={accessToken:y.token,expiresAt:new Date(y.expiration).toISOString()}}catch(y){throw new $(y.message,{tryNextLink:cc,logger:m})}else try{x=await Na(e)}catch{throw new $(`The SSO session associated with this profile is invalid. ${E}`,{tryNextLink:cc,logger:m})}if(new Date(x.expiresAt).getTime()-Date.now()<=0)throw new $(`The SSO session associated with this profile has expired. ${E}`,{tryNextLink:cc,logger:m});let{accessToken:T}=x,{SSOClient:A,GetRoleCredentialsCommand:O}=await Promise.resolve().then(()=>(bD(),_D)),ie=s||new A(Object.assign({},i??{},{logger:i?.logger??c?.logger??a?.logger,region:i?.region??o,userAgentAppId:i?.userAgentAppId??c?.userAgentAppId??a?.userAgentAppId})),ae;try{ae=await ie.send(new O({accountId:r,roleName:n,accessToken:T}))}catch(y){throw new $(y,{tryNextLink:cc,logger:m})}let{roleCredentials:{accessKeyId:ve,secretAccessKey:qe,sessionToken:Lo,expiration:Re,credentialScope:pt,accountId:R}={}}=ae;if(!ve||!qe||!Lo||!Re)throw new $("SSO returns an invalid temporary credential.",{tryNextLink:cc,logger:m});let _={accessKeyId:ve,secretAccessKey:qe,sessionToken:Lo,expiration:new Date(Re),...pt&&{credentialScope:pt},...R&&{accountId:R}};return t?oe(_,"CREDENTIALS_SSO","s"):oe(_,"CREDENTIALS_SSO_LEGACY","u"),_}});var Sg,Eg=d(()=>{Ie();Sg=(e,t)=>{let{sso_start_url:r,sso_account_id:o,sso_region:n,sso_role_name:s}=e;if(!r||!o||!n||!s)throw new $(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:t});return e}});var N9,RD=d(()=>{Ie();vt();Jh();wD();Eg();N9=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:o,ssoRegion:n,ssoRoleName:s,ssoSession:i}=e,{ssoClient:a}=e,c=Ft({profile:e.profile??t?.profile});if(!r&&!o&&!n&&!s&&!i){let p=(await Io(e))[c];if(!p)throw new $(`Profile ${c} was not found.`,{logger:e.logger});if(!qh(p))throw new $(`Profile ${c} is not configured with SSO credentials.`,{logger:e.logger});if(p?.sso_session){let A=(await xl(e))[p.sso_session],O=` configurations in profile ${c} and sso-session ${p.sso_session}`;if(n&&n!==A.sso_region)throw new $("Conflicting SSO region"+O,{tryNextLink:!1,logger:e.logger});if(r&&r!==A.sso_start_url)throw new $("Conflicting SSO start_url"+O,{tryNextLink:!1,logger:e.logger});p.sso_region=A.sso_region,p.sso_start_url=A.sso_start_url}let{sso_start_url:u,sso_account_id:f,sso_region:m,sso_role_name:x,sso_session:E}=Sg(p,e.logger);return yg({ssoStartUrl:u,ssoSession:E,ssoAccountId:f,ssoRegion:m,ssoRoleName:x,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,callerClientConfig:e.callerClientConfig,profile:c,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}else{if(!r||!o||!n||!s)throw new $('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:e.logger});return yg({ssoStartUrl:r,ssoSession:i,ssoAccountId:o,ssoRegion:n,ssoRoleName:s,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,callerClientConfig:e.callerClientConfig,profile:c,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}}});var ID=d(()=>{});var _g={};zt(_g,{fromSSO:()=>N9,isSsoProfile:()=>qh,validateSsoProfile:()=>Sg});var bg=d(()=>{RD();Jh();ID();Eg()});var TD,wg,vD=d(()=>{it();Ie();TD=(e,t,r)=>{let o={EcsContainer:async n=>{let{fromHttp:s}=await Promise.resolve().then(()=>(Kh(),zh)),{fromContainerMetadata:i}=await Promise.resolve().then(()=>(ja(),Ga));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>Si(s(n??{}),i(n))().then(wg)},Ec2InstanceMetadata:async n=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:s}=await Promise.resolve().then(()=>(ja(),Ga));return async()=>s(n)().then(wg)},Environment:async n=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:s}=await Promise.resolve().then(()=>(Lh(),xC));return async()=>s(n)().then(wg)}};if(e in o)return o[e];throw new $(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},wg=e=>oe(e,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p")});function O9(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function k9(e){return{schemeId:"smithy.api#noAuth"}}var CD,AD,$9,PD,Rg=d(()=>{je();ft();dc();CD=async(e,t,r)=>({operation:Fe(t).operation,region:await Ee(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});AD=e=>{let t=[];switch(e.operation){case"AssumeRoleWithWebIdentity":{t.push(k9(e));break}default:t.push(O9(e))}return t},$9=e=>Object.assign(e,{stsClientCtor:Ao}),PD=e=>{let t=$9(e),r=Ir(t);return Object.assign(r,{authSchemePreference:Ee(e.authSchemePreference??[])})}});var DD,jp,Wp=d(()=>{DD=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),jp={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var VD,q,ge,xe,Fn,Un,ct,GD,jD,WD,Me,ND,Po,Ki,Tg,OD,Ig,zD,kD,dt,$D,KD,qD,St,Zt,MD,JD,YD,LD,XD,UD,FD,BD,HD,M9,QD,ZD=d(()=>{VD="required",q="type",ge="fn",xe="argv",Fn="ref",Un="booleanEquals",ct="stringEquals",GD="sigv4",jD="sts",WD="us-east-1",Me="endpoint",ND="https://sts.{Region}.{PartitionResult#dnsSuffix}",Po="tree",Ki="error",Tg="getAttr",OD={[VD]:!1,[q]:"string"},Ig={[VD]:!0,default:!1,[q]:"boolean"},zD={[Fn]:"Endpoint"},kD={[ge]:"isSet",[xe]:[{[Fn]:"Region"}]},dt={[Fn]:"Region"},$D={[ge]:"aws.partition",[xe]:[dt],assign:"PartitionResult"},KD={[Fn]:"UseFIPS"},qD={[Fn]:"UseDualStack"},St={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:GD,signingName:jD,signingRegion:WD}]},headers:{}},Zt={},MD={conditions:[{[ge]:ct,[xe]:[dt,"aws-global"]}],[Me]:St,[q]:Me},JD={[ge]:Un,[xe]:[KD,!0]},YD={[ge]:Un,[xe]:[qD,!0]},LD={[ge]:Tg,[xe]:[{[Fn]:"PartitionResult"},"supportsFIPS"]},XD={[Fn]:"PartitionResult"},UD={[ge]:Un,[xe]:[!0,{[ge]:Tg,[xe]:[XD,"supportsDualStack"]}]},FD=[{[ge]:"isSet",[xe]:[zD]}],BD=[JD],HD=[YD],M9={version:"1.0",parameters:{Region:OD,UseDualStack:Ig,UseFIPS:Ig,Endpoint:OD,UseGlobalEndpoint:Ig},rules:[{conditions:[{[ge]:Un,[xe]:[{[Fn]:"UseGlobalEndpoint"},!0]},{[ge]:"not",[xe]:FD},kD,$D,{[ge]:Un,[xe]:[KD,!1]},{[ge]:Un,[xe]:[qD,!1]}],rules:[{conditions:[{[ge]:ct,[xe]:[dt,"ap-northeast-1"]}],endpoint:St,[q]:Me},{conditions:[{[ge]:ct,[xe]:[dt,"ap-south-1"]}],endpoint:St,[q]:Me},{conditions:[{[ge]:ct,[xe]:[dt,"ap-southeast-1"]}],endpoint:St,[q]:Me},{conditions:[{[ge]:ct,[xe]:[dt,"ap-southeast-2"]}],endpoint:St,[q]:Me},MD,{conditions:[{[ge]:ct,[xe]:[dt,"ca-central-1"]}],endpoint:St,[q]:Me},{conditions:[{[ge]:ct,[xe]:[dt,"eu-central-1"]}],endpoint:St,[q]:Me},{conditions:[{[ge]:ct,[xe]:[dt,"eu-north-1"]}],endpoint:St,[q]:Me},{conditions:[{[ge]:ct,[xe]:[dt,"eu-west-1"]}],endpoint:St,[q]:Me},{conditions:[{[ge]:ct,[xe]:[dt,"eu-west-2"]}],endpoint:St,[q]:Me},{conditions:[{[ge]:ct,[xe]:[dt,"eu-west-3"]}],endpoint:St,[q]:Me},{conditions:[{[ge]:ct,[xe]:[dt,"sa-east-1"]}],endpoint:St,[q]:Me},{conditions:[{[ge]:ct,[xe]:[dt,WD]}],endpoint:St,[q]:Me},{conditions:[{[ge]:ct,[xe]:[dt,"us-east-2"]}],endpoint:St,[q]:Me},{conditions:[{[ge]:ct,[xe]:[dt,"us-west-1"]}],endpoint:St,[q]:Me},{conditions:[{[ge]:ct,[xe]:[dt,"us-west-2"]}],endpoint:St,[q]:Me},{endpoint:{url:ND,properties:{authSchemes:[{name:GD,signingName:jD,signingRegion:"{Region}"}]},headers:Zt},[q]:Me}],[q]:Po},{conditions:FD,rules:[{conditions:BD,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[q]:Ki},{conditions:HD,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[q]:Ki},{endpoint:{url:zD,properties:Zt,headers:Zt},[q]:Me}],[q]:Po},{conditions:[kD],rules:[{conditions:[$D],rules:[{conditions:[JD,YD],rules:[{conditions:[{[ge]:Un,[xe]:[!0,LD]},UD],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Zt,headers:Zt},[q]:Me}],[q]:Po},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[q]:Ki}],[q]:Po},{conditions:BD,rules:[{conditions:[{[ge]:Un,[xe]:[LD,!0]}],rules:[{conditions:[{[ge]:ct,[xe]:[{[ge]:Tg,[xe]:[XD,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:Zt,headers:Zt},[q]:Me},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Zt,headers:Zt},[q]:Me}],[q]:Po},{error:"FIPS is enabled but this partition does not support FIPS",[q]:Ki}],[q]:Po},{conditions:HD,rules:[{conditions:[UD],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Zt,headers:Zt},[q]:Me}],[q]:Po},{error:"DualStack is enabled but this partition does not support DualStack",[q]:Ki}],[q]:Po},MD,{endpoint:{url:ND,properties:Zt,headers:Zt},[q]:Me}],[q]:Po}],[q]:Po},{error:"Invalid Configuration: Missing Region",[q]:Ki}]},QD=M9});var L9,eN,tN=d(()=>{_n();io();ZD();L9=new Mt({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),eN=(e,t={})=>L9.get(e,()=>Er(QD,{endpointParams:e,logger:t.logger}));st.aws=qt});var rN,oN=d(()=>{je();tn();Qe();F();en();mt();He();Rg();tN();rN=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??Le,base64Encoder:e?.base64Encoder??Ne,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??eN,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??AD,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new at},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new gr}],logger:e?.logger??new xt,protocol:e?.protocol??Ti,protocolSettings:e?.protocolSettings??{defaultNamespace:"com.amazonaws.sts",xmlNamespace:"https://sts.amazonaws.com/doc/2011-06-15/",version:"2011-06-15",serviceTarget:"AWSSecurityTokenServiceV20110615"},serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??rt,utf8Decoder:e?.utf8Decoder??Oe,utf8Encoder:e?.utf8Encoder??De})});var nN,sN=d(()=>{bp();je();Ps();Tt();Qe();Ds();Qt();Mr();qo();F();Ns();Os();on();oN();nN=e=>{vr(process.version);let t=Wr(e),r=()=>t().then(Tr),o=rN(e);_r(process.version);let n={profile:e?.profile,logger:o.logger};return{...o,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??L(br,n),bodyLengthChecker:e?.bodyLengthChecker??jr,defaultUserAgentProvider:e?.defaultUserAgentProvider??Vr({serviceId:o.serviceId,clientVersion:$i.version}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:s=>s.getIdentityProvider("aws.auth#sigv4")||(async i=>await e.credentialDefaultProvider(i?.__config||{})()),signer:new at},{schemeId:"smithy.api#noAuth",identityProvider:s=>s.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new gr}],maxAttempts:e?.maxAttempts??L(Ur,e),region:e?.region??L(yt,{...Ut,...n}),requestHandler:ht.create(e?.requestHandler??r),retryMode:e?.retryMode??L({...Br,default:async()=>(await r()).retryMode||Bt},e),sha256:e?.sha256??Vt.bind(null,"sha256"),streamCollector:e?.streamCollector??Dt,useDualstackEndpoint:e?.useDualstackEndpoint??L(Nr,n),useFipsEndpoint:e?.useFipsEndpoint??L(Or,n),userAgentAppId:e?.userAgentAppId??L(Gr,n)}}});var iN,aN,cN=d(()=>{iN=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,o=e.credentials;return{setHttpAuthScheme(n){let s=t.findIndex(i=>i.schemeId===n.schemeId);s===-1?t.push(n):t.splice(s,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){o=n},credentials(){return o}}},aN=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var dN,lN=d(()=>{$n();$e();F();cN();dN=(e,t)=>{let r=Object.assign(Jr(e),Cr(e),ir(e),iN(e));return t.forEach(o=>o.configure(r)),Object.assign(e,Yr(r),Ar(r),ar(r),aN(r))}});var Ao,dc=d(()=>{ps();us();fs();An();Tt();Qe();ye();Rs();Ue();Qt();F();Rg();Wp();sN();lN();Ao=class extends Ze{config;constructor(...[t]){let r=nN(t||{});super(r),this.initConfig=r;let o=DD(r),n=xr(o),s=Fr(n),i=kr(s),a=i,c=Lr(a),l=PD(c),p=dN(l,t?.extensions||[]);this.config=p,this.middlewareStack.use(mr(this.config)),this.middlewareStack.use(Dr(this.config)),this.middlewareStack.use(Hr(this.config)),this.middlewareStack.use($r(this.config)),this.middlewareStack.use(dr(this.config)),this.middlewareStack.use(lr(this.config)),this.middlewareStack.use(pr(this.config)),this.middlewareStack.use(ur(this.config,{httpAuthSchemeParametersProvider:CD,identityProviderConfigProvider:async u=>new $t({"aws.auth#sigv4":u.credentials})})),this.middlewareStack.use(fr(this.config))}destroy(){super.destroy()}}});var Gt,zp=d(()=>{F();Gt=class e extends Lt{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var lc,pc,uc,fc,mc,hc,gc,vg=d(()=>{zp();lc=class e extends Gt{name="ExpiredTokenException";$fault="client";constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},pc=class e extends Gt{name="MalformedPolicyDocumentException";$fault="client";constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},uc=class e extends Gt{name="PackedPolicyTooLargeException";$fault="client";constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},fc=class e extends Gt{name="RegionDisabledException";$fault="client";constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},mc=class e extends Gt{name="IDPRejectedClaimException";$fault="client";constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},hc=class e extends Gt{name="InvalidIdentityTokenException";$fault="client";constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},gc=class e extends Gt{name="IDPCommunicationErrorException";$fault="client";constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}}});var U9,F9,B9,H9,V9,G9,Cg,j9,W9,z9,K9,Ag,q9,pN,J9,Y9,X9,Q9,Z9,e8,t8,r8,uN,fN,o8,n8,s8,i8,a8,c8,mN,d8,l8,hN,p8,gN,u8,f8,Pg,m8,h8,g8,x8,y8,S8,E8,_8,b8,w8,$s,Ms,R8,Ls,Us,Fs,I8,xN,T8,we,v8,C8,Dg,yN,SN,EN,_N,Ng,bN,wN,RN,IN,TN,vN,CN,AN,PN,DN,NN,ON,A8,P8,Og,kg,Kp=d(()=>{ye();vg();zp();U9="Arn",F9="AccessKeyId",B9="AssumeRole",H9="AssumedRoleId",V9="AssumeRoleRequest",G9="AssumeRoleResponse",Cg="AssumedRoleUser",j9="AssumeRoleWithWebIdentity",W9="AssumeRoleWithWebIdentityRequest",z9="AssumeRoleWithWebIdentityResponse",K9="Audience",Ag="Credentials",q9="ContextAssertion",pN="DurationSeconds",J9="Expiration",Y9="ExternalId",X9="ExpiredTokenException",Q9="IDPCommunicationErrorException",Z9="IDPRejectedClaimException",e8="InvalidIdentityTokenException",t8="Key",r8="MalformedPolicyDocumentException",uN="Policy",fN="PolicyArns",o8="ProviderArn",n8="ProvidedContexts",s8="ProvidedContextsListType",i8="ProvidedContext",a8="PolicyDescriptorType",c8="ProviderId",mN="PackedPolicySize",d8="PackedPolicyTooLargeException",l8="Provider",hN="RoleArn",p8="RegionDisabledException",gN="RoleSessionName",u8="SecretAccessKey",f8="SubjectFromWebIdentityToken",Pg="SourceIdentity",m8="SerialNumber",h8="SessionToken",g8="Tags",x8="TokenCode",y8="TransitiveTagKeys",S8="Tag",E8="Value",_8="WebIdentityToken",b8="arn",w8="accessKeySecretType",$s="awsQueryError",Ms="client",R8="clientTokenType",Ls="error",Us="httpError",Fs="message",I8="policyDescriptorListType",xN="smithy.ts.sdk.synthetic.com.amazonaws.sts",T8="tagListType",we="com.amazonaws.sts",v8=[0,we,w8,8,0],C8=[0,we,R8,8,0],Dg=[3,we,Cg,0,[H9,U9],[0,0]],yN=[3,we,V9,0,[hN,gN,fN,uN,pN,g8,y8,Y9,m8,x8,Pg,n8],[0,0,()=>ON,0,1,()=>P8,64,0,0,0,0,()=>A8]],SN=[3,we,G9,0,[Ag,Cg,mN,Pg],[[()=>Ng,0],()=>Dg,1,0]],EN=[3,we,W9,0,[hN,gN,_8,c8,fN,uN,pN],[0,0,[()=>C8,0],0,()=>ON,0,1]],_N=[3,we,z9,0,[Ag,f8,Cg,mN,l8,K9,Pg],[[()=>Ng,0],0,()=>Dg,1,0,0,0]],Ng=[3,we,Ag,0,[F9,u8,h8,J9],[0,[()=>v8,0],0,4]],bN=[-3,we,X9,{[$s]:["ExpiredTokenException",400],[Ls]:Ms,[Us]:400},[Fs],[0]];w.for(we).registerError(bN,lc);wN=[-3,we,Q9,{[$s]:["IDPCommunicationError",400],[Ls]:Ms,[Us]:400},[Fs],[0]];w.for(we).registerError(wN,gc);RN=[-3,we,Z9,{[$s]:["IDPRejectedClaim",403],[Ls]:Ms,[Us]:403},[Fs],[0]];w.for(we).registerError(RN,mc);IN=[-3,we,e8,{[$s]:["InvalidIdentityToken",400],[Ls]:Ms,[Us]:400},[Fs],[0]];w.for(we).registerError(IN,hc);TN=[-3,we,r8,{[$s]:["MalformedPolicyDocument",400],[Ls]:Ms,[Us]:400},[Fs],[0]];w.for(we).registerError(TN,pc);vN=[-3,we,d8,{[$s]:["PackedPolicyTooLarge",400],[Ls]:Ms,[Us]:400},[Fs],[0]];w.for(we).registerError(vN,uc);CN=[3,we,a8,0,[b8],[0]],AN=[3,we,i8,0,[o8,q9],[0,0]],PN=[-3,we,p8,{[$s]:["RegionDisabledException",403],[Ls]:Ms,[Us]:403},[Fs],[0]];w.for(we).registerError(PN,fc);DN=[3,we,S8,0,[t8,E8],[0,0]],NN=[-3,xN,"STSServiceException",0,[],[]];w.for(xN).registerError(NN,Gt);ON=[1,we,I8,0,()=>CN],A8=[1,we,s8,0,()=>AN],P8=[1,we,T8,0,()=>DN],Og=[9,we,B9,0,()=>yN,()=>SN],kg=[9,we,j9,0,()=>EN,()=>_N]});var Bs,qp=d(()=>{Ue();F();Wp();Kp();Bs=class extends Y.classBuilder().ep(jp).m(function(t,r,o,n){return[he(o,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").sc(Og).build(){}});var Hs,Jp=d(()=>{Ue();F();Wp();Kp();Hs=class extends Y.classBuilder().ep(jp).m(function(t,r,o,n){return[he(o,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").sc(kg).build(){}});var D8,Yp,kN=d(()=>{F();qp();Jp();dc();D8={AssumeRoleCommand:Bs,AssumeRoleWithWebIdentityCommand:Hs},Yp=class extends Ao{};Rn(D8,Yp)});var $N=d(()=>{qp();Jp()});var MN=d(()=>{});var LN,UN,FN,BN,HN,VN=d(()=>{it();$n();qp();Jp();LN=e=>{if(typeof e?.Arn=="string"){let t=e.Arn.split(":");if(t.length>4&&t[4]!=="")return t[4]}},UN=async(e,t,r,o={})=>{let n=typeof e=="function"?await e():e,s=typeof t=="function"?await t():t,i="",a=n??s??(i=await MA(o)());return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${n} (credential provider clientConfig)`,`${s} (contextual client)`,`${i} (STS default: AWS_REGION, profile region, or us-east-1)`),a},FN=(e,t)=>{let r,o;return async(n,s)=>{if(o=n,!r){let{logger:p=e?.parentClientConfig?.logger,profile:u=e?.parentClientConfig?.profile,region:f,requestHandler:m=e?.parentClientConfig?.requestHandler,credentialProviderLogger:x,userAgentAppId:E=e?.parentClientConfig?.userAgentAppId}=e,T=await UN(f,e?.parentClientConfig?.region,x,{logger:p,profile:u}),A=!HN(m);r=new t({...e,userAgentAppId:E,profile:u,credentialDefaultProvider:()=>async()=>o,region:T,requestHandler:A?m:void 0,logger:p})}let{Credentials:i,AssumedRoleUser:a}=await r.send(new Bs(s));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${s.RoleArn}`);let c=LN(a),l={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...c&&{accountId:c}};return oe(l,"CREDENTIALS_STS_ASSUME_ROLE","i"),l}},BN=(e,t)=>{let r;return async o=>{if(!r){let{logger:c=e?.parentClientConfig?.logger,profile:l=e?.parentClientConfig?.profile,region:p,requestHandler:u=e?.parentClientConfig?.requestHandler,credentialProviderLogger:f,userAgentAppId:m=e?.parentClientConfig?.userAgentAppId}=e,x=await UN(p,e?.parentClientConfig?.region,f,{logger:c,profile:l}),E=!HN(u);r=new t({...e,userAgentAppId:m,profile:l,region:x,requestHandler:E?u:void 0,logger:c})}let{Credentials:n,AssumedRoleUser:s}=await r.send(new Hs(o));if(!n||!n.AccessKeyId||!n.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${o.RoleArn}`);let i=LN(s),a={accessKeyId:n.AccessKeyId,secretAccessKey:n.SecretAccessKey,sessionToken:n.SessionToken,expiration:n.Expiration,...n.CredentialScope&&{credentialScope:n.CredentialScope},...i&&{accountId:i}};return i&&oe(a,"RESOLVED_ACCOUNT_ID","T"),oe(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},HN=e=>e?.metadata?.handlerProtocol==="h2"});var GN,jN,WN,N8,zN=d(()=>{VN();dc();GN=(e,t)=>t?class extends e{constructor(o){super(o);for(let n of t)this.middlewareStack.use(n)}}:e,jN=(e={},t)=>FN(e,GN(Ao,t)),WN=(e={},t)=>BN(e,GN(Ao,t)),N8=e=>t=>e({roleAssumer:jN(t),roleAssumerWithWebIdentity:WN(t),...t})});var $g={};zt($g,{$Command:()=>Y,AssumeRole$:()=>Og,AssumeRoleCommand:()=>Bs,AssumeRoleRequest$:()=>yN,AssumeRoleResponse$:()=>SN,AssumeRoleWithWebIdentity$:()=>kg,AssumeRoleWithWebIdentityCommand:()=>Hs,AssumeRoleWithWebIdentityRequest$:()=>EN,AssumeRoleWithWebIdentityResponse$:()=>_N,AssumedRoleUser$:()=>Dg,Credentials$:()=>Ng,ExpiredTokenException:()=>lc,ExpiredTokenException$:()=>bN,IDPCommunicationErrorException:()=>gc,IDPCommunicationErrorException$:()=>wN,IDPRejectedClaimException:()=>mc,IDPRejectedClaimException$:()=>RN,InvalidIdentityTokenException:()=>hc,InvalidIdentityTokenException$:()=>IN,MalformedPolicyDocumentException:()=>pc,MalformedPolicyDocumentException$:()=>TN,PackedPolicyTooLargeException:()=>uc,PackedPolicyTooLargeException$:()=>vN,PolicyDescriptorType$:()=>CN,ProvidedContext$:()=>AN,RegionDisabledException:()=>fc,RegionDisabledException$:()=>PN,STS:()=>Yp,STSClient:()=>Ao,STSServiceException:()=>Gt,STSServiceException$:()=>NN,Tag$:()=>DN,__Client:()=>Ze,decorateDefaultCredentialProvider:()=>N8,getDefaultRoleAssumer:()=>jN,getDefaultRoleAssumerWithWebIdentity:()=>WN});var Mg=d(()=>{dc();kN();$N();Kp();vg();MN();zN();zp()});var qN,O8,k8,JN,KN,YN=d(()=>{it();Ie();vt();vD();qN=(e,{profile:t="default",logger:r}={})=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(O8(e,{profile:t,logger:r})||k8(e,{profile:t,logger:r})),O8=(e,{profile:t,logger:r})=>{let o=typeof e.source_profile=="string"&&typeof e.credential_source>"u";return o&&r?.debug?.(`    ${t} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),o},k8=(e,{profile:t,logger:r})=>{let o=typeof e.credential_source=="string"&&typeof e.source_profile>"u";return o&&r?.debug?.(`    ${t} isCredentialSourceProfile credential_source=${e.credential_source}`),o},JN=async(e,t,r,o,n={},s)=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let i=t[e],{source_profile:a,region:c}=i;if(!r.roleAssumer){let{getDefaultRoleAssumer:p}=await Promise.resolve().then(()=>(Mg(),$g));r.roleAssumer=p({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...o,...r?.parentClientConfig,region:c??r?.parentClientConfig?.region??o?.region}},r.clientPlugins)}if(a&&a in n)throw new $(`Detected a cycle attempting to resolve credentials for profile ${Ft(r)}. Profiles visited: `+Object.keys(n).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${a?`source_profile=[${a}]`:`profile=[${e}]`}`);let l=a?s(a,t,r,o,{...n,[a]:!0},KN(t[a]??{})):(await TD(i.credential_source,e,r.logger)(r))();if(KN(i))return l.then(p=>oe(p,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let p={RoleArn:i.role_arn,RoleSessionName:i.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:i.external_id,DurationSeconds:parseInt(i.duration_seconds||"3600",10)},{mfa_serial:u}=i;if(u){if(!r.mfaCodeProvider)throw new $(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});p.SerialNumber=u,p.TokenCode=await r.mfaCodeProvider(u)}let f=await l;return r.roleAssumer(f,p).then(m=>oe(m,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},KN=e=>!e.role_arn&&!!e.credential_source});function $8(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"signin",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function M8(e){return{schemeId:"smithy.api#noAuth"}}var XN,QN,ZN,Lg=d(()=>{je();ft();XN=async(e,t,r)=>({operation:Fe(t).operation,region:await Ee(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});QN=e=>{let t=[];switch(e.operation){case"CreateOAuth2Token":{t.push(M8(e));break}default:t.push($8(e))}return t},ZN=e=>{let t=Ir(e);return Object.assign(t,{authSchemePreference:Ee(e.authSchemePreference??[])})}});var eO,tO,Ug=d(()=>{eO=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"signin"}),tO={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var dO,_t,bt,cn,rO,Vs,qi,Bn,lo,Zp,Fg,oO,nO,sO,Bg,Hg,Et,Vg,Xp,Qp,iO,aO,cO,L8,lO,pO=d(()=>{dO="required",_t="fn",bt="argv",cn="ref",rO="isSet",Vs="booleanEquals",qi="error",Bn="endpoint",lo="tree",Zp="PartitionResult",Fg="stringEquals",oO={[dO]:!0,default:!1,type:"boolean"},nO={[dO]:!1,type:"string"},sO={[cn]:"Endpoint"},Bg={[_t]:Vs,[bt]:[{[cn]:"UseFIPS"},!0]},Hg={[_t]:Vs,[bt]:[{[cn]:"UseDualStack"},!0]},Et={},Vg={[_t]:"getAttr",[bt]:[{[cn]:Zp},"name"]},Xp={[_t]:Vs,[bt]:[{[cn]:"UseFIPS"},!1]},Qp={[_t]:Vs,[bt]:[{[cn]:"UseDualStack"},!1]},iO={[_t]:"getAttr",[bt]:[{[cn]:Zp},"supportsFIPS"]},aO={[_t]:Vs,[bt]:[!0,{[_t]:"getAttr",[bt]:[{[cn]:Zp},"supportsDualStack"]}]},cO=[{[cn]:"Region"}],L8={version:"1.0",parameters:{UseDualStack:oO,UseFIPS:oO,Endpoint:nO,Region:nO},rules:[{conditions:[{[_t]:rO,[bt]:[sO]}],rules:[{conditions:[Bg],error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:qi},{rules:[{conditions:[Hg],error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:qi},{endpoint:{url:sO,properties:Et,headers:Et},type:Bn}],type:lo}],type:lo},{rules:[{conditions:[{[_t]:rO,[bt]:cO}],rules:[{conditions:[{[_t]:"aws.partition",[bt]:cO,assign:Zp}],rules:[{conditions:[{[_t]:Fg,[bt]:[Vg,"aws"]},Xp,Qp],endpoint:{url:"https://{Region}.signin.aws.amazon.com",properties:Et,headers:Et},type:Bn},{conditions:[{[_t]:Fg,[bt]:[Vg,"aws-cn"]},Xp,Qp],endpoint:{url:"https://{Region}.signin.amazonaws.cn",properties:Et,headers:Et},type:Bn},{conditions:[{[_t]:Fg,[bt]:[Vg,"aws-us-gov"]},Xp,Qp],endpoint:{url:"https://{Region}.signin.amazonaws-us-gov.com",properties:Et,headers:Et},type:Bn},{conditions:[Bg,Hg],rules:[{conditions:[{[_t]:Vs,[bt]:[!0,iO]},aO],rules:[{endpoint:{url:"https://signin-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Et,headers:Et},type:Bn}],type:lo},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:qi}],type:lo},{conditions:[Bg,Qp],rules:[{conditions:[{[_t]:Vs,[bt]:[iO,!0]}],rules:[{endpoint:{url:"https://signin-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Et,headers:Et},type:Bn}],type:lo},{error:"FIPS is enabled but this partition does not support FIPS",type:qi}],type:lo},{conditions:[Xp,Hg],rules:[{conditions:[aO],rules:[{endpoint:{url:"https://signin.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Et,headers:Et},type:Bn}],type:lo},{error:"DualStack is enabled but this partition does not support DualStack",type:qi}],type:lo},{endpoint:{url:"https://signin.{Region}.{PartitionResult#dnsSuffix}",properties:Et,headers:Et},type:Bn}],type:lo}],type:lo},{error:"Invalid Configuration: Missing Region",type:qi}],type:lo}]},lO=L8});var U8,uO,fO=d(()=>{_n();io();pO();U8=new Mt({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),uO=(e,t={})=>U8.get(e,()=>Er(lO,{endpointParams:e,logger:t.logger}));st.aws=qt});var mO,hO=d(()=>{je();tn();Qe();F();en();mt();He();Lg();fO();mO=e=>({apiVersion:"2023-01-01",base64Decoder:e?.base64Decoder??Le,base64Encoder:e?.base64Encoder??Ne,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??uO,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??QN,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new at},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new gr}],logger:e?.logger??new xt,protocol:e?.protocol??vn,protocolSettings:e?.protocolSettings??{defaultNamespace:"com.amazonaws.signin",version:"2023-01-01",serviceTarget:"Signin"},serviceId:e?.serviceId??"Signin",urlParser:e?.urlParser??rt,utf8Decoder:e?.utf8Decoder??Oe,utf8Encoder:e?.utf8Encoder??De})});var gO,xO=d(()=>{bp();je();Ps();Tt();Ds();Qt();Mr();qo();F();Ns();Os();on();hO();gO=e=>{vr(process.version);let t=Wr(e),r=()=>t().then(Tr),o=mO(e);_r(process.version);let n={profile:e?.profile,logger:o.logger};return{...o,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??L(br,n),bodyLengthChecker:e?.bodyLengthChecker??jr,defaultUserAgentProvider:e?.defaultUserAgentProvider??Vr({serviceId:o.serviceId,clientVersion:$i.version}),maxAttempts:e?.maxAttempts??L(Ur,e),region:e?.region??L(yt,{...Ut,...n}),requestHandler:ht.create(e?.requestHandler??r),retryMode:e?.retryMode??L({...Br,default:async()=>(await r()).retryMode||Bt},e),sha256:e?.sha256??Vt.bind(null,"sha256"),streamCollector:e?.streamCollector??Dt,useDualstackEndpoint:e?.useDualstackEndpoint??L(Nr,n),useFipsEndpoint:e?.useFipsEndpoint??L(Or,n),userAgentAppId:e?.userAgentAppId??L(Gr,n)}}});var yO,SO,EO=d(()=>{yO=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,o=e.credentials;return{setHttpAuthScheme(n){let s=t.findIndex(i=>i.schemeId===n.schemeId);s===-1?t.push(n):t.splice(s,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){o=n},credentials(){return o}}},SO=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var _O,bO=d(()=>{$n();$e();F();EO();_O=(e,t)=>{let r=Object.assign(Jr(e),Cr(e),ir(e),yO(e));return t.forEach(o=>o.configure(r)),Object.assign(e,Yr(r),Ar(r),ar(r),SO(r))}});var xc,Gg=d(()=>{ps();us();fs();An();Tt();Qe();ye();Rs();Ue();Qt();F();Lg();Ug();xO();bO();xc=class extends Ze{config;constructor(...[t]){let r=gO(t||{});super(r),this.initConfig=r;let o=eO(r),n=xr(o),s=Fr(n),i=kr(s),a=i,c=Lr(a),l=ZN(c),p=_O(l,t?.extensions||[]);this.config=p,this.middlewareStack.use(mr(this.config)),this.middlewareStack.use(Dr(this.config)),this.middlewareStack.use(Hr(this.config)),this.middlewareStack.use($r(this.config)),this.middlewareStack.use(dr(this.config)),this.middlewareStack.use(lr(this.config)),this.middlewareStack.use(pr(this.config)),this.middlewareStack.use(ur(this.config,{httpAuthSchemeParametersProvider:XN,identityProviderConfigProvider:async u=>new $t({"aws.auth#sigv4":u.credentials})})),this.middlewareStack.use(fr(this.config))}destroy(){super.destroy()}}});var po,eu=d(()=>{F();po=class e extends Lt{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var yc,Sc,Ec,_c,jg=d(()=>{eu();yc=class e extends po{name="AccessDeniedException";$fault="client";error;constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error}},Sc=class e extends po{name="InternalServerException";$fault="server";error;constructor(t){super({name:"InternalServerException",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error}},Ec=class e extends po{name="TooManyRequestsError";$fault="client";error;constructor(t){super({name:"TooManyRequestsError",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error}},_c=class e extends po{name="ValidationException";$fault="client";error;constructor(t){super({name:"ValidationException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error}}});var F8,B8,H8,V8,G8,j8,W8,z8,K8,q8,J8,wO,RO,Wg,IO,TO,Y8,Hn,vO,CO,X8,zg,AO,er,ru,tu,PO,Q8,DO,NO,kO,Z8,eH,OO,Ct,$O,MO,LO,UO,FO,BO,HO,VO,GO,jO,WO,Kg,qg=d(()=>{ye();jg();eu();F8="AccessDeniedException",B8="AccessToken",H8="CreateOAuth2Token",V8="CreateOAuth2TokenRequest",G8="CreateOAuth2TokenRequestBody",j8="CreateOAuth2TokenResponseBody",W8="CreateOAuth2TokenResponse",z8="InternalServerException",K8="RefreshToken",q8="TooManyRequestsError",J8="ValidationException",wO="accessKeyId",RO="accessToken",Wg="client",IO="clientId",TO="codeVerifier",Y8="code",Hn="error",vO="expiresIn",CO="grantType",X8="http",zg="httpError",AO="idToken",er="jsonName",ru="message",tu="refreshToken",PO="redirectUri",Q8="server",DO="secretAccessKey",NO="sessionToken",kO="smithy.ts.sdk.synthetic.com.amazonaws.signin",Z8="tokenInput",eH="tokenOutput",OO="tokenType",Ct="com.amazonaws.signin",$O=[0,Ct,K8,8,0],MO=[-3,Ct,F8,{[Hn]:Wg},[Hn,ru],[0,0]];w.for(Ct).registerError(MO,yc);LO=[3,Ct,B8,8,[wO,DO,NO],[[0,{[er]:wO}],[0,{[er]:DO}],[0,{[er]:NO}]]],UO=[3,Ct,V8,0,[Z8],[[()=>FO,16]]],FO=[3,Ct,G8,0,[IO,CO,Y8,PO,TO,tu],[[0,{[er]:IO}],[0,{[er]:CO}],0,[0,{[er]:PO}],[0,{[er]:TO}],[()=>$O,{[er]:tu}]]],BO=[3,Ct,W8,0,[eH],[[()=>HO,16]]],HO=[3,Ct,j8,0,[RO,OO,vO,tu,AO],[[()=>LO,{[er]:RO}],[0,{[er]:OO}],[1,{[er]:vO}],[()=>$O,{[er]:tu}],[0,{[er]:AO}]]],VO=[-3,Ct,z8,{[Hn]:Q8,[zg]:500},[Hn,ru],[0,0]];w.for(Ct).registerError(VO,Sc);GO=[-3,Ct,q8,{[Hn]:Wg,[zg]:429},[Hn,ru],[0,0]];w.for(Ct).registerError(GO,Ec);jO=[-3,Ct,J8,{[Hn]:Wg,[zg]:400},[Hn,ru],[0,0]];w.for(Ct).registerError(jO,_c);WO=[-3,kO,"SigninServiceException",0,[],[]];w.for(kO).registerError(WO,po);Kg=[9,Ct,H8,{[X8]:["POST","/v1/token",200]},()=>UO,()=>BO]});var bc,Jg=d(()=>{Ue();F();Ug();qg();bc=class extends Y.classBuilder().ep(tO).m(function(t,r,o,n){return[he(o,t.getEndpointParameterInstructions())]}).s("Signin","CreateOAuth2Token",{}).n("SigninClient","CreateOAuth2TokenCommand").sc(Kg).build(){}});var tH,ou,zO=d(()=>{F();Jg();Gg();tH={CreateOAuth2TokenCommand:bc},ou=class extends xc{};Rn(tH,ou)});var KO=d(()=>{Jg()});var rH,qO=d(()=>{rH={AUTHCODE_EXPIRED:"AUTHCODE_EXPIRED",INSUFFICIENT_PERMISSIONS:"INSUFFICIENT_PERMISSIONS",INVALID_REQUEST:"INVALID_REQUEST",SERVER_ERROR:"server_error",TOKEN_EXPIRED:"TOKEN_EXPIRED",USER_CREDENTIALS_CHANGED:"USER_CREDENTIALS_CHANGED"}});var JO=d(()=>{});var YO={};zt(YO,{$Command:()=>Y,AccessDeniedException:()=>yc,AccessDeniedException$:()=>MO,AccessToken$:()=>LO,CreateOAuth2Token$:()=>Kg,CreateOAuth2TokenCommand:()=>bc,CreateOAuth2TokenRequest$:()=>UO,CreateOAuth2TokenRequestBody$:()=>FO,CreateOAuth2TokenResponse$:()=>BO,CreateOAuth2TokenResponseBody$:()=>HO,InternalServerException:()=>Sc,InternalServerException$:()=>VO,OAuth2ErrorCode:()=>rH,Signin:()=>ou,SigninClient:()=>xc,SigninServiceException:()=>po,SigninServiceException$:()=>WO,TooManyRequestsError:()=>Ec,TooManyRequestsError$:()=>GO,ValidationException:()=>_c,ValidationException$:()=>jO,__Client:()=>Ze});var XO=d(()=>{Gg();zO();KO();qg();qO();jg();JO();eu()});import{createHash as oH,createPrivateKey as nH,createPublicKey as sH,sign as iH}from"node:crypto";import{promises as Yg}from"node:fs";import{homedir as aH}from"node:os";import{dirname as cH,join as QO}from"node:path";var nu,ZO=d(()=>{Ie();$e();vt();nu=class e{profileData;init;callerClientConfig;static REFRESH_THRESHOLD=5*60*1e3;constructor(t,r,o){this.profileData=t,this.init=r,this.callerClientConfig=o}async loadCredentials(){let t=await this.loadToken();if(!t)throw new $(`Failed to load a token for session ${this.loginSession}, please re-authenticate using aws login`,{tryNextLink:!1,logger:this.logger});let r=t.accessToken,o=Date.now();return new Date(r.expiresAt).getTime()-o<=e.REFRESH_THRESHOLD?this.refresh(t):{accessKeyId:r.accessKeyId,secretAccessKey:r.secretAccessKey,sessionToken:r.sessionToken,accountId:r.accountId,expiration:new Date(r.expiresAt)}}get logger(){return this.init?.logger}get loginSession(){return this.profileData.login_session}async refresh(t){let{SigninClient:r,CreateOAuth2TokenCommand:o}=await Promise.resolve().then(()=>(XO(),YO)),{logger:n,userAgentAppId:s}=this.callerClientConfig??{},a=(u=>u?.metadata?.handlerProtocol==="h2")(this.callerClientConfig?.requestHandler)?void 0:this.callerClientConfig?.requestHandler,c=this.profileData.region??await this.callerClientConfig?.region?.()??process.env.AWS_REGION,l=new r({credentials:{accessKeyId:"",secretAccessKey:""},region:c,requestHandler:a,logger:n,userAgentAppId:s,...this.init?.clientConfig});this.createDPoPInterceptor(l.middlewareStack);let p={tokenInput:{clientId:t.clientId,refreshToken:t.refreshToken,grantType:"refresh_token"}};try{let u=await l.send(new o(p)),{accessKeyId:f,secretAccessKey:m,sessionToken:x}=u.tokenOutput?.accessToken??{},{refreshToken:E,expiresIn:T}=u.tokenOutput??{};if(!f||!m||!x||!E)throw new $("Token refresh response missing required fields",{logger:this.logger,tryNextLink:!1});let A=(T??900)*1e3,O=new Date(Date.now()+A),ie={...t,accessToken:{...t.accessToken,accessKeyId:f,secretAccessKey:m,sessionToken:x,expiresAt:O.toISOString()},refreshToken:E};await this.saveToken(ie);let ae=ie.accessToken;return{accessKeyId:ae.accessKeyId,secretAccessKey:ae.secretAccessKey,sessionToken:ae.sessionToken,accountId:ae.accountId,expiration:O}}catch(u){if(u.name==="AccessDeniedException"){let f=u.error,m;switch(f){case"TOKEN_EXPIRED":m="Your session has expired. Please reauthenticate.";break;case"USER_CREDENTIALS_CHANGED":m="Unable to refresh credentials because of a change in your password. Please reauthenticate with your new password.";break;case"INSUFFICIENT_PERMISSIONS":m="Unable to refresh credentials due to insufficient permissions. You may be missing permission for the 'CreateOAuth2Token' action.";break;default:m=`Failed to refresh token: ${String(u)}. Please re-authenticate using \`aws login\``}throw new $(m,{logger:this.logger,tryNextLink:!1})}throw new $(`Failed to refresh token: ${String(u)}. Please re-authenticate using aws login`,{logger:this.logger})}}async loadToken(){let t=this.getTokenFilePath();try{let r;try{r=await Nn(t,{ignoreCache:this.init?.ignoreCache})}catch{r=await Yg.readFile(t,"utf8")}let o=JSON.parse(r),n=["accessToken","clientId","refreshToken","dpopKey"].filter(s=>!o[s]);if(o.accessToken?.accountId||n.push("accountId"),n.length>0)throw new $(`Token validation failed, missing fields: ${n.join(", ")}`,{logger:this.logger,tryNextLink:!1});return o}catch(r){throw new $(`Failed to load token from ${t}: ${String(r)}`,{logger:this.logger,tryNextLink:!1})}}async saveToken(t){let r=this.getTokenFilePath(),o=cH(r);try{await Yg.mkdir(o,{recursive:!0})}catch{}await Yg.writeFile(r,JSON.stringify(t,null,2),"utf8")}getTokenFilePath(){let t=process.env.AWS_LOGIN_CACHE_DIRECTORY??QO(aH(),".aws","login","cache"),r=Buffer.from(this.loginSession,"utf8"),o=oH("sha256").update(r).digest("hex");return QO(t,`${o}.json`)}derToRawSignature(t){let r=2;if(t[r]!==2)throw new Error("Invalid DER signature");r++;let o=t[r++],n=t.subarray(r,r+o);if(r+=o,t[r]!==2)throw new Error("Invalid DER signature");r++;let s=t[r++],i=t.subarray(r,r+s);n=n[0]===0?n.subarray(1):n,i=i[0]===0?i.subarray(1):i;let a=Buffer.concat([Buffer.alloc(32-n.length),n]),c=Buffer.concat([Buffer.alloc(32-i.length),i]);return Buffer.concat([a,c])}createDPoPInterceptor(t){t.add(r=>async o=>{if(_e.isInstance(o.request)){let n=o.request,s=`${n.protocol}//${n.hostname}${n.port?`:${n.port}`:""}${n.path}`,i=await this.generateDpop(n.method,s);n.headers={...n.headers,DPoP:i}}return r(o)},{step:"finalizeRequest",name:"dpopInterceptor",override:!0})}async generateDpop(t="POST",r){let o=await this.loadToken();try{let n=nH({key:o.dpopKey,format:"pem",type:"sec1"}),i=sH(n).export({format:"der",type:"spki"}),a=-1;for(let O=0;O<i.length;O++)if(i[O]===4){a=O;break}let c=i.slice(a+1,a+33),l=i.slice(a+33,a+65),p={alg:"ES256",typ:"dpop+jwt",jwk:{kty:"EC",crv:"P-256",x:c.toString("base64url"),y:l.toString("base64url")}},u={jti:crypto.randomUUID(),htm:t,htu:r,iat:Math.floor(Date.now()/1e3)},f=Buffer.from(JSON.stringify(p)).toString("base64url"),m=Buffer.from(JSON.stringify(u)).toString("base64url"),x=`${f}.${m}`,E=iH("sha256",Buffer.from(x),n),A=this.derToRawSignature(E).toString("base64url");return`${x}.${A}`}catch(n){throw new $(`Failed to generate Dpop proof: ${n instanceof Error?n.message:String(n)}`,{logger:this.logger,tryNextLink:!1})}}}});var ek,tk=d(()=>{it();Ie();vt();ZO();ek=e=>async({callerClientConfig:t}={})=>{e?.logger?.debug?.("@aws-sdk/credential-providers - fromLoginCredentials");let r=await Io(e||{}),o=Ft({profile:e?.profile??t?.profile}),n=r[o];if(!n?.login_session)throw new $(`Profile ${o} does not contain login_session.`,{tryNextLink:!0,logger:e?.logger});let i=await new nu(n,e,t).loadCredentials();return oe(i,"CREDENTIALS_LOGIN","AD")}});var rk=d(()=>{});var ok=d(()=>{tk();rk()});var nk,sk,ik=d(()=>{it();ok();nk=e=>!!(e&&e.login_session),sk=async(e,t,r)=>{let o=await ek({...t,profile:e})({callerClientConfig:r});return oe(o,"CREDENTIALS_PROFILE_LOGIN","AC")}});var ak,ck=d(()=>{it();ak=(e,t,r)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let s=new Date;if(new Date(t.Expiration)<s)throw Error(`Profile ${e} credential_process returned expired credentials.`)}let o=t.AccountId;!o&&r?.[e]?.aws_account_id&&(o=r[e].aws_account_id);let n={accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)},...t.CredentialScope&&{credentialScope:t.CredentialScope},...o&&{accountId:o}};return oe(n,"CREDENTIALS_PROCESS","w"),n}});import{exec as dH}from"child_process";import{promisify as lH}from"util";var dk,lk=d(()=>{Ie();vt();ck();dk=async(e,t,r)=>{let o=t[e];if(t[e]){let n=o.credential_process;if(n!==void 0){let s=lH(Ma?.getTokenRecord?.().exec??dH);try{let{stdout:i}=await s(n),a;try{a=JSON.parse(i.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return ak(e,a,t)}catch(i){throw new $(i.message,{logger:r})}}else throw new $(`Profile ${e} did not contain credential_process.`,{logger:r})}else throw new $(`Profile ${e} could not be found in shared credentials file.`,{logger:r})}});var pH,pk=d(()=>{vt();lk();pH=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await Io(e);return dk(Ft({profile:e.profile??t?.profile}),r,e.logger)}});var Xg={};zt(Xg,{fromProcess:()=>pH});var Qg=d(()=>{pk()});var uk,fk,mk=d(()=>{it();uk=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",fk=async(e,t)=>Promise.resolve().then(()=>(Qg(),Xg)).then(({fromProcess:r})=>r({...e,profile:t})().then(o=>oe(o,"CREDENTIALS_PROFILE_PROCESS","v")))});var hk,gk,xk=d(()=>{it();hk=async(e,t,r={},o)=>{let{fromSSO:n}=await Promise.resolve().then(()=>(bg(),_g));return n({profile:e,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})({callerClientConfig:o}).then(s=>t.sso_session?oe(s,"CREDENTIALS_PROFILE_SSO","r"):oe(s,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},gk=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string")});var Zg,ex,yk=d(()=>{it();Zg=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1&&["undefined","string"].indexOf(typeof e.aws_account_id)>-1,ex=async(e,t)=>{t?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return oe(r,"CREDENTIALS_PROFILE","n")}});var tx,rx=d(()=>{tx=e=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:o,webIdentityToken:n,providerId:s,policyArns:i,policy:a,durationSeconds:c}=e,{roleAssumerWithWebIdentity:l}=e;if(!l){let{getDefaultRoleAssumerWithWebIdentity:p}=await Promise.resolve().then(()=>(Mg(),$g));l=p({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...t?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return l({RoleArn:r,RoleSessionName:o??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:s,PolicyArns:i,Policy:a,DurationSeconds:c})}});import{readFileSync as uH}from"fs";var Sk,fH,mH,hH,Ek=d(()=>{it();Ie();vt();rx();Sk="AWS_WEB_IDENTITY_TOKEN_FILE",fH="AWS_ROLE_ARN",mH="AWS_ROLE_SESSION_NAME",hH=(e={})=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let r=e?.webIdentityTokenFile??process.env[Sk],o=e?.roleArn??process.env[fH],n=e?.roleSessionName??process.env[mH];if(!r||!o)throw new $("Web identity configuration not specified",{logger:e.logger});let s=await tx({...e,webIdentityToken:Ma?.getTokenRecord?.()[r]??uH(r,{encoding:"ascii"}),roleArn:o,roleSessionName:n})(t);return r===process.env[Sk]&&oe(s,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),s}});var ox={};zt(ox,{fromTokenFile:()=>hH,fromWebToken:()=>tx});var nx=d(()=>{Ek();rx()});var _k,bk,wk=d(()=>{it();_k=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,bk=async(e,t,r)=>Promise.resolve().then(()=>(nx(),ox)).then(({fromTokenFile:o})=>o({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity,logger:t.logger,parentClientConfig:t.parentClientConfig})({callerClientConfig:r}).then(n=>oe(n,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q")))});var sx,Rk=d(()=>{Ie();YN();ik();mk();xk();yk();wk();sx=async(e,t,r,o,n={},s=!1)=>{let i=t[e];if(Object.keys(n).length>0&&Zg(i))return ex(i,r);if(s||qN(i,{profile:e,logger:r.logger}))return JN(e,t,r,o,n,sx);if(Zg(i))return ex(i,r);if(_k(i))return bk(i,r,o);if(uk(i))return fk(r,e);if(gk(i))return await hk(e,i,r,o);if(nk(i))return sk(e,r,o);throw new $(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:r.logger})}});var gH,Ik=d(()=>{vt();Rk();gH=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let r=await Io(e);return sx(Ft({profile:e.profile??t?.profile}),r,e,t)}});var Tk={};zt(Tk,{fromIni:()=>gH});var vk=d(()=>{Ik()});var R1=zn((w1,Gn)=>{(function(e,t){typeof define=="function"&&define.amd?define([],t):typeof rf=="function"&&typeof Gn=="object"&&Gn&&Gn.exports?Gn.exports=t():(e.dcodeIO=e.dcodeIO||{}).bcrypt=t()})(w1,function(){"use strict";var e={},t=null;function r(R){if(typeof Gn<"u"&&Gn&&Gn.exports)try{return rf("crypto").randomBytes(R)}catch{}try{var _;return(self.crypto||self.msCrypto).getRandomValues(_=new Uint32Array(R)),Array.prototype.slice.call(_)}catch{}if(!t)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return t(R)}var o=!1;try{r(1),o=!0}catch{}t=null,e.setRandomFallback=function(R){t=R},e.genSaltSync=function(R,_){if(R=R||x,typeof R!="number")throw Error("Illegal arguments: "+typeof R+", "+typeof _);R<4?R=4:R>31&&(R=31);var y=[];return y.push("$2a$"),R<10&&y.push("0"),y.push(R.toString()),y.push("$"),y.push(p(r(m),m)),y.join("")},e.genSalt=function(R,_,y){if(typeof _=="function"&&(y=_,_=void 0),typeof R=="function"&&(y=R,R=void 0),typeof R>"u")R=x;else if(typeof R!="number")throw Error("illegal arguments: "+typeof R);function g(h){s(function(){try{h(null,e.genSaltSync(R))}catch(I){h(I)}})}if(y){if(typeof y!="function")throw Error("Illegal callback: "+typeof y);g(y)}else return new Promise(function(h,I){g(function(P,re){if(P){I(P);return}h(re)})})},e.hashSync=function(R,_){if(typeof _>"u"&&(_=x),typeof _=="number"&&(_=e.genSaltSync(_)),typeof R!="string"||typeof _!="string")throw Error("Illegal arguments: "+typeof R+", "+typeof _);return pt(R,_)},e.hash=function(R,_,y,g){function h(I){typeof R=="string"&&typeof _=="number"?e.genSalt(_,function(P,re){pt(R,re,I,g)}):typeof R=="string"&&typeof _=="string"?pt(R,_,I,g):s(I.bind(this,Error("Illegal arguments: "+typeof R+", "+typeof _)))}if(y){if(typeof y!="function")throw Error("Illegal callback: "+typeof y);h(y)}else return new Promise(function(I,P){h(function(re,V){if(re){P(re);return}I(V)})})};function n(R,_){for(var y=0,g=0,h=0,I=R.length;h<I;++h)R.charCodeAt(h)===_.charCodeAt(h)?++y:++g;return y<0?!1:g===0}e.compareSync=function(R,_){if(typeof R!="string"||typeof _!="string")throw Error("Illegal arguments: "+typeof R+", "+typeof _);return _.length!==60?!1:n(e.hashSync(R,_.substr(0,_.length-31)),_)},e.compare=function(R,_,y,g){function h(I){if(typeof R!="string"||typeof _!="string"){s(I.bind(this,Error("Illegal arguments: "+typeof R+", "+typeof _)));return}if(_.length!==60){s(I.bind(this,null,!1));return}e.hash(R,_.substr(0,29),function(P,re){P?I(P):I(null,n(re,_))},g)}if(y){if(typeof y!="function")throw Error("Illegal callback: "+typeof y);h(y)}else return new Promise(function(I,P){h(function(re,V){if(re){P(re);return}I(V)})})},e.getRounds=function(R){if(typeof R!="string")throw Error("Illegal arguments: "+typeof R);return parseInt(R.split("$")[2],10)},e.getSalt=function(R){if(typeof R!="string")throw Error("Illegal arguments: "+typeof R);if(R.length!==60)throw Error("Illegal hash length: "+R.length+" != 60");return R.substring(0,29)};var s=typeof process<"u"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function i(R){var _=[],y=0;return f.encodeUTF16toUTF8(function(){return y>=R.length?null:R.charCodeAt(y++)},function(g){_.push(g)}),_}var a="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),c=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1],l=String.fromCharCode;function p(R,_){var y=0,g=[],h,I;if(_<=0||_>R.length)throw Error("Illegal len: "+_);for(;y<_;){if(h=R[y++]&255,g.push(a[h>>2&63]),h=(h&3)<<4,y>=_){g.push(a[h&63]);break}if(I=R[y++]&255,h|=I>>4&15,g.push(a[h&63]),h=(I&15)<<2,y>=_){g.push(a[h&63]);break}I=R[y++]&255,h|=I>>6&3,g.push(a[h&63]),g.push(a[I&63])}return g.join("")}function u(R,_){var y=0,g=R.length,h=0,I=[],P,re,V,me,Ce,Je;if(_<=0)throw Error("Illegal len: "+_);for(;y<g-1&&h<_&&(Je=R.charCodeAt(y++),P=Je<c.length?c[Je]:-1,Je=R.charCodeAt(y++),re=Je<c.length?c[Je]:-1,!(P==-1||re==-1||(Ce=P<<2>>>0,Ce|=(re&48)>>4,I.push(l(Ce)),++h>=_||y>=g)||(Je=R.charCodeAt(y++),V=Je<c.length?c[Je]:-1,V==-1)||(Ce=(re&15)<<4>>>0,Ce|=(V&60)>>2,I.push(l(Ce)),++h>=_||y>=g)));)Je=R.charCodeAt(y++),me=Je<c.length?c[Je]:-1,Ce=(V&3)<<6>>>0,Ce|=me,I.push(l(Ce)),++h;var eo=[];for(y=0;y<h;y++)eo.push(I[y].charCodeAt(0));return eo}var f=function(){"use strict";var R={};return R.MAX_CODEPOINT=1114111,R.encodeUTF8=function(_,y){var g=null;for(typeof _=="number"&&(g=_,_=function(){return null});g!==null||(g=_())!==null;)g<128?y(g&127):g<2048?(y(g>>6&31|192),y(g&63|128)):g<65536?(y(g>>12&15|224),y(g>>6&63|128),y(g&63|128)):(y(g>>18&7|240),y(g>>12&63|128),y(g>>6&63|128),y(g&63|128)),g=null},R.decodeUTF8=function(_,y){for(var g,h,I,P,re=function(V){V=V.slice(0,V.indexOf(null));var me=Error(V.toString());throw me.name="TruncatedError",me.bytes=V,me};(g=_())!==null;)if(!(g&128))y(g);else if((g&224)===192)(h=_())===null&&re([g,h]),y((g&31)<<6|h&63);else if((g&240)===224)((h=_())===null||(I=_())===null)&&re([g,h,I]),y((g&15)<<12|(h&63)<<6|I&63);else if((g&248)===240)((h=_())===null||(I=_())===null||(P=_())===null)&&re([g,h,I,P]),y((g&7)<<18|(h&63)<<12|(I&63)<<6|P&63);else throw RangeError("Illegal starting byte: "+g)},R.UTF16toUTF8=function(_,y){for(var g,h=null;(g=h!==null?h:_())!==null;){if(g>=55296&&g<=57343&&(h=_())!==null&&h>=56320&&h<=57343){y((g-55296)*1024+h-56320+65536),h=null;continue}y(g)}h!==null&&y(h)},R.UTF8toUTF16=function(_,y){var g=null;for(typeof _=="number"&&(g=_,_=function(){return null});g!==null||(g=_())!==null;)g<=65535?y(g):(g-=65536,y((g>>10)+55296),y(g%1024+56320)),g=null},R.encodeUTF16toUTF8=function(_,y){R.UTF16toUTF8(_,function(g){R.encodeUTF8(g,y)})},R.decodeUTF8toUTF16=function(_,y){R.decodeUTF8(_,function(g){R.UTF8toUTF16(g,y)})},R.calculateCodePoint=function(_){return _<128?1:_<2048?2:_<65536?3:4},R.calculateUTF8=function(_){for(var y,g=0;(y=_())!==null;)g+=R.calculateCodePoint(y);return g},R.calculateUTF16asUTF8=function(_){var y=0,g=0;return R.UTF16toUTF8(_,function(h){++y,g+=R.calculateCodePoint(h)}),[y,g]},R}();Date.now=Date.now||function(){return+new Date};var m=16,x=10,E=16,T=100,A=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],O=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],ie=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function ae(R,_,y,g){var h,I=R[_],P=R[_+1];return I^=y[0],h=g[I>>>24],h+=g[256|I>>16&255],h^=g[512|I>>8&255],h+=g[768|I&255],P^=h^y[1],h=g[P>>>24],h+=g[256|P>>16&255],h^=g[512|P>>8&255],h+=g[768|P&255],I^=h^y[2],h=g[I>>>24],h+=g[256|I>>16&255],h^=g[512|I>>8&255],h+=g[768|I&255],P^=h^y[3],h=g[P>>>24],h+=g[256|P>>16&255],h^=g[512|P>>8&255],h+=g[768|P&255],I^=h^y[4],h=g[I>>>24],h+=g[256|I>>16&255],h^=g[512|I>>8&255],h+=g[768|I&255],P^=h^y[5],h=g[P>>>24],h+=g[256|P>>16&255],h^=g[512|P>>8&255],h+=g[768|P&255],I^=h^y[6],h=g[I>>>24],h+=g[256|I>>16&255],h^=g[512|I>>8&255],h+=g[768|I&255],P^=h^y[7],h=g[P>>>24],h+=g[256|P>>16&255],h^=g[512|P>>8&255],h+=g[768|P&255],I^=h^y[8],h=g[I>>>24],h+=g[256|I>>16&255],h^=g[512|I>>8&255],h+=g[768|I&255],P^=h^y[9],h=g[P>>>24],h+=g[256|P>>16&255],h^=g[512|P>>8&255],h+=g[768|P&255],I^=h^y[10],h=g[I>>>24],h+=g[256|I>>16&255],h^=g[512|I>>8&255],h+=g[768|I&255],P^=h^y[11],h=g[P>>>24],h+=g[256|P>>16&255],h^=g[512|P>>8&255],h+=g[768|P&255],I^=h^y[12],h=g[I>>>24],h+=g[256|I>>16&255],h^=g[512|I>>8&255],h+=g[768|I&255],P^=h^y[13],h=g[P>>>24],h+=g[256|P>>16&255],h^=g[512|P>>8&255],h+=g[768|P&255],I^=h^y[14],h=g[I>>>24],h+=g[256|I>>16&255],h^=g[512|I>>8&255],h+=g[768|I&255],P^=h^y[15],h=g[P>>>24],h+=g[256|P>>16&255],h^=g[512|P>>8&255],h+=g[768|P&255],I^=h^y[16],R[_]=P^y[E+1],R[_+1]=I,R}function ve(R,_){for(var y=0,g=0;y<4;++y)g=g<<8|R[_]&255,_=(_+1)%R.length;return{key:g,offp:_}}function qe(R,_,y){for(var g=0,h=[0,0],I=_.length,P=y.length,re,V=0;V<I;V++)re=ve(R,g),g=re.offp,_[V]=_[V]^re.key;for(V=0;V<I;V+=2)h=ae(h,0,_,y),_[V]=h[0],_[V+1]=h[1];for(V=0;V<P;V+=2)h=ae(h,0,_,y),y[V]=h[0],y[V+1]=h[1]}function Lo(R,_,y,g){for(var h=0,I=[0,0],P=y.length,re=g.length,V,me=0;me<P;me++)V=ve(_,h),h=V.offp,y[me]=y[me]^V.key;for(h=0,me=0;me<P;me+=2)V=ve(R,h),h=V.offp,I[0]^=V.key,V=ve(R,h),h=V.offp,I[1]^=V.key,I=ae(I,0,y,g),y[me]=I[0],y[me+1]=I[1];for(me=0;me<re;me+=2)V=ve(R,h),h=V.offp,I[0]^=V.key,V=ve(R,h),h=V.offp,I[1]^=V.key,I=ae(I,0,y,g),g[me]=I[0],g[me+1]=I[1]}function Re(R,_,y,g,h){var I=ie.slice(),P=I.length,re;if(y<4||y>31)if(re=Error("Illegal number of rounds (4-31): "+y),g){s(g.bind(this,re));return}else throw re;if(_.length!==m)if(re=Error("Illegal salt length: "+_.length+" != "+m),g){s(g.bind(this,re));return}else throw re;y=1<<y>>>0;var V,me,Ce=0,Je;Int32Array?(V=new Int32Array(A),me=new Int32Array(O)):(V=A.slice(),me=O.slice()),Lo(_,R,V,me);function eo(){if(h&&h(Ce/y),Ce<y)for(var Ws=Date.now();Ce<y&&(Ce=Ce+1,qe(R,V,me),qe(_,V,me),!(Date.now()-Ws>T)););else{for(Ce=0;Ce<64;Ce++)for(Je=0;Je<P>>1;Je++)ae(I,Je<<1,V,me);var et=[];for(Ce=0;Ce<P;Ce++)et.push((I[Ce]>>24&255)>>>0),et.push((I[Ce]>>16&255)>>>0),et.push((I[Ce]>>8&255)>>>0),et.push((I[Ce]&255)>>>0);if(g){g(null,et);return}else return et}g&&s(eo)}if(typeof g<"u")eo();else for(var Zi;;)if(typeof(Zi=eo())<"u")return Zi||[]}function pt(R,_,y,g){var h;if(typeof R!="string"||typeof _!="string")if(h=Error("Invalid string / salt: Not a string"),y){s(y.bind(this,h));return}else throw h;var I,P;if(_.charAt(0)!=="$"||_.charAt(1)!=="2")if(h=Error("Invalid salt version: "+_.substring(0,2)),y){s(y.bind(this,h));return}else throw h;if(_.charAt(2)==="$")I="\0",P=3;else{if(I=_.charAt(2),I!=="a"&&I!=="b"&&I!=="y"||_.charAt(3)!=="$")if(h=Error("Invalid salt revision: "+_.substring(2,4)),y){s(y.bind(this,h));return}else throw h;P=4}if(_.charAt(P+2)>"$")if(h=Error("Missing salt rounds"),y){s(y.bind(this,h));return}else throw h;var re=parseInt(_.substring(P,P+1),10)*10,V=parseInt(_.substring(P+1,P+2),10),me=re+V,Ce=_.substring(P+3,P+25);R+=I>="a"?"\0":"";var Je=i(R),eo=u(Ce,m);function Zi(Ws){var et=[];return et.push("$2"),I>="a"&&et.push(I),et.push("$"),me<10&&et.push("0"),et.push(me.toString()),et.push("$"),et.push(p(eo,eo.length)),et.push(p(Ws,ie.length*4-1)),et.join("")}if(typeof y>"u")return Zi(Re(Je,eo,me));Re(Je,eo,me,function(Ws,et){Ws?y(Ws,null):y(null,Zi(et))},g)}return e.encodeBase64=p,e.decodeBase64=u,e})});var T1=zn((_ve,I1)=>{I1.exports=R1()});import{randomUUID as f$}from"crypto";function m$(e){if(!e.body)return{};try{return JSON.parse(e.body)}catch{return e.body}}function h$(e){let t={},r=e.queryStringParameters;if(r)for(let[o,n]of Object.entries(r))n!==void 0&&(t[o]=n);return t}function g$(e){let t={};if(e.headers)for(let[r,o]of Object.entries(e.headers))t[r.toLowerCase()]=o||"";return t}function Ux(e,t){let r={},o=t.split("/"),n=e.split("/");if(o.length!==n.length)return r;for(let s=0;s<o.length;s++){let i=o[s],a=n[s];if(i?.startsWith(":")){let c=i.slice(1);a&&(r[c]=decodeURIComponent(a))}}return r}function Fx(e,t,r={}){let o=(e.httpMethod||e.requestContext?.http?.method)?.toUpperCase()||"GET",n=e.path||e.rawPath||"/",s=e.headers?.["x-correlation-id"]||e.requestContext?.requestId||f$(),i={authenticated:!1};return{method:o,path:n,headers:g$(e),body:m$(e),query:h$(e),params:r,context:i,correlationId:s,rawEvent:e,lambdaContext:t}}var v={};zt(v,{BRAND:()=>V$,DIRTY:()=>Kn,EMPTY_PATH:()=>E$,INVALID:()=>G,NEVER:()=>T3,OK:()=>ut,ParseStatus:()=>nt,Schema:()=>J,ZodAny:()=>hn,ZodArray:()=>Ho,ZodBigInt:()=>Jn,ZodBoolean:()=>Yn,ZodBranded:()=>ta,ZodCatch:()=>as,ZodDate:()=>Xn,ZodDefault:()=>is,ZodDiscriminatedUnion:()=>Uc,ZodEffects:()=>or,ZodEnum:()=>ns,ZodError:()=>At,ZodFirstPartyTypeKind:()=>W,ZodFunction:()=>Bc,ZodIntersection:()=>ts,ZodIssueCode:()=>C,ZodLazy:()=>rs,ZodLiteral:()=>os,ZodMap:()=>Xs,ZodNaN:()=>Zs,ZodNativeEnum:()=>ss,ZodNever:()=>to,ZodNull:()=>Zn,ZodNullable:()=>ho,ZodNumber:()=>qn,ZodObject:()=>Pt,ZodOptional:()=>tr,ZodParsedType:()=>k,ZodPipeline:()=>ra,ZodPromise:()=>gn,ZodReadonly:()=>cs,ZodRecord:()=>Fc,ZodSchema:()=>J,ZodSet:()=>Qs,ZodString:()=>mn,ZodSymbol:()=>Js,ZodTransformer:()=>or,ZodTuple:()=>mo,ZodType:()=>J,ZodUndefined:()=>Qn,ZodUnion:()=>es,ZodUnknown:()=>Bo,ZodVoid:()=>Ys,addIssueToContext:()=>N,any:()=>X$,array:()=>t3,bigint:()=>z$,boolean:()=>Yx,coerce:()=>I3,custom:()=>Kx,date:()=>K$,datetimeRegex:()=>Wx,defaultErrorMap:()=>Uo,discriminatedUnion:()=>s3,effect:()=>x3,enum:()=>m3,function:()=>p3,getErrorMap:()=>zs,getParsedType:()=>fo,instanceof:()=>j$,intersection:()=>i3,isAborted:()=>Mc,isAsync:()=>Ks,isDirty:()=>Lc,isValid:()=>fn,late:()=>G$,lazy:()=>u3,literal:()=>f3,makeIssue:()=>ea,map:()=>d3,nan:()=>W$,nativeEnum:()=>h3,never:()=>Z$,null:()=>Y$,nullable:()=>S3,number:()=>Jx,object:()=>r3,objectUtil:()=>of,oboolean:()=>R3,onumber:()=>w3,optional:()=>y3,ostring:()=>b3,pipeline:()=>_3,preprocess:()=>E3,promise:()=>g3,quotelessJson:()=>x$,record:()=>c3,set:()=>l3,setErrorMap:()=>S$,strictObject:()=>o3,string:()=>qx,symbol:()=>q$,transformer:()=>x3,tuple:()=>a3,undefined:()=>J$,union:()=>n3,unknown:()=>Q$,util:()=>ee,void:()=>e3});var ee;(function(e){e.assertEqual=n=>{};function t(n){}e.assertIs=t;function r(n){throw new Error}e.assertNever=r,e.arrayToEnum=n=>{let s={};for(let i of n)s[i]=i;return s},e.getValidEnumValues=n=>{let s=e.objectKeys(n).filter(a=>typeof n[n[a]]!="number"),i={};for(let a of s)i[a]=n[a];return e.objectValues(i)},e.objectValues=n=>e.objectKeys(n).map(function(s){return n[s]}),e.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let s=[];for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&s.push(i);return s},e.find=(n,s)=>{for(let i of n)if(s(i))return i},e.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&Number.isFinite(n)&&Math.floor(n)===n;function o(n,s=" | "){return n.map(i=>typeof i=="string"?`'${i}'`:i).join(s)}e.joinValues=o,e.jsonStringifyReplacer=(n,s)=>typeof s=="bigint"?s.toString():s})(ee||(ee={}));var of;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(of||(of={}));var k=ee.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),fo=e=>{switch(typeof e){case"undefined":return k.undefined;case"string":return k.string;case"number":return Number.isNaN(e)?k.nan:k.number;case"boolean":return k.boolean;case"function":return k.function;case"bigint":return k.bigint;case"symbol":return k.symbol;case"object":return Array.isArray(e)?k.array:e===null?k.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?k.promise:typeof Map<"u"&&e instanceof Map?k.map:typeof Set<"u"&&e instanceof Set?k.set:typeof Date<"u"&&e instanceof Date?k.date:k.object;default:return k.unknown}};var C=ee.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),x$=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),At=class e extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=o=>{this.issues=[...this.issues,o]},this.addIssues=(o=[])=>{this.issues=[...this.issues,...o]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){let r=t||function(s){return s.message},o={_errors:[]},n=s=>{for(let i of s.issues)if(i.code==="invalid_union")i.unionErrors.map(n);else if(i.code==="invalid_return_type")n(i.returnTypeError);else if(i.code==="invalid_arguments")n(i.argumentsError);else if(i.path.length===0)o._errors.push(r(i));else{let a=o,c=0;for(;c<i.path.length;){let l=i.path[c];c===i.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(r(i))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return n(this),o}static assert(t){if(!(t instanceof e))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ee.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){let r={},o=[];for(let n of this.issues)if(n.path.length>0){let s=n.path[0];r[s]=r[s]||[],r[s].push(t(n))}else o.push(t(n));return{formErrors:o,fieldErrors:r}}get formErrors(){return this.flatten()}};At.create=e=>new At(e);var y$=(e,t)=>{let r;switch(e.code){case C.invalid_type:e.received===k.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case C.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,ee.jsonStringifyReplacer)}`;break;case C.unrecognized_keys:r=`Unrecognized key(s) in object: ${ee.joinValues(e.keys,", ")}`;break;case C.invalid_union:r="Invalid input";break;case C.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ee.joinValues(e.options)}`;break;case C.invalid_enum_value:r=`Invalid enum value. Expected ${ee.joinValues(e.options)}, received '${e.received}'`;break;case C.invalid_arguments:r="Invalid function arguments";break;case C.invalid_return_type:r="Invalid function return type";break;case C.invalid_date:r="Invalid date";break;case C.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:ee.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case C.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case C.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case C.custom:r="Invalid input";break;case C.invalid_intersection_types:r="Intersection results could not be merged";break;case C.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case C.not_finite:r="Number must be finite";break;default:r=t.defaultError,ee.assertNever(e)}return{message:r}},Uo=y$;var Bx=Uo;function S$(e){Bx=e}function zs(){return Bx}var ea=e=>{let{data:t,path:r,errorMaps:o,issueData:n}=e,s=[...r,...n.path||[]],i={...n,path:s};if(n.message!==void 0)return{...n,path:s,message:n.message};let a="",c=o.filter(l=>!!l).slice().reverse();for(let l of c)a=l(i,{data:t,defaultError:a}).message;return{...n,path:s,message:a}},E$=[];function N(e,t){let r=zs(),o=ea({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===Uo?void 0:Uo].filter(n=>!!n)});e.common.issues.push(o)}var nt=class e{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){let o=[];for(let n of r){if(n.status==="aborted")return G;n.status==="dirty"&&t.dirty(),o.push(n.value)}return{status:t.value,value:o}}static async mergeObjectAsync(t,r){let o=[];for(let n of r){let s=await n.key,i=await n.value;o.push({key:s,value:i})}return e.mergeObjectSync(t,o)}static mergeObjectSync(t,r){let o={};for(let n of r){let{key:s,value:i}=n;if(s.status==="aborted"||i.status==="aborted")return G;s.status==="dirty"&&t.dirty(),i.status==="dirty"&&t.dirty(),s.value!=="__proto__"&&(typeof i.value<"u"||n.alwaysSet)&&(o[s.value]=i.value)}return{status:t.value,value:o}}},G=Object.freeze({status:"aborted"}),Kn=e=>({status:"dirty",value:e}),ut=e=>({status:"valid",value:e}),Mc=e=>e.status==="aborted",Lc=e=>e.status==="dirty",fn=e=>e.status==="valid",Ks=e=>typeof Promise<"u"&&e instanceof Promise;var U;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(U||(U={}));var rr=class{constructor(t,r,o,n){this._cachedPath=[],this.parent=t,this.data=r,this._path=o,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Hx=(e,t)=>{if(fn(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new At(e.common.issues);return this._error=r,this._error}}};function K(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:o,description:n}=e;if(t&&(r||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:n}:{errorMap:(i,a)=>{let{message:c}=e;return i.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??o??a.defaultError}:i.code!=="invalid_type"?{message:a.defaultError}:{message:c??r??a.defaultError}},description:n}}var J=class{get description(){return this._def.description}_getType(t){return fo(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:fo(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new nt,ctx:{common:t.parent.common,data:t.data,parsedType:fo(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){let r=this._parse(t);if(Ks(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){let r=this._parse(t);return Promise.resolve(r)}parse(t,r){let o=this.safeParse(t,r);if(o.success)return o.data;throw o.error}safeParse(t,r){let o={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:fo(t)},n=this._parseSync({data:t,path:o.path,parent:o});return Hx(o,n)}"~validate"(t){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:fo(t)};if(!this["~standard"].async)try{let o=this._parseSync({data:t,path:[],parent:r});return fn(o)?{value:o.value}:{issues:r.common.issues}}catch(o){o?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(o=>fn(o)?{value:o.value}:{issues:r.common.issues})}async parseAsync(t,r){let o=await this.safeParseAsync(t,r);if(o.success)return o.data;throw o.error}async safeParseAsync(t,r){let o={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:fo(t)},n=this._parse({data:t,path:o.path,parent:o}),s=await(Ks(n)?n:Promise.resolve(n));return Hx(o,s)}refine(t,r){let o=n=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(n):r;return this._refinement((n,s)=>{let i=t(n),a=()=>s.addIssue({code:C.custom,...o(n)});return typeof Promise<"u"&&i instanceof Promise?i.then(c=>c?!0:(a(),!1)):i?!0:(a(),!1)})}refinement(t,r){return this._refinement((o,n)=>t(o)?!0:(n.addIssue(typeof r=="function"?r(o,n):r),!1))}_refinement(t){return new or({schema:this,typeName:W.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return tr.create(this,this._def)}nullable(){return ho.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ho.create(this)}promise(){return gn.create(this,this._def)}or(t){return es.create([this,t],this._def)}and(t){return ts.create(this,t,this._def)}transform(t){return new or({...K(this._def),schema:this,typeName:W.ZodEffects,effect:{type:"transform",transform:t}})}default(t){let r=typeof t=="function"?t:()=>t;return new is({...K(this._def),innerType:this,defaultValue:r,typeName:W.ZodDefault})}brand(){return new ta({typeName:W.ZodBranded,type:this,...K(this._def)})}catch(t){let r=typeof t=="function"?t:()=>t;return new as({...K(this._def),innerType:this,catchValue:r,typeName:W.ZodCatch})}describe(t){let r=this.constructor;return new r({...this._def,description:t})}pipe(t){return ra.create(this,t)}readonly(){return cs.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},_$=/^c[^\s-]{8,}$/i,b$=/^[0-9a-z]+$/,w$=/^[0-9A-HJKMNP-TV-Z]{26}$/i,R$=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,I$=/^[a-z0-9_-]{21}$/i,T$=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,v$=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,C$=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,A$="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",nf,P$=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,D$=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,N$=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,O$=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,k$=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,$$=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Gx="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",M$=new RegExp(`^${Gx}$`);function jx(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function L$(e){return new RegExp(`^${jx(e)}$`)}function Wx(e){let t=`${Gx}T${jx(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function U$(e,t){return!!((t==="v4"||!t)&&P$.test(e)||(t==="v6"||!t)&&N$.test(e))}function F$(e,t){if(!T$.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let o=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),n=JSON.parse(atob(o));return!(typeof n!="object"||n===null||"typ"in n&&n?.typ!=="JWT"||!n.alg||t&&n.alg!==t)}catch{return!1}}function B$(e,t){return!!((t==="v4"||!t)&&D$.test(e)||(t==="v6"||!t)&&O$.test(e))}var mn=class e extends J{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==k.string){let s=this._getOrReturnCtx(t);return N(s,{code:C.invalid_type,expected:k.string,received:s.parsedType}),G}let o=new nt,n;for(let s of this._def.checks)if(s.kind==="min")t.data.length<s.value&&(n=this._getOrReturnCtx(t,n),N(n,{code:C.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),o.dirty());else if(s.kind==="max")t.data.length>s.value&&(n=this._getOrReturnCtx(t,n),N(n,{code:C.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),o.dirty());else if(s.kind==="length"){let i=t.data.length>s.value,a=t.data.length<s.value;(i||a)&&(n=this._getOrReturnCtx(t,n),i?N(n,{code:C.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&N(n,{code:C.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),o.dirty())}else if(s.kind==="email")C$.test(t.data)||(n=this._getOrReturnCtx(t,n),N(n,{validation:"email",code:C.invalid_string,message:s.message}),o.dirty());else if(s.kind==="emoji")nf||(nf=new RegExp(A$,"u")),nf.test(t.data)||(n=this._getOrReturnCtx(t,n),N(n,{validation:"emoji",code:C.invalid_string,message:s.message}),o.dirty());else if(s.kind==="uuid")R$.test(t.data)||(n=this._getOrReturnCtx(t,n),N(n,{validation:"uuid",code:C.invalid_string,message:s.message}),o.dirty());else if(s.kind==="nanoid")I$.test(t.data)||(n=this._getOrReturnCtx(t,n),N(n,{validation:"nanoid",code:C.invalid_string,message:s.message}),o.dirty());else if(s.kind==="cuid")_$.test(t.data)||(n=this._getOrReturnCtx(t,n),N(n,{validation:"cuid",code:C.invalid_string,message:s.message}),o.dirty());else if(s.kind==="cuid2")b$.test(t.data)||(n=this._getOrReturnCtx(t,n),N(n,{validation:"cuid2",code:C.invalid_string,message:s.message}),o.dirty());else if(s.kind==="ulid")w$.test(t.data)||(n=this._getOrReturnCtx(t,n),N(n,{validation:"ulid",code:C.invalid_string,message:s.message}),o.dirty());else if(s.kind==="url")try{new URL(t.data)}catch{n=this._getOrReturnCtx(t,n),N(n,{validation:"url",code:C.invalid_string,message:s.message}),o.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(t.data)||(n=this._getOrReturnCtx(t,n),N(n,{validation:"regex",code:C.invalid_string,message:s.message}),o.dirty())):s.kind==="trim"?t.data=t.data.trim():s.kind==="includes"?t.data.includes(s.value,s.position)||(n=this._getOrReturnCtx(t,n),N(n,{code:C.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),o.dirty()):s.kind==="toLowerCase"?t.data=t.data.toLowerCase():s.kind==="toUpperCase"?t.data=t.data.toUpperCase():s.kind==="startsWith"?t.data.startsWith(s.value)||(n=this._getOrReturnCtx(t,n),N(n,{code:C.invalid_string,validation:{startsWith:s.value},message:s.message}),o.dirty()):s.kind==="endsWith"?t.data.endsWith(s.value)||(n=this._getOrReturnCtx(t,n),N(n,{code:C.invalid_string,validation:{endsWith:s.value},message:s.message}),o.dirty()):s.kind==="datetime"?Wx(s).test(t.data)||(n=this._getOrReturnCtx(t,n),N(n,{code:C.invalid_string,validation:"datetime",message:s.message}),o.dirty()):s.kind==="date"?M$.test(t.data)||(n=this._getOrReturnCtx(t,n),N(n,{code:C.invalid_string,validation:"date",message:s.message}),o.dirty()):s.kind==="time"?L$(s).test(t.data)||(n=this._getOrReturnCtx(t,n),N(n,{code:C.invalid_string,validation:"time",message:s.message}),o.dirty()):s.kind==="duration"?v$.test(t.data)||(n=this._getOrReturnCtx(t,n),N(n,{validation:"duration",code:C.invalid_string,message:s.message}),o.dirty()):s.kind==="ip"?U$(t.data,s.version)||(n=this._getOrReturnCtx(t,n),N(n,{validation:"ip",code:C.invalid_string,message:s.message}),o.dirty()):s.kind==="jwt"?F$(t.data,s.alg)||(n=this._getOrReturnCtx(t,n),N(n,{validation:"jwt",code:C.invalid_string,message:s.message}),o.dirty()):s.kind==="cidr"?B$(t.data,s.version)||(n=this._getOrReturnCtx(t,n),N(n,{validation:"cidr",code:C.invalid_string,message:s.message}),o.dirty()):s.kind==="base64"?k$.test(t.data)||(n=this._getOrReturnCtx(t,n),N(n,{validation:"base64",code:C.invalid_string,message:s.message}),o.dirty()):s.kind==="base64url"?$$.test(t.data)||(n=this._getOrReturnCtx(t,n),N(n,{validation:"base64url",code:C.invalid_string,message:s.message}),o.dirty()):ee.assertNever(s);return{status:o.value,value:t.data}}_regex(t,r,o){return this.refinement(n=>t.test(n),{validation:r,code:C.invalid_string,...U.errToObj(o)})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...U.errToObj(t)})}url(t){return this._addCheck({kind:"url",...U.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...U.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...U.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...U.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...U.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...U.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...U.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...U.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...U.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...U.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...U.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...U.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:t?.offset??!1,local:t?.local??!1,...U.errToObj(t?.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof t?.precision>"u"?null:t?.precision,...U.errToObj(t?.message)})}duration(t){return this._addCheck({kind:"duration",...U.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...U.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r?.position,...U.errToObj(r?.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...U.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...U.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...U.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...U.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...U.errToObj(r)})}nonempty(t){return this.min(1,U.errToObj(t))}trim(){return new e({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};mn.create=e=>new mn({checks:[],typeName:W.ZodString,coerce:e?.coerce??!1,...K(e)});function H$(e,t){let r=(e.toString().split(".")[1]||"").length,o=(t.toString().split(".")[1]||"").length,n=r>o?r:o,s=Number.parseInt(e.toFixed(n).replace(".","")),i=Number.parseInt(t.toFixed(n).replace(".",""));return s%i/10**n}var qn=class e extends J{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==k.number){let s=this._getOrReturnCtx(t);return N(s,{code:C.invalid_type,expected:k.number,received:s.parsedType}),G}let o,n=new nt;for(let s of this._def.checks)s.kind==="int"?ee.isInteger(t.data)||(o=this._getOrReturnCtx(t,o),N(o,{code:C.invalid_type,expected:"integer",received:"float",message:s.message}),n.dirty()):s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(o=this._getOrReturnCtx(t,o),N(o,{code:C.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),n.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(o=this._getOrReturnCtx(t,o),N(o,{code:C.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),n.dirty()):s.kind==="multipleOf"?H$(t.data,s.value)!==0&&(o=this._getOrReturnCtx(t,o),N(o,{code:C.not_multiple_of,multipleOf:s.value,message:s.message}),n.dirty()):s.kind==="finite"?Number.isFinite(t.data)||(o=this._getOrReturnCtx(t,o),N(o,{code:C.not_finite,message:s.message}),n.dirty()):ee.assertNever(s);return{status:n.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,U.toString(r))}gt(t,r){return this.setLimit("min",t,!1,U.toString(r))}lte(t,r){return this.setLimit("max",t,!0,U.toString(r))}lt(t,r){return this.setLimit("max",t,!1,U.toString(r))}setLimit(t,r,o,n){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:o,message:U.toString(n)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:U.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:U.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:U.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:U.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:U.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:U.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:U.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:U.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:U.toString(t)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&ee.isInteger(t.value))}get isFinite(){let t=null,r=null;for(let o of this._def.checks){if(o.kind==="finite"||o.kind==="int"||o.kind==="multipleOf")return!0;o.kind==="min"?(r===null||o.value>r)&&(r=o.value):o.kind==="max"&&(t===null||o.value<t)&&(t=o.value)}return Number.isFinite(r)&&Number.isFinite(t)}};qn.create=e=>new qn({checks:[],typeName:W.ZodNumber,coerce:e?.coerce||!1,...K(e)});var Jn=class e extends J{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==k.bigint)return this._getInvalidInput(t);let o,n=new nt;for(let s of this._def.checks)s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(o=this._getOrReturnCtx(t,o),N(o,{code:C.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),n.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(o=this._getOrReturnCtx(t,o),N(o,{code:C.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),n.dirty()):s.kind==="multipleOf"?t.data%s.value!==BigInt(0)&&(o=this._getOrReturnCtx(t,o),N(o,{code:C.not_multiple_of,multipleOf:s.value,message:s.message}),n.dirty()):ee.assertNever(s);return{status:n.value,value:t.data}}_getInvalidInput(t){let r=this._getOrReturnCtx(t);return N(r,{code:C.invalid_type,expected:k.bigint,received:r.parsedType}),G}gte(t,r){return this.setLimit("min",t,!0,U.toString(r))}gt(t,r){return this.setLimit("min",t,!1,U.toString(r))}lte(t,r){return this.setLimit("max",t,!0,U.toString(r))}lt(t,r){return this.setLimit("max",t,!1,U.toString(r))}setLimit(t,r,o,n){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:o,message:U.toString(n)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:U.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:U.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:U.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:U.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:U.toString(r)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};Jn.create=e=>new Jn({checks:[],typeName:W.ZodBigInt,coerce:e?.coerce??!1,...K(e)});var Yn=class extends J{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==k.boolean){let o=this._getOrReturnCtx(t);return N(o,{code:C.invalid_type,expected:k.boolean,received:o.parsedType}),G}return ut(t.data)}};Yn.create=e=>new Yn({typeName:W.ZodBoolean,coerce:e?.coerce||!1,...K(e)});var Xn=class e extends J{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==k.date){let s=this._getOrReturnCtx(t);return N(s,{code:C.invalid_type,expected:k.date,received:s.parsedType}),G}if(Number.isNaN(t.data.getTime())){let s=this._getOrReturnCtx(t);return N(s,{code:C.invalid_date}),G}let o=new nt,n;for(let s of this._def.checks)s.kind==="min"?t.data.getTime()<s.value&&(n=this._getOrReturnCtx(t,n),N(n,{code:C.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),o.dirty()):s.kind==="max"?t.data.getTime()>s.value&&(n=this._getOrReturnCtx(t,n),N(n,{code:C.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),o.dirty()):ee.assertNever(s);return{status:o.value,value:new Date(t.data.getTime())}}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:U.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:U.toString(r)})}get minDate(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}};Xn.create=e=>new Xn({checks:[],coerce:e?.coerce||!1,typeName:W.ZodDate,...K(e)});var Js=class extends J{_parse(t){if(this._getType(t)!==k.symbol){let o=this._getOrReturnCtx(t);return N(o,{code:C.invalid_type,expected:k.symbol,received:o.parsedType}),G}return ut(t.data)}};Js.create=e=>new Js({typeName:W.ZodSymbol,...K(e)});var Qn=class extends J{_parse(t){if(this._getType(t)!==k.undefined){let o=this._getOrReturnCtx(t);return N(o,{code:C.invalid_type,expected:k.undefined,received:o.parsedType}),G}return ut(t.data)}};Qn.create=e=>new Qn({typeName:W.ZodUndefined,...K(e)});var Zn=class extends J{_parse(t){if(this._getType(t)!==k.null){let o=this._getOrReturnCtx(t);return N(o,{code:C.invalid_type,expected:k.null,received:o.parsedType}),G}return ut(t.data)}};Zn.create=e=>new Zn({typeName:W.ZodNull,...K(e)});var hn=class extends J{constructor(){super(...arguments),this._any=!0}_parse(t){return ut(t.data)}};hn.create=e=>new hn({typeName:W.ZodAny,...K(e)});var Bo=class extends J{constructor(){super(...arguments),this._unknown=!0}_parse(t){return ut(t.data)}};Bo.create=e=>new Bo({typeName:W.ZodUnknown,...K(e)});var to=class extends J{_parse(t){let r=this._getOrReturnCtx(t);return N(r,{code:C.invalid_type,expected:k.never,received:r.parsedType}),G}};to.create=e=>new to({typeName:W.ZodNever,...K(e)});var Ys=class extends J{_parse(t){if(this._getType(t)!==k.undefined){let o=this._getOrReturnCtx(t);return N(o,{code:C.invalid_type,expected:k.void,received:o.parsedType}),G}return ut(t.data)}};Ys.create=e=>new Ys({typeName:W.ZodVoid,...K(e)});var Ho=class e extends J{_parse(t){let{ctx:r,status:o}=this._processInputParams(t),n=this._def;if(r.parsedType!==k.array)return N(r,{code:C.invalid_type,expected:k.array,received:r.parsedType}),G;if(n.exactLength!==null){let i=r.data.length>n.exactLength.value,a=r.data.length<n.exactLength.value;(i||a)&&(N(r,{code:i?C.too_big:C.too_small,minimum:a?n.exactLength.value:void 0,maximum:i?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),o.dirty())}if(n.minLength!==null&&r.data.length<n.minLength.value&&(N(r,{code:C.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),o.dirty()),n.maxLength!==null&&r.data.length>n.maxLength.value&&(N(r,{code:C.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),o.dirty()),r.common.async)return Promise.all([...r.data].map((i,a)=>n.type._parseAsync(new rr(r,i,r.path,a)))).then(i=>nt.mergeArray(o,i));let s=[...r.data].map((i,a)=>n.type._parseSync(new rr(r,i,r.path,a)));return nt.mergeArray(o,s)}get element(){return this._def.type}min(t,r){return new e({...this._def,minLength:{value:t,message:U.toString(r)}})}max(t,r){return new e({...this._def,maxLength:{value:t,message:U.toString(r)}})}length(t,r){return new e({...this._def,exactLength:{value:t,message:U.toString(r)}})}nonempty(t){return this.min(1,t)}};Ho.create=(e,t)=>new Ho({type:e,minLength:null,maxLength:null,exactLength:null,typeName:W.ZodArray,...K(t)});function qs(e){if(e instanceof Pt){let t={};for(let r in e.shape){let o=e.shape[r];t[r]=tr.create(qs(o))}return new Pt({...e._def,shape:()=>t})}else return e instanceof Ho?new Ho({...e._def,type:qs(e.element)}):e instanceof tr?tr.create(qs(e.unwrap())):e instanceof ho?ho.create(qs(e.unwrap())):e instanceof mo?mo.create(e.items.map(t=>qs(t))):e}var Pt=class e extends J{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let t=this._def.shape(),r=ee.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==k.object){let l=this._getOrReturnCtx(t);return N(l,{code:C.invalid_type,expected:k.object,received:l.parsedType}),G}let{status:o,ctx:n}=this._processInputParams(t),{shape:s,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof to&&this._def.unknownKeys==="strip"))for(let l in n.data)i.includes(l)||a.push(l);let c=[];for(let l of i){let p=s[l],u=n.data[l];c.push({key:{status:"valid",value:l},value:p._parse(new rr(n,u,n.path,l)),alwaysSet:l in n.data})}if(this._def.catchall instanceof to){let l=this._def.unknownKeys;if(l==="passthrough")for(let p of a)c.push({key:{status:"valid",value:p},value:{status:"valid",value:n.data[p]}});else if(l==="strict")a.length>0&&(N(n,{code:C.unrecognized_keys,keys:a}),o.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let l=this._def.catchall;for(let p of a){let u=n.data[p];c.push({key:{status:"valid",value:p},value:l._parse(new rr(n,u,n.path,p)),alwaysSet:p in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let l=[];for(let p of c){let u=await p.key,f=await p.value;l.push({key:u,value:f,alwaysSet:p.alwaysSet})}return l}).then(l=>nt.mergeObjectSync(o,l)):nt.mergeObjectSync(o,c)}get shape(){return this._def.shape()}strict(t){return U.errToObj,new e({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,o)=>{let n=this._def.errorMap?.(r,o).message??o.defaultError;return r.code==="unrecognized_keys"?{message:U.errToObj(t).message??n}:{message:n}}}:{}})}strip(){return new e({...this._def,unknownKeys:"strip"})}passthrough(){return new e({...this._def,unknownKeys:"passthrough"})}extend(t){return new e({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:W.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new e({...this._def,catchall:t})}pick(t){let r={};for(let o of ee.objectKeys(t))t[o]&&this.shape[o]&&(r[o]=this.shape[o]);return new e({...this._def,shape:()=>r})}omit(t){let r={};for(let o of ee.objectKeys(this.shape))t[o]||(r[o]=this.shape[o]);return new e({...this._def,shape:()=>r})}deepPartial(){return qs(this)}partial(t){let r={};for(let o of ee.objectKeys(this.shape)){let n=this.shape[o];t&&!t[o]?r[o]=n:r[o]=n.optional()}return new e({...this._def,shape:()=>r})}required(t){let r={};for(let o of ee.objectKeys(this.shape))if(t&&!t[o])r[o]=this.shape[o];else{let s=this.shape[o];for(;s instanceof tr;)s=s._def.innerType;r[o]=s}return new e({...this._def,shape:()=>r})}keyof(){return zx(ee.objectKeys(this.shape))}};Pt.create=(e,t)=>new Pt({shape:()=>e,unknownKeys:"strip",catchall:to.create(),typeName:W.ZodObject,...K(t)});Pt.strictCreate=(e,t)=>new Pt({shape:()=>e,unknownKeys:"strict",catchall:to.create(),typeName:W.ZodObject,...K(t)});Pt.lazycreate=(e,t)=>new Pt({shape:e,unknownKeys:"strip",catchall:to.create(),typeName:W.ZodObject,...K(t)});var es=class extends J{_parse(t){let{ctx:r}=this._processInputParams(t),o=this._def.options;function n(s){for(let a of s)if(a.result.status==="valid")return a.result;for(let a of s)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;let i=s.map(a=>new At(a.ctx.common.issues));return N(r,{code:C.invalid_union,unionErrors:i}),G}if(r.common.async)return Promise.all(o.map(async s=>{let i={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:i}),ctx:i}})).then(n);{let s,i=[];for(let c of o){let l={...r,common:{...r.common,issues:[]},parent:null},p=c._parseSync({data:r.data,path:r.path,parent:l});if(p.status==="valid")return p;p.status==="dirty"&&!s&&(s={result:p,ctx:l}),l.common.issues.length&&i.push(l.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;let a=i.map(c=>new At(c));return N(r,{code:C.invalid_union,unionErrors:a}),G}}get options(){return this._def.options}};es.create=(e,t)=>new es({options:e,typeName:W.ZodUnion,...K(t)});var Fo=e=>e instanceof rs?Fo(e.schema):e instanceof or?Fo(e.innerType()):e instanceof os?[e.value]:e instanceof ns?e.options:e instanceof ss?ee.objectValues(e.enum):e instanceof is?Fo(e._def.innerType):e instanceof Qn?[void 0]:e instanceof Zn?[null]:e instanceof tr?[void 0,...Fo(e.unwrap())]:e instanceof ho?[null,...Fo(e.unwrap())]:e instanceof ta||e instanceof cs?Fo(e.unwrap()):e instanceof as?Fo(e._def.innerType):[],Uc=class e extends J{_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==k.object)return N(r,{code:C.invalid_type,expected:k.object,received:r.parsedType}),G;let o=this.discriminator,n=r.data[o],s=this.optionsMap.get(n);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(N(r,{code:C.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[o]}),G)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,o){let n=new Map;for(let s of r){let i=Fo(s.shape[t]);if(!i.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(let a of i){if(n.has(a))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(a)}`);n.set(a,s)}}return new e({typeName:W.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:n,...K(o)})}};function sf(e,t){let r=fo(e),o=fo(t);if(e===t)return{valid:!0,data:e};if(r===k.object&&o===k.object){let n=ee.objectKeys(t),s=ee.objectKeys(e).filter(a=>n.indexOf(a)!==-1),i={...e,...t};for(let a of s){let c=sf(e[a],t[a]);if(!c.valid)return{valid:!1};i[a]=c.data}return{valid:!0,data:i}}else if(r===k.array&&o===k.array){if(e.length!==t.length)return{valid:!1};let n=[];for(let s=0;s<e.length;s++){let i=e[s],a=t[s],c=sf(i,a);if(!c.valid)return{valid:!1};n.push(c.data)}return{valid:!0,data:n}}else return r===k.date&&o===k.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}var ts=class extends J{_parse(t){let{status:r,ctx:o}=this._processInputParams(t),n=(s,i)=>{if(Mc(s)||Mc(i))return G;let a=sf(s.value,i.value);return a.valid?((Lc(s)||Lc(i))&&r.dirty(),{status:r.value,value:a.data}):(N(o,{code:C.invalid_intersection_types}),G)};return o.common.async?Promise.all([this._def.left._parseAsync({data:o.data,path:o.path,parent:o}),this._def.right._parseAsync({data:o.data,path:o.path,parent:o})]).then(([s,i])=>n(s,i)):n(this._def.left._parseSync({data:o.data,path:o.path,parent:o}),this._def.right._parseSync({data:o.data,path:o.path,parent:o}))}};ts.create=(e,t,r)=>new ts({left:e,right:t,typeName:W.ZodIntersection,...K(r)});var mo=class e extends J{_parse(t){let{status:r,ctx:o}=this._processInputParams(t);if(o.parsedType!==k.array)return N(o,{code:C.invalid_type,expected:k.array,received:o.parsedType}),G;if(o.data.length<this._def.items.length)return N(o,{code:C.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),G;!this._def.rest&&o.data.length>this._def.items.length&&(N(o,{code:C.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let s=[...o.data].map((i,a)=>{let c=this._def.items[a]||this._def.rest;return c?c._parse(new rr(o,i,o.path,a)):null}).filter(i=>!!i);return o.common.async?Promise.all(s).then(i=>nt.mergeArray(r,i)):nt.mergeArray(r,s)}get items(){return this._def.items}rest(t){return new e({...this._def,rest:t})}};mo.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new mo({items:e,typeName:W.ZodTuple,rest:null,...K(t)})};var Fc=class e extends J{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:o}=this._processInputParams(t);if(o.parsedType!==k.object)return N(o,{code:C.invalid_type,expected:k.object,received:o.parsedType}),G;let n=[],s=this._def.keyType,i=this._def.valueType;for(let a in o.data)n.push({key:s._parse(new rr(o,a,o.path,a)),value:i._parse(new rr(o,o.data[a],o.path,a)),alwaysSet:a in o.data});return o.common.async?nt.mergeObjectAsync(r,n):nt.mergeObjectSync(r,n)}get element(){return this._def.valueType}static create(t,r,o){return r instanceof J?new e({keyType:t,valueType:r,typeName:W.ZodRecord,...K(o)}):new e({keyType:mn.create(),valueType:t,typeName:W.ZodRecord,...K(r)})}},Xs=class extends J{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:o}=this._processInputParams(t);if(o.parsedType!==k.map)return N(o,{code:C.invalid_type,expected:k.map,received:o.parsedType}),G;let n=this._def.keyType,s=this._def.valueType,i=[...o.data.entries()].map(([a,c],l)=>({key:n._parse(new rr(o,a,o.path,[l,"key"])),value:s._parse(new rr(o,c,o.path,[l,"value"]))}));if(o.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let c of i){let l=await c.key,p=await c.value;if(l.status==="aborted"||p.status==="aborted")return G;(l.status==="dirty"||p.status==="dirty")&&r.dirty(),a.set(l.value,p.value)}return{status:r.value,value:a}})}else{let a=new Map;for(let c of i){let l=c.key,p=c.value;if(l.status==="aborted"||p.status==="aborted")return G;(l.status==="dirty"||p.status==="dirty")&&r.dirty(),a.set(l.value,p.value)}return{status:r.value,value:a}}}};Xs.create=(e,t,r)=>new Xs({valueType:t,keyType:e,typeName:W.ZodMap,...K(r)});var Qs=class e extends J{_parse(t){let{status:r,ctx:o}=this._processInputParams(t);if(o.parsedType!==k.set)return N(o,{code:C.invalid_type,expected:k.set,received:o.parsedType}),G;let n=this._def;n.minSize!==null&&o.data.size<n.minSize.value&&(N(o,{code:C.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),r.dirty()),n.maxSize!==null&&o.data.size>n.maxSize.value&&(N(o,{code:C.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),r.dirty());let s=this._def.valueType;function i(c){let l=new Set;for(let p of c){if(p.status==="aborted")return G;p.status==="dirty"&&r.dirty(),l.add(p.value)}return{status:r.value,value:l}}let a=[...o.data.values()].map((c,l)=>s._parse(new rr(o,c,o.path,l)));return o.common.async?Promise.all(a).then(c=>i(c)):i(a)}min(t,r){return new e({...this._def,minSize:{value:t,message:U.toString(r)}})}max(t,r){return new e({...this._def,maxSize:{value:t,message:U.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}};Qs.create=(e,t)=>new Qs({valueType:e,minSize:null,maxSize:null,typeName:W.ZodSet,...K(t)});var Bc=class e extends J{constructor(){super(...arguments),this.validate=this.implement}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==k.function)return N(r,{code:C.invalid_type,expected:k.function,received:r.parsedType}),G;function o(a,c){return ea({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,zs(),Uo].filter(l=>!!l),issueData:{code:C.invalid_arguments,argumentsError:c}})}function n(a,c){return ea({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,zs(),Uo].filter(l=>!!l),issueData:{code:C.invalid_return_type,returnTypeError:c}})}let s={errorMap:r.common.contextualErrorMap},i=r.data;if(this._def.returns instanceof gn){let a=this;return ut(async function(...c){let l=new At([]),p=await a._def.args.parseAsync(c,s).catch(m=>{throw l.addIssue(o(c,m)),l}),u=await Reflect.apply(i,this,p);return await a._def.returns._def.type.parseAsync(u,s).catch(m=>{throw l.addIssue(n(u,m)),l})})}else{let a=this;return ut(function(...c){let l=a._def.args.safeParse(c,s);if(!l.success)throw new At([o(c,l.error)]);let p=Reflect.apply(i,this,l.data),u=a._def.returns.safeParse(p,s);if(!u.success)throw new At([n(p,u.error)]);return u.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new e({...this._def,args:mo.create(t).rest(Bo.create())})}returns(t){return new e({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,o){return new e({args:t||mo.create([]).rest(Bo.create()),returns:r||Bo.create(),typeName:W.ZodFunction,...K(o)})}},rs=class extends J{get schema(){return this._def.getter()}_parse(t){let{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};rs.create=(e,t)=>new rs({getter:e,typeName:W.ZodLazy,...K(t)});var os=class extends J{_parse(t){if(t.data!==this._def.value){let r=this._getOrReturnCtx(t);return N(r,{received:r.data,code:C.invalid_literal,expected:this._def.value}),G}return{status:"valid",value:t.data}}get value(){return this._def.value}};os.create=(e,t)=>new os({value:e,typeName:W.ZodLiteral,...K(t)});function zx(e,t){return new ns({values:e,typeName:W.ZodEnum,...K(t)})}var ns=class e extends J{_parse(t){if(typeof t.data!="string"){let r=this._getOrReturnCtx(t),o=this._def.values;return N(r,{expected:ee.joinValues(o),received:r.parsedType,code:C.invalid_type}),G}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){let r=this._getOrReturnCtx(t),o=this._def.values;return N(r,{received:r.data,code:C.invalid_enum_value,options:o}),G}return ut(t.data)}get options(){return this._def.values}get enum(){let t={};for(let r of this._def.values)t[r]=r;return t}get Values(){let t={};for(let r of this._def.values)t[r]=r;return t}get Enum(){let t={};for(let r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return e.create(t,{...this._def,...r})}exclude(t,r=this._def){return e.create(this.options.filter(o=>!t.includes(o)),{...this._def,...r})}};ns.create=zx;var ss=class extends J{_parse(t){let r=ee.getValidEnumValues(this._def.values),o=this._getOrReturnCtx(t);if(o.parsedType!==k.string&&o.parsedType!==k.number){let n=ee.objectValues(r);return N(o,{expected:ee.joinValues(n),received:o.parsedType,code:C.invalid_type}),G}if(this._cache||(this._cache=new Set(ee.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){let n=ee.objectValues(r);return N(o,{received:o.data,code:C.invalid_enum_value,options:n}),G}return ut(t.data)}get enum(){return this._def.values}};ss.create=(e,t)=>new ss({values:e,typeName:W.ZodNativeEnum,...K(t)});var gn=class extends J{unwrap(){return this._def.type}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==k.promise&&r.common.async===!1)return N(r,{code:C.invalid_type,expected:k.promise,received:r.parsedType}),G;let o=r.parsedType===k.promise?r.data:Promise.resolve(r.data);return ut(o.then(n=>this._def.type.parseAsync(n,{path:r.path,errorMap:r.common.contextualErrorMap})))}};gn.create=(e,t)=>new gn({type:e,typeName:W.ZodPromise,...K(t)});var or=class extends J{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===W.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){let{status:r,ctx:o}=this._processInputParams(t),n=this._def.effect||null,s={addIssue:i=>{N(o,i),i.fatal?r.abort():r.dirty()},get path(){return o.path}};if(s.addIssue=s.addIssue.bind(s),n.type==="preprocess"){let i=n.transform(o.data,s);if(o.common.async)return Promise.resolve(i).then(async a=>{if(r.value==="aborted")return G;let c=await this._def.schema._parseAsync({data:a,path:o.path,parent:o});return c.status==="aborted"?G:c.status==="dirty"?Kn(c.value):r.value==="dirty"?Kn(c.value):c});{if(r.value==="aborted")return G;let a=this._def.schema._parseSync({data:i,path:o.path,parent:o});return a.status==="aborted"?G:a.status==="dirty"?Kn(a.value):r.value==="dirty"?Kn(a.value):a}}if(n.type==="refinement"){let i=a=>{let c=n.refinement(a,s);if(o.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(o.common.async===!1){let a=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});return a.status==="aborted"?G:(a.status==="dirty"&&r.dirty(),i(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(a=>a.status==="aborted"?G:(a.status==="dirty"&&r.dirty(),i(a.value).then(()=>({status:r.value,value:a.value}))))}if(n.type==="transform")if(o.common.async===!1){let i=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});if(!fn(i))return G;let a=n.transform(i.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(i=>fn(i)?Promise.resolve(n.transform(i.value,s)).then(a=>({status:r.value,value:a})):G);ee.assertNever(n)}};or.create=(e,t,r)=>new or({schema:e,typeName:W.ZodEffects,effect:t,...K(r)});or.createWithPreprocess=(e,t,r)=>new or({schema:t,effect:{type:"preprocess",transform:e},typeName:W.ZodEffects,...K(r)});var tr=class extends J{_parse(t){return this._getType(t)===k.undefined?ut(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};tr.create=(e,t)=>new tr({innerType:e,typeName:W.ZodOptional,...K(t)});var ho=class extends J{_parse(t){return this._getType(t)===k.null?ut(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};ho.create=(e,t)=>new ho({innerType:e,typeName:W.ZodNullable,...K(t)});var is=class extends J{_parse(t){let{ctx:r}=this._processInputParams(t),o=r.data;return r.parsedType===k.undefined&&(o=this._def.defaultValue()),this._def.innerType._parse({data:o,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};is.create=(e,t)=>new is({innerType:e,typeName:W.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...K(t)});var as=class extends J{_parse(t){let{ctx:r}=this._processInputParams(t),o={...r,common:{...r.common,issues:[]}},n=this._def.innerType._parse({data:o.data,path:o.path,parent:{...o}});return Ks(n)?n.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new At(o.common.issues)},input:o.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new At(o.common.issues)},input:o.data})}}removeCatch(){return this._def.innerType}};as.create=(e,t)=>new as({innerType:e,typeName:W.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...K(t)});var Zs=class extends J{_parse(t){if(this._getType(t)!==k.nan){let o=this._getOrReturnCtx(t);return N(o,{code:C.invalid_type,expected:k.nan,received:o.parsedType}),G}return{status:"valid",value:t.data}}};Zs.create=e=>new Zs({typeName:W.ZodNaN,...K(e)});var V$=Symbol("zod_brand"),ta=class extends J{_parse(t){let{ctx:r}=this._processInputParams(t),o=r.data;return this._def.type._parse({data:o,path:r.path,parent:r})}unwrap(){return this._def.type}},ra=class e extends J{_parse(t){let{status:r,ctx:o}=this._processInputParams(t);if(o.common.async)return(async()=>{let s=await this._def.in._parseAsync({data:o.data,path:o.path,parent:o});return s.status==="aborted"?G:s.status==="dirty"?(r.dirty(),Kn(s.value)):this._def.out._parseAsync({data:s.value,path:o.path,parent:o})})();{let n=this._def.in._parseSync({data:o.data,path:o.path,parent:o});return n.status==="aborted"?G:n.status==="dirty"?(r.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:o.path,parent:o})}}static create(t,r){return new e({in:t,out:r,typeName:W.ZodPipeline})}},cs=class extends J{_parse(t){let r=this._def.innerType._parse(t),o=n=>(fn(n)&&(n.value=Object.freeze(n.value)),n);return Ks(r)?r.then(n=>o(n)):o(r)}unwrap(){return this._def.innerType}};cs.create=(e,t)=>new cs({innerType:e,typeName:W.ZodReadonly,...K(t)});function Vx(e,t){let r=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof r=="string"?{message:r}:r}function Kx(e,t={},r){return e?hn.create().superRefine((o,n)=>{let s=e(o);if(s instanceof Promise)return s.then(i=>{if(!i){let a=Vx(t,o),c=a.fatal??r??!0;n.addIssue({code:"custom",...a,fatal:c})}});if(!s){let i=Vx(t,o),a=i.fatal??r??!0;n.addIssue({code:"custom",...i,fatal:a})}}):hn.create()}var G$={object:Pt.lazycreate},W;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(W||(W={}));var j$=(e,t={message:`Input not instance of ${e.name}`})=>Kx(r=>r instanceof e,t),qx=mn.create,Jx=qn.create,W$=Zs.create,z$=Jn.create,Yx=Yn.create,K$=Xn.create,q$=Js.create,J$=Qn.create,Y$=Zn.create,X$=hn.create,Q$=Bo.create,Z$=to.create,e3=Ys.create,t3=Ho.create,r3=Pt.create,o3=Pt.strictCreate,n3=es.create,s3=Uc.create,i3=ts.create,a3=mo.create,c3=Fc.create,d3=Xs.create,l3=Qs.create,p3=Bc.create,u3=rs.create,f3=os.create,m3=ns.create,h3=ss.create,g3=gn.create,x3=or.create,y3=tr.create,S3=ho.create,E3=or.createWithPreprocess,_3=ra.create,b3=()=>qx().optional(),w3=()=>Jx().optional(),R3=()=>Yx().optional(),I3={string:e=>mn.create({...e,coerce:!0}),number:e=>qn.create({...e,coerce:!0}),boolean:e=>Yn.create({...e,coerce:!0}),bigint:e=>Jn.create({...e,coerce:!0}),date:e=>Xn.create({...e,coerce:!0})};var T3=G;var v3=v.object({AWS_REGION:v.string().default("us-east-1"),STAGE:v.string().default("dev"),DYNAMODB_STAFF_TABLE:v.string().optional(),DYNAMODB_PASSWORD_RESET_TOKENS_TABLE:v.string().optional(),DYNAMODB_TENANTS_TABLE:v.string().optional(),JWT_SECRET:v.string().min(32,"JWT secret must be at least 32 characters long"),JWT_EXPIRY:v.string().default("24h"),SES_FROM_EMAIL:v.string().email().optional(),SES_REGION:v.string().default("us-east-1"),CORS_ORIGINS:v.string().optional(),APP_BASE_URL:v.string().optional(),LOG_LEVEL:v.enum(["debug","info","warn","error"]).default("info"),ENABLE_XRAY:v.string().transform(e=>e==="true").default("true"),BCRYPT_ROUNDS:v.string().transform(e=>parseInt(e,10)).default("12"),PASSWORD_RESET_TOKEN_EXPIRY_HOURS:v.string().transform(e=>parseInt(e,10)).default("24"),CONNECTION_TIMEOUT:v.string().transform(e=>parseInt(e,10)).default("5000"),REQUEST_TIMEOUT:v.string().transform(e=>parseInt(e,10)).default("30000")}),Hc=null;function C3(){if(Hc)return Hc;try{let e=v3.parse(process.env);return Hc={aws:{region:e.AWS_REGION},stage:e.STAGE,dynamodb:{staffTable:e.DYNAMODB_STAFF_TABLE||`Staff-${e.STAGE}`,passwordResetTokensTable:e.DYNAMODB_PASSWORD_RESET_TOKENS_TABLE||`PasswordResetTokens-${e.STAGE}`,tenantsTable:e.DYNAMODB_TENANTS_TABLE||`Tenants-${e.STAGE}`},jwt:{secret:e.JWT_SECRET,expiry:e.JWT_EXPIRY},ses:{fromEmail:e.SES_FROM_EMAIL||`noreply@${e.STAGE==="prod"?"example.com":"dev.example.com"}`,region:e.SES_REGION},cors:{origins:e.CORS_ORIGINS?e.CORS_ORIGINS.split(",").map(t=>t.trim()):e.STAGE==="prod"?[]:["*"]},app:{baseUrl:e.APP_BASE_URL||`https://${e.STAGE==="prod"?"app.example.com":`${e.STAGE}.example.com`}`},logging:{level:e.LOG_LEVEL,enableXray:e.ENABLE_XRAY},security:{bcryptRounds:e.BCRYPT_ROUNDS,passwordResetTokenExpiryHours:e.PASSWORD_RESET_TOKEN_EXPIRY_HOURS},performance:{connectionTimeout:e.CONNECTION_TIMEOUT,requestTimeout:e.REQUEST_TIMEOUT}},Hc}catch(e){if(e instanceof v.ZodError){let t=e.errors.map(r=>`${r.path.join(".")}: ${r.message}`);throw new Error(`Configuration validation failed:
${t.join(`
`)}`)}throw e}}function ro(){return C3()}var A3={origins:["*"],methods:["GET","POST","PUT","DELETE","OPTIONS"],headers:["Content-Type","Authorization","X-Correlation-ID"],credentials:!1,maxAge:86400};function Xx(e,t=A3){let r={};return t.origins.includes("*")?r["Access-Control-Allow-Origin"]="*":e&&t.origins.includes(e)&&(r["Access-Control-Allow-Origin"]=e),r["Access-Control-Allow-Methods"]=t.methods.join(", "),r["Access-Control-Allow-Headers"]=t.headers.join(", "),t.credentials&&(r["Access-Control-Allow-Credentials"]="true"),t.maxAge&&(r["Access-Control-Max-Age"]=t.maxAge.toString()),r}var Vc=class{_statusCode=200;_headers={"Content-Type":"application/json",...Xx()};_body="";_ended=!1;status(t){return this._statusCode=t,this}json(t){return this._headers["Content-Type"]="application/json",this._body=JSON.stringify(t),this._ended=!0,this}send(t){return this._body=t,this._ended=!0,this}header(t,r){return this._headers[t]=r,this}end(){this._ended=!0}toApiGatewayResponse(){return{statusCode:this._statusCode,headers:this._headers,body:this._body}}};function Qx(e,t,r,o){return{error:{code:e,message:t,details:o,correlationId:r},timestamp:new Date().toISOString()}}function af(e){switch(e){case"ValidationError":return 400;case"Unauthorized":return 401;case"Forbidden":return 403;case"NotFound":return 404;case"Conflict":return 409;case"InternalError":default:return 500}}function M(e,t,r,o,n){let s=af(t),i=Qx(t,r,o,n);e.status(s).json(i)}var oa=class{routes=[];globalMiddlewares=[];constructor(t={}){}use(t){this.globalMiddlewares.push(t)}get(t,...r){this.addRoute("GET",t,...r)}post(t,...r){this.addRoute("POST",t,...r)}put(t,...r){this.addRoute("PUT",t,...r)}delete(t,...r){this.addRoute("DELETE",t,...r)}options(t,...r){this.addRoute("OPTIONS",t,...r)}addRoute(t,r,...o){let n=o[o.length-1],s=o.slice(0,-1);this.routes.push({method:t.toUpperCase(),path:r,handler:n,middlewares:s})}findRoute(t,r){for(let o of this.routes)if(o.method===t.toUpperCase()){if(o.path===r)return{route:o,params:{}};if(this.pathMatches(o.path,r)){let n=Ux(r,o.path);return{route:o,params:n}}}return null}pathMatches(t,r){let o=t.split("/"),n=r.split("/");if(o.length!==n.length)return!1;for(let s=0;s<o.length;s++){let i=o[s],a=n[s];if(!i?.startsWith(":")&&i!==a)return!1}return!0}async executeMiddlewares(t,r,o){let n=0,s=async()=>{if(n>=t.length)return;let i=t[n++];i&&await i(r,o,s)};try{return await s(),!o._ended}catch(i){return console.error("Middleware error:",i),o._ended||M(o,"InternalError","Internal server error",r.correlationId),!1}}async handle(t,r){let o=(t.httpMethod||t.requestContext?.http?.method)?.toUpperCase(),n=t.path||t.rawPath;if(!o)return{statusCode:400,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({error:{code:"BadRequest",message:"Missing HTTP method in request",correlationId:t.requestContext?.requestId||"unknown"},timestamp:new Date().toISOString()})};if(!n)return{statusCode:400,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({error:{code:"BadRequest",message:"Missing path in request",correlationId:t.requestContext?.requestId||"unknown"},timestamp:new Date().toISOString()})};if(o==="OPTIONS")return{statusCode:200,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Content-Type,Authorization","Access-Control-Allow-Methods":"GET,POST,PUT,DELETE,OPTIONS"},body:""};let s=this.findRoute(o,n);if(!s)return{statusCode:404,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({error:{code:"NotFound",message:`Route ${o} ${n} not found`,correlationId:t.requestContext?.requestId||"unknown"},timestamp:new Date().toISOString()})};let{route:i,params:a}=s,c=Fx(t,r,a),l=new Vc;try{let p=[...this.globalMiddlewares,...i.middlewares||[]];return await this.executeMiddlewares(p,c,l)&&!l._ended&&await i.handler(c,l),l._ended||l.status(500).json({error:{code:"InternalError",message:"Handler did not send a response",correlationId:c.correlationId},timestamp:new Date().toISOString()}),l.toApiGatewayResponse()}catch(p){return console.error("Route handler error:",p),l._ended||M(l,"InternalError","Internal server error",c.correlationId),l.toApiGatewayResponse()}}},wj=new oa;function cf(e={}){let{origins:t=["*"],methods:r=["GET","POST","PUT","DELETE","OPTIONS"],headers:o=["Content-Type","Authorization","X-Correlation-ID"],credentials:n=!1}=e;return async(s,i,a)=>{let c=s.headers.origin||s.headers.Origin,l="*";if(t.length>0&&!t.includes("*")&&(c&&t.includes(c)?l=c:l=t[0]||"*"),i.header("Access-Control-Allow-Origin",l),i.header("Access-Control-Allow-Methods",r.join(", ")),i.header("Access-Control-Allow-Headers",o.join(", ")),n&&i.header("Access-Control-Allow-Credentials","true"),s.method==="OPTIONS"){i.status(200).send("");return}await a()}}function lf(e={}){let{enableRequestLogging:t=!0,enableResponseLogging:r=!0,logLevel:o="info",sensitiveHeaders:n=["authorization","cookie","x-api-key"]}=e;return async(s,i,a)=>{let c=Date.now();if(t){let f=P3(s.headers,n);console.log(JSON.stringify({level:o,message:"Incoming request",correlationId:s.correlationId,method:s.method,path:s.path,headers:f,query:s.query,timestamp:new Date().toISOString(),requestId:s.rawEvent.requestContext.requestId}))}let l=i.json.bind(i),p=i.send.bind(i),u=i.end.bind(i);r&&(i.json=function(f){return df(s.correlationId,i._statusCode,f,c),l(f)},i.send=function(f){return df(s.correlationId,i._statusCode,f,c),p(f)},i.end=function(){return df(s.correlationId,i._statusCode,i._body,c),u()});try{await a()}catch(f){throw console.error(JSON.stringify({level:"error",message:"Request processing error",correlationId:s.correlationId,error:f instanceof Error?{name:f.name,message:f.message,stack:f.stack}:f,timestamp:new Date().toISOString()})),f}}}function P3(e,t){let r={};for(let[o,n]of Object.entries(e))t.includes(o.toLowerCase())?r[o]="[REDACTED]":r[o]=n;return r}function df(e,t,r,o){let n=Date.now()-o;console.log(JSON.stringify({level:"info",message:"Response sent",correlationId:e,statusCode:t,duration:`${n}ms`,bodySize:typeof r=="string"?r.length:JSON.stringify(r).length,timestamp:new Date().toISOString()}))}function oo(e){return async(t,r,o)=>{try{if(e.body){let n=e.body.safeParse(t.body);if(!n.success){M(r,"ValidationError","Invalid request body",t.correlationId,{field:"body",errors:n.error.errors});return}t.body=n.data}if(e.query){let n=e.query.safeParse(t.query);if(!n.success){M(r,"ValidationError","Invalid query parameters",t.correlationId,{field:"query",errors:n.error.errors});return}t.query=n.data}if(e.params){let n=e.params.safeParse(t.params);if(!n.success){M(r,"ValidationError","Invalid path parameters",t.correlationId,{field:"params",errors:n.error.errors});return}t.params=n.data}if(e.headers){let n=e.headers.safeParse(t.headers);if(!n.success){M(r,"ValidationError","Invalid headers",t.correlationId,{field:"headers",errors:n.error.errors});return}}await o()}catch(n){console.error("Validation middleware error:",n),M(r,"InternalError","Validation error",t.correlationId)}}}var D3={email:v.string().email().transform(e=>e.toLowerCase().trim()),staffId:v.string().uuid(),tenantId:v.string().uuid(),correlationId:v.string().uuid().optional(),pagination:v.object({limit:v.coerce.number().int().min(1).max(100).default(20),offset:v.coerce.number().int().min(0).default(0)}),authHeaders:v.object({authorization:v.string().regex(/^Bearer .+/,"Authorization header must be Bearer token")})};import{Buffer as Zx}from"node:buffer";var nr=new TextEncoder,no=new TextDecoder,Pj=2**32;function Gc(...e){let t=e.reduce((n,{length:s})=>n+s,0),r=new Uint8Array(t),o=0;for(let n of e)r.set(n,o),o+=n.length;return r}function N3(e){let t=e;return t instanceof Uint8Array&&(t=no.decode(t)),t}var jc=e=>Zx.from(e).toString("base64url");var ei=e=>new Uint8Array(Zx.from(N3(e),"base64url"));var Vo=class extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(t,r){super(t,r),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}},Kt=class extends Vo{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(t,r,o="unspecified",n="unspecified"){super(t,{cause:{claim:o,reason:n,payload:r}}),this.claim=o,this.reason=n,this.payload=r}},na=class extends Vo{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(t,r,o="unspecified",n="unspecified"){super(t,{cause:{claim:o,reason:n,payload:r}}),this.claim=o,this.reason=n,this.payload=r}},Wc=class extends Vo{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"},Rt=class extends Vo{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"};var Ae=class extends Vo{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"},xn=class extends Vo{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"};var zc=class extends Vo{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(t="signature verification failed",r){super(t,r)}};import*as ey from"node:util";var Kc=e=>ey.types.isKeyObject(e);import*as ty from"node:crypto";import*as ry from"node:util";var k3=ty.webcrypto,oy=k3,ti=e=>ry.types.isCryptoKey(e);function go(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function sa(e,t){return e.name===t}function pf(e){return parseInt(e.name.slice(4),10)}function $3(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function M3(e,t){if(t.length&&!t.some(r=>e.usages.includes(r))){let r="CryptoKey does not support this operation, its usages must include ";if(t.length>2){let o=t.pop();r+=`one of ${t.join(", ")}, or ${o}.`}else t.length===2?r+=`one of ${t[0]} or ${t[1]}.`:r+=`${t[0]}.`;throw new TypeError(r)}}function ny(e,t,...r){switch(t){case"HS256":case"HS384":case"HS512":{if(!sa(e.algorithm,"HMAC"))throw go("HMAC");let o=parseInt(t.slice(2),10);if(pf(e.algorithm.hash)!==o)throw go(`SHA-${o}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!sa(e.algorithm,"RSASSA-PKCS1-v1_5"))throw go("RSASSA-PKCS1-v1_5");let o=parseInt(t.slice(2),10);if(pf(e.algorithm.hash)!==o)throw go(`SHA-${o}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!sa(e.algorithm,"RSA-PSS"))throw go("RSA-PSS");let o=parseInt(t.slice(2),10);if(pf(e.algorithm.hash)!==o)throw go(`SHA-${o}`,"algorithm.hash");break}case"EdDSA":{if(e.algorithm.name!=="Ed25519"&&e.algorithm.name!=="Ed448")throw go("Ed25519 or Ed448");break}case"Ed25519":{if(!sa(e.algorithm,"Ed25519"))throw go("Ed25519");break}case"ES256":case"ES384":case"ES512":{if(!sa(e.algorithm,"ECDSA"))throw go("ECDSA");let o=$3(t);if(e.algorithm.namedCurve!==o)throw go(o,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}M3(e,r)}function sy(e,t,...r){if(r=r.filter(Boolean),r.length>2){let o=r.pop();e+=`one of type ${r.join(", ")}, or ${o}.`}else r.length===2?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return t==null?e+=` Received ${t}`:typeof t=="function"&&t.name?e+=` Received function ${t.name}`:typeof t=="object"&&t!=null&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}var ia=(e,...t)=>sy("Key must be ",e,...t);function uf(e,t,...r){return sy(`Key for the ${e} algorithm must be `,t,...r)}var ff=e=>Kc(e)||ti(e),Go=["KeyObject"];(globalThis.CryptoKey||oy?.CryptoKey)&&Go.push("CryptoKey");var L3=(...e)=>{let t=e.filter(Boolean);if(t.length===0||t.length===1)return!0;let r;for(let o of t){let n=Object.keys(o);if(!r||r.size===0){r=new Set(n);continue}for(let s of n){if(r.has(s))return!1;r.add(s)}}return!0},qc=L3;function U3(e){return typeof e=="object"&&e!==null}function sr(e){if(!U3(e)||Object.prototype.toString.call(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}import{KeyObject as F3}from"node:crypto";function xo(e){return sr(e)&&typeof e.kty=="string"}function iy(e){return e.kty!=="oct"&&typeof e.d=="string"}function ay(e){return e.kty!=="oct"&&typeof e.d>"u"}function cy(e){return xo(e)&&e.kty==="oct"&&typeof e.k=="string"}var B3=e=>{switch(e){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new Rt("Unsupported key curve for this operation")}},H3=(e,t)=>{let r;if(ti(e))r=F3.from(e);else if(Kc(e))r=e;else{if(xo(e))return e.crv;throw new TypeError(ia(e,...Go))}if(r.type==="secret")throw new TypeError('only "private" or "public" type keys can be used for this operation');switch(r.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${r.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${r.asymmetricKeyType.slice(1)}`;case"ec":{let o=r.asymmetricKeyDetails.namedCurve;return t?o:B3(o)}default:throw new TypeError("Invalid asymmetric key type for this operation")}},ly=H3;import{KeyObject as V3}from"node:crypto";var mf=(e,t)=>{let r;try{e instanceof V3?r=e.asymmetricKeyDetails?.modulusLength:r=Buffer.from(e.n,"base64url").byteLength<<3}catch{}if(typeof r!="number"||r<2048)throw new TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)};import{createPrivateKey as G3,createPublicKey as j3}from"node:crypto";var W3=e=>e.d?G3({format:"jwk",key:e}):j3({format:"jwk",key:e}),py=W3;async function uy(e,t){if(!sr(e))throw new TypeError("JWK must be an object");switch(t||=e.alg,e.kty){case"oct":if(typeof e.k!="string"||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return ei(e.k);case"RSA":if("oth"in e&&e.oth!==void 0)throw new Rt('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return py({...e,alg:t});default:throw new Rt('Unsupported "kty" (Key Type) Parameter value')}}var ri=e=>e?.[Symbol.toStringTag],hf=(e,t,r)=>{if(t.use!==void 0&&t.use!=="sig")throw new TypeError("Invalid key for this operation, when present its use must be sig");if(t.key_ops!==void 0&&t.key_ops.includes?.(r)!==!0)throw new TypeError(`Invalid key for this operation, when present its key_ops must include ${r}`);if(t.alg!==void 0&&t.alg!==e)throw new TypeError(`Invalid key for this operation, when present its alg must be ${e}`);return!0},z3=(e,t,r,o)=>{if(!(t instanceof Uint8Array)){if(o&&xo(t)){if(cy(t)&&hf(e,t,r))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!ff(t))throw new TypeError(uf(e,t,...Go,"Uint8Array",o?"JSON Web Key":null));if(t.type!=="secret")throw new TypeError(`${ri(t)} instances for symmetric algorithms must be of type "secret"`)}},K3=(e,t,r,o)=>{if(o&&xo(t))switch(r){case"sign":if(iy(t)&&hf(e,t,r))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"verify":if(ay(t)&&hf(e,t,r))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!ff(t))throw new TypeError(uf(e,t,...Go,o?"JSON Web Key":null));if(t.type==="secret")throw new TypeError(`${ri(t)} instances for asymmetric algorithms must not be of type "secret"`);if(r==="sign"&&t.type==="public")throw new TypeError(`${ri(t)} instances for asymmetric algorithm signing must be of type "private"`);if(r==="decrypt"&&t.type==="public")throw new TypeError(`${ri(t)} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&r==="verify"&&t.type==="private")throw new TypeError(`${ri(t)} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&r==="encrypt"&&t.type==="private")throw new TypeError(`${ri(t)} instances for asymmetric algorithm encryption must be of type "public"`)};function fy(e,t,r,o){t.startsWith("HS")||t==="dir"||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t)?z3(t,r,o,e):K3(t,r,o,e)}var l7=fy.bind(void 0,!1),aa=fy.bind(void 0,!0);function q3(e,t,r,o,n){if(n.crit!==void 0&&o?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!o||o.crit===void 0)return new Set;if(!Array.isArray(o.crit)||o.crit.length===0||o.crit.some(i=>typeof i!="string"||i.length===0))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let s;r!==void 0?s=new Map([...Object.entries(r),...t.entries()]):s=t;for(let i of o.crit){if(!s.has(i))throw new Rt(`Extension Header Parameter "${i}" is not recognized`);if(n[i]===void 0)throw new e(`Extension Header Parameter "${i}" is missing`);if(s.get(i)&&o[i]===void 0)throw new e(`Extension Header Parameter "${i}" MUST be integrity protected`)}return new Set(o.crit)}var Jc=q3;var J3=(e,t)=>{if(t!==void 0&&(!Array.isArray(t)||t.some(r=>typeof r!="string")))throw new TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)},my=J3;import*as Qc from"node:crypto";import{promisify as tM}from"node:util";function ca(e){switch(e){case"PS256":case"RS256":case"ES256":case"ES256K":return"sha256";case"PS384":case"RS384":case"ES384":return"sha384";case"PS512":case"RS512":case"ES512":return"sha512";case"Ed25519":case"EdDSA":return;default:throw new Rt(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}import{constants as hy,KeyObject as Y3}from"node:crypto";var X3=new Map([["ES256","P-256"],["ES256K","secp256k1"],["ES384","P-384"],["ES512","P-521"]]);function da(e,t){let r,o,n;if(t instanceof Y3)r=t.asymmetricKeyType,o=t.asymmetricKeyDetails;else switch(n=!0,t.kty){case"RSA":r="rsa";break;case"EC":r="ec";break;case"OKP":{if(t.crv==="Ed25519"){r="ed25519";break}if(t.crv==="Ed448"){r="ed448";break}throw new TypeError("Invalid key for this operation, its crv must be Ed25519 or Ed448")}default:throw new TypeError("Invalid key for this operation, its kty must be RSA, OKP, or EC")}let s;switch(e){case"Ed25519":if(r!=="ed25519")throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519");break;case"EdDSA":if(!["ed25519","ed448"].includes(r))throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448");break;case"RS256":case"RS384":case"RS512":if(r!=="rsa")throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");mf(t,e);break;case"PS256":case"PS384":case"PS512":if(r==="rsa-pss"){let{hashAlgorithm:i,mgf1HashAlgorithm:a,saltLength:c}=o,l=parseInt(e.slice(-3),10);if(i!==void 0&&(i!==`sha${l}`||a!==i))throw new TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}`);if(c!==void 0&&c>l>>3)throw new TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}`)}else if(r!=="rsa")throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss");mf(t,e),s={padding:hy.RSA_PKCS1_PSS_PADDING,saltLength:hy.RSA_PSS_SALTLEN_DIGEST};break;case"ES256":case"ES256K":case"ES384":case"ES512":{if(r!=="ec")throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be ec");let i=ly(t),a=X3.get(e);if(i!==a)throw new TypeError(`Invalid key curve for the algorithm, its curve must be ${a}, got ${i}`);s={dsaEncoding:"ieee-p1363"};break}default:throw new Rt(`alg ${e} is not supported either by JOSE or your javascript runtime`)}return n?{format:"jwk",key:t,...s}:s?{...s,key:t}:t}import*as Yc from"node:crypto";import{promisify as Q3}from"node:util";function gf(e){switch(e){case"HS256":return"sha256";case"HS384":return"sha384";case"HS512":return"sha512";default:throw new Rt(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}import{KeyObject as gy,createSecretKey as xy}from"node:crypto";function la(e,t,r){if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(ia(t,...Go));return xy(t)}if(t instanceof gy)return t;if(ti(t))return ny(t,e,r),gy.from(t);if(xo(t))return e.startsWith("HS")?xy(Buffer.from(t.k,"base64url")):t;throw new TypeError(ia(t,...Go,"Uint8Array","JSON Web Key"))}var Z3=Q3(Yc.sign),eM=async(e,t,r)=>{let o=la(e,t,"sign");if(e.startsWith("HS")){let n=Yc.createHmac(gf(e),o);return n.update(r),n.digest()}return Z3(ca(e),r,da(e,o))},Xc=eM;var rM=tM(Qc.verify),oM=async(e,t,r,o)=>{let n=la(e,t,"verify");if(e.startsWith("HS")){let a=await Xc(e,n,o),c=r;try{return Qc.timingSafeEqual(c,a)}catch{return!1}}let s=ca(e),i=da(e,n);try{return await rM(s,o,i,r)}catch{return!1}},yy=oM;async function Sy(e,t,r){if(!sr(e))throw new Ae("Flattened JWS must be an object");if(e.protected===void 0&&e.header===void 0)throw new Ae('Flattened JWS must have either of the "protected" or "header" members');if(e.protected!==void 0&&typeof e.protected!="string")throw new Ae("JWS Protected Header incorrect type");if(e.payload===void 0)throw new Ae("JWS Payload missing");if(typeof e.signature!="string")throw new Ae("JWS Signature missing or incorrect type");if(e.header!==void 0&&!sr(e.header))throw new Ae("JWS Unprotected Header incorrect type");let o={};if(e.protected)try{let E=ei(e.protected);o=JSON.parse(no.decode(E))}catch{throw new Ae("JWS Protected Header is invalid")}if(!qc(o,e.header))throw new Ae("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let n={...o,...e.header},s=Jc(Ae,new Map([["b64",!0]]),r?.crit,o,n),i=!0;if(s.has("b64")&&(i=o.b64,typeof i!="boolean"))throw new Ae('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:a}=n;if(typeof a!="string"||!a)throw new Ae('JWS "alg" (Algorithm) Header Parameter missing or invalid');let c=r&&my("algorithms",r.algorithms);if(c&&!c.has(a))throw new Wc('"alg" (Algorithm) Header Parameter value not allowed');if(i){if(typeof e.payload!="string")throw new Ae("JWS Payload must be a string")}else if(typeof e.payload!="string"&&!(e.payload instanceof Uint8Array))throw new Ae("JWS Payload must be a string or an Uint8Array instance");let l=!1;typeof t=="function"?(t=await t(o,e),l=!0,aa(a,t,"verify"),xo(t)&&(t=await uy(t,a))):aa(a,t,"verify");let p=Gc(nr.encode(e.protected??""),nr.encode("."),typeof e.payload=="string"?nr.encode(e.payload):e.payload),u;try{u=ei(e.signature)}catch{throw new Ae("Failed to base64url decode the signature")}if(!await yy(a,t,u,p))throw new zc;let m;if(i)try{m=ei(e.payload)}catch{throw new Ae("Failed to base64url decode the payload")}else typeof e.payload=="string"?m=nr.encode(e.payload):m=e.payload;let x={payload:m};return e.protected!==void 0&&(x.protectedHeader=o),e.header!==void 0&&(x.unprotectedHeader=e.header),l?{...x,key:t}:x}async function Ey(e,t,r){if(e instanceof Uint8Array&&(e=no.decode(e)),typeof e!="string")throw new Ae("Compact JWS must be a string or Uint8Array");let{0:o,1:n,2:s,length:i}=e.split(".");if(i!==3)throw new Ae("Invalid Compact JWS");let a=await Sy({payload:n,protected:o,signature:s},t,r),c={payload:a.payload,protectedHeader:a.protectedHeader};return typeof t=="function"?{...c,key:a.key}:c}var yo=e=>Math.floor(e.getTime()/1e3);var nM=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,ds=e=>{let t=nM.exec(e);if(!t||t[4]&&t[1])throw new TypeError("Invalid time period format");let r=parseFloat(t[2]),o=t[3].toLowerCase(),n;switch(o){case"sec":case"secs":case"second":case"seconds":case"s":n=Math.round(r);break;case"minute":case"minutes":case"min":case"mins":case"m":n=Math.round(r*60);break;case"hour":case"hours":case"hr":case"hrs":case"h":n=Math.round(r*3600);break;case"day":case"days":case"d":n=Math.round(r*86400);break;case"week":case"weeks":case"w":n=Math.round(r*604800);break;default:n=Math.round(r*31557600);break}return t[1]==="-"||t[4]==="ago"?-n:n};var _y=e=>e.toLowerCase().replace(/^application\//,""),sM=(e,t)=>typeof e=="string"?t.includes(e):Array.isArray(e)?t.some(Set.prototype.has.bind(new Set(e))):!1,by=(e,t,r={})=>{let o;try{o=JSON.parse(no.decode(t))}catch{}if(!sr(o))throw new xn("JWT Claims Set must be a top-level JSON object");let{typ:n}=r;if(n&&(typeof e.typ!="string"||_y(e.typ)!==_y(n)))throw new Kt('unexpected "typ" JWT header value',o,"typ","check_failed");let{requiredClaims:s=[],issuer:i,subject:a,audience:c,maxTokenAge:l}=r,p=[...s];l!==void 0&&p.push("iat"),c!==void 0&&p.push("aud"),a!==void 0&&p.push("sub"),i!==void 0&&p.push("iss");for(let x of new Set(p.reverse()))if(!(x in o))throw new Kt(`missing required "${x}" claim`,o,x,"missing");if(i&&!(Array.isArray(i)?i:[i]).includes(o.iss))throw new Kt('unexpected "iss" claim value',o,"iss","check_failed");if(a&&o.sub!==a)throw new Kt('unexpected "sub" claim value',o,"sub","check_failed");if(c&&!sM(o.aud,typeof c=="string"?[c]:c))throw new Kt('unexpected "aud" claim value',o,"aud","check_failed");let u;switch(typeof r.clockTolerance){case"string":u=ds(r.clockTolerance);break;case"number":u=r.clockTolerance;break;case"undefined":u=0;break;default:throw new TypeError("Invalid clockTolerance option type")}let{currentDate:f}=r,m=yo(f||new Date);if((o.iat!==void 0||l)&&typeof o.iat!="number")throw new Kt('"iat" claim must be a number',o,"iat","invalid");if(o.nbf!==void 0){if(typeof o.nbf!="number")throw new Kt('"nbf" claim must be a number',o,"nbf","invalid");if(o.nbf>m+u)throw new Kt('"nbf" claim timestamp check failed',o,"nbf","check_failed")}if(o.exp!==void 0){if(typeof o.exp!="number")throw new Kt('"exp" claim must be a number',o,"exp","invalid");if(o.exp<=m-u)throw new na('"exp" claim timestamp check failed',o,"exp","check_failed")}if(l){let x=m-o.iat,E=typeof l=="number"?l:ds(l);if(x-u>E)throw new na('"iat" claim timestamp check failed (too far in the past)',o,"iat","check_failed");if(x<0-u)throw new Kt('"iat" claim timestamp check failed (it should be in the past)',o,"iat","check_failed")}return o};async function xf(e,t,r){let o=await Ey(e,t,r);if(o.protectedHeader.crit?.includes("b64")&&o.protectedHeader.b64===!1)throw new xn("JWTs MUST NOT use unencoded payload");let s={payload:by(o.protectedHeader,o.payload,r),protectedHeader:o.protectedHeader};return typeof t=="function"?{...s,key:o.key}:s}var Zc=class{_payload;_protectedHeader;_unprotectedHeader;constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=t}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}async sign(t,r){if(!this._protectedHeader&&!this._unprotectedHeader)throw new Ae("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!qc(this._protectedHeader,this._unprotectedHeader))throw new Ae("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let o={...this._protectedHeader,...this._unprotectedHeader},n=Jc(Ae,new Map([["b64",!0]]),r?.crit,this._protectedHeader,o),s=!0;if(n.has("b64")&&(s=this._protectedHeader.b64,typeof s!="boolean"))throw new Ae('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:i}=o;if(typeof i!="string"||!i)throw new Ae('JWS "alg" (Algorithm) Header Parameter missing or invalid');aa(i,t,"sign");let a=this._payload;s&&(a=nr.encode(jc(a)));let c;this._protectedHeader?c=nr.encode(jc(JSON.stringify(this._protectedHeader))):c=nr.encode("");let l=Gc(c,nr.encode("."),a),p=await Xc(i,t,l),u={signature:jc(p),payload:""};return s&&(u.payload=no.decode(a)),this._unprotectedHeader&&(u.header=this._unprotectedHeader),this._protectedHeader&&(u.protected=no.decode(c)),u}};var ed=class{_flattened;constructor(t){this._flattened=new Zc(t)}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}async sign(t,r){let o=await this._flattened.sign(t,r);if(o.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${o.protected}.${o.payload}.${o.signature}`}};function ls(e,t){if(!Number.isFinite(t))throw new TypeError(`Invalid ${e} input`);return t}var td=class{_payload;constructor(t={}){if(!sr(t))throw new TypeError("JWT Claims Set MUST be an object");this._payload=t}setIssuer(t){return this._payload={...this._payload,iss:t},this}setSubject(t){return this._payload={...this._payload,sub:t},this}setAudience(t){return this._payload={...this._payload,aud:t},this}setJti(t){return this._payload={...this._payload,jti:t},this}setNotBefore(t){return typeof t=="number"?this._payload={...this._payload,nbf:ls("setNotBefore",t)}:t instanceof Date?this._payload={...this._payload,nbf:ls("setNotBefore",yo(t))}:this._payload={...this._payload,nbf:yo(new Date)+ds(t)},this}setExpirationTime(t){return typeof t=="number"?this._payload={...this._payload,exp:ls("setExpirationTime",t)}:t instanceof Date?this._payload={...this._payload,exp:ls("setExpirationTime",yo(t))}:this._payload={...this._payload,exp:yo(new Date)+ds(t)},this}setIssuedAt(t){return typeof t>"u"?this._payload={...this._payload,iat:yo(new Date)}:t instanceof Date?this._payload={...this._payload,iat:ls("setIssuedAt",yo(t))}:typeof t=="string"?this._payload={...this._payload,iat:ls("setIssuedAt",yo(new Date)+ds(t))}:this._payload={...this._payload,iat:ls("setIssuedAt",t)},this}};var pa=class extends td{_protectedHeader;setProtectedHeader(t){return this._protectedHeader=t,this}async sign(t,r){let o=new ed(nr.encode(JSON.stringify(this._payload)));if(o.setProtectedHeader(this._protectedHeader),Array.isArray(this._protectedHeader?.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new xn("JWTs MUST NOT use unencoded payload");return o.sign(t,r)}};var iM=[/password/i,/secret/i,/token/i,/key/i,/auth/i,/credential/i,/ssn/i,/social.security/i,/credit.card/i,/card.number/i,/cvv/i,/pin/i,/phone/i,/email/i,/address/i,/zip/i,/postal/i],aM=/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/g,cM=[/\b\d{3}-\d{3}-\d{4}\b/g,/\b\(\d{3}\)\s*\d{3}-\d{4}\b/g,/\b\d{10}\b/g,/\b\+1\s*\d{3}\s*\d{3}\s*\d{4}\b/g],Sf=class{logLevel;enableConsoleOutput;constructor(t="info",r=!0){this.logLevel=t,this.enableConsoleOutput=r}shouldLog(t){let r=["debug","info","warn","error"],o=r.indexOf(this.logLevel);return r.indexOf(t)>=o}createLogEntry(t,r,o){return{level:t,message:r,timestamp:new Date().toISOString(),...o&&{metadata:this.sanitizeMetadata(o)}}}output(t){this.shouldLog(t.level)&&this.enableConsoleOutput&&console.log(JSON.stringify(t))}debug(t,r){let o=this.createLogEntry("debug",t,r);this.output(o)}info(t,r){let o=this.createLogEntry("info",t,r);this.output(o)}warn(t,r){let o=this.createLogEntry("warn",t,r);this.output(o)}error(t,r,o){let n=this.createLogEntry("error",t,{...o,error:r instanceof Error?{name:r.name,message:r.message,stack:r.stack}:r});this.output(n)}sanitizeMetadata(t){return this.sanitizeObject(t)}sanitizeObject(t){if(t==null)return t;if(typeof t=="string")return this.sanitizeString(t);if(typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(r=>this.sanitizeObject(r));if(typeof t=="object"){let r={};for(let[o,n]of Object.entries(t))this.isPiiField(o)?r[o]="[REDACTED]":r[o]=this.sanitizeObject(n);return r}return t}isPiiField(t){return iM.some(r=>r.test(t))}sanitizeString(t){let r=t;return r=r.replace(aM,"[EMAIL_REDACTED]"),cM.forEach(o=>{r=r.replace(o,"[PHONE_REDACTED]")}),r}},yf=null;function rd(){if(!yf){let e=ro();yf=new Sf(e.logging.level,!0)}return yf}var S={debug:(e,t)=>rd().debug(e,t),info:(e,t)=>rd().info(e,t),warn:(e,t)=>rd().warn(e,t),error:(e,t,r)=>rd().error(e,t,r)};var wy="HS256",Ry="aws-lambda-control-plane",Iy="control-plane-api",dM=()=>{let t=ro().jwt.secret;if(!t)throw new Error("JWT_SECRET environment variable is required");if(t.length<32)throw new Error("JWT_SECRET must be at least 32 characters long");return new TextEncoder().encode(t)},oi=class{secret;constructor(){this.secret=dM(),S.info("JWT helper initialized")}async signToken(t,r){try{S.info("Signing JWT token",{staffId:t.staffId,email:t.email,roles:t.roles,correlationId:r});let o=Math.floor(Date.now()/1e3),n=o+24*60*60,s=await new pa({sub:t.staffId,email:t.email,roles:t.roles,iat:o,exp:n,iss:Ry,aud:Iy}).setProtectedHeader({alg:wy}).sign(this.secret);return S.info("JWT token signed successfully",{staffId:t.staffId,expiresAt:new Date(n*1e3).toISOString(),correlationId:r}),s}catch(o){throw S.error("Failed to sign JWT token",{error:o instanceof Error?o.message:"Unknown error",staffId:t.staffId,correlationId:r}),o}}async verifyToken(t,r){try{S.info("Verifying JWT token",{correlationId:r});let{payload:o}=await xf(t,this.secret,{issuer:Ry,audience:Iy,algorithms:[wy]});if(!o.sub||!o.email||!o.roles)throw new Error("Invalid JWT payload: missing required fields");if(!Array.isArray(o.roles))throw new Error("Invalid JWT payload: roles must be an array");let n={sub:o.sub,email:o.email,roles:o.roles,iat:o.iat,exp:o.exp,...o.iss&&{iss:o.iss},...typeof o.aud=="string"&&{aud:o.aud}};return S.info("JWT token verified successfully",{staffId:n.sub,email:n.email,roles:n.roles,expiresAt:new Date(n.exp*1e3).toISOString(),correlationId:r}),n}catch(o){throw S.error("Failed to verify JWT token",{error:o instanceof Error?o.message:"Unknown error",correlationId:r}),o}}static extractTokenFromHeader(t){if(!t)return null;let r=t.split(" ");return r.length!==2||r[0]!=="Bearer"?null:r[1]||null}static isTokenExpired(t){try{let r=t.split(".");if(r.length!==3)return!0;let o=JSON.parse(atob(r[1])),n=Math.floor(Date.now()/1e3);return o.exp&&o.exp<n}catch{return!0}}static getTokenExpiration(t){try{let r=t.split(".");if(r.length!==3)return null;let o=JSON.parse(atob(r[1]));return o.exp?new Date(o.exp*1e3):null}catch{return null}}},Ef=null,ni={get instance(){return Ef||(Ef=new oi),Ef},signToken:(e,t)=>ni.instance.signToken(e,t),verifyToken:(e,t)=>ni.instance.verifyToken(e,t)};function yn(e={}){let{required:t=!0}=e;return async(r,o,n)=>{try{let s=r.headers.authorization||r.headers.Authorization;if(!s)if(t){S.warn("Missing authorization header",{correlationId:r.correlationId,path:r.path,method:r.method}),M(o,"Unauthorized","Missing authorization header",r.correlationId);return}else{r.context={authenticated:!1},await n();return}let i=oi.extractTokenFromHeader(s);if(!i){S.warn("Invalid authorization header format",{correlationId:r.correlationId,path:r.path,method:r.method}),M(o,"Unauthorized","Invalid authorization header format",r.correlationId);return}if(oi.isTokenExpired(i)){S.warn("Token is expired",{correlationId:r.correlationId,path:r.path,method:r.method}),M(o,"Unauthorized","Token has expired",r.correlationId);return}let a=await ni.verifyToken(i,r.correlationId),c={staff_id:a.sub,email:a.email,roles:a.roles,stage:process.env.STAGE||"dev",authenticated:!0};r.context=c,S.info("Authentication successful",{staffId:c.staff_id,email:c.email,roles:c.roles,correlationId:r.correlationId,path:r.path,method:r.method}),await n()}catch(s){S.error("Authentication middleware error",{error:s instanceof Error?s.message:"Unknown error",correlationId:r.correlationId,path:r.path,method:r.method}),s instanceof Error?s.message.includes("expired")||s.message.includes("exp")?M(o,"Unauthorized","Token has expired",r.correlationId):s.message.includes("signature")||s.message.includes("invalid")?M(o,"Unauthorized","Invalid token signature",r.correlationId):M(o,"Unauthorized","Authentication failed",r.correlationId):M(o,"Unauthorized","Authentication failed",r.correlationId)}}}function _f(e){return async(t,r,o)=>{if(!t.context.authenticated){S.warn("Authorization failed: not authenticated",{correlationId:t.correlationId,path:t.path,method:t.method,requiredRoles:e}),M(r,"Unauthorized","Authentication required",t.correlationId);return}let n=t.context.roles||[];if(!e.some(i=>n.includes(i))){S.warn("Authorization failed: insufficient permissions",{correlationId:t.correlationId,path:t.path,method:t.method,userRoles:n,requiredRoles:e}),M(r,"Forbidden",`Insufficient permissions. Required roles: ${e.join(", ")}`,t.correlationId);return}S.info("Authorization successful",{correlationId:t.correlationId,path:t.path,method:t.method,userRoles:n,requiredRoles:e}),await o()}}var ua=_f(["admin"]),bf=_f(["admin","manager"]);function lM(e={}){let{corsOrigins:t=["*"],enableLogging:r=!0,logLevel:o="info"}=e,n=new oa({corsOrigins:t,enableLogging:r,enableTracing:!0});return r&&n.use(lf({enableRequestLogging:!0,enableResponseLogging:!0,logLevel:o})),n.use(cf({origins:t,methods:["GET","POST","PUT","DELETE","OPTIONS"],headers:["Content-Type","Authorization","X-Correlation-ID"],credentials:!1})),n}function Ty(){let e=process.env.STAGE||"dev",t=e==="prod"?process.env.CORS_ORIGINS?.split(",")||["https://app.example.com"]:["*"];return lM({corsOrigins:t,enableLogging:!0,logLevel:e==="prod"?"info":"debug"})}var si=v.object({staff_id:v.string().uuid(),email:v.string().email().toLowerCase(),password_hash:v.string().min(1),roles:v.array(v.enum(["admin","manager","staff"])).min(1),enabled:v.boolean(),created_at:v.string().datetime(),updated_at:v.string().datetime()}),od=v.object({token_hash:v.string().min(1),staff_id:v.string().uuid(),expires_at:v.number().int().positive(),created_at:v.string().datetime(),used_at:v.string().datetime().optional()}),nd=v.object({tenant_id:v.string().uuid(),name:v.string().min(1).max(255),email:v.string().email().toLowerCase(),contact_info:v.object({phone:v.string().optional(),address:v.string().optional(),company:v.string().optional()}),status:v.enum(["pending","active","suspended"]),created_at:v.string().datetime(),updated_at:v.string().datetime()}),az=v.object({sub:v.string().uuid(),email:v.string().email(),roles:v.array(v.enum(["admin","manager","staff"])),iat:v.number().int().positive(),exp:v.number().int().positive(),iss:v.string().optional(),aud:v.string().optional()}),sd=v.object({email:v.string().email().toLowerCase(),password:v.string().min(8).max(128),roles:v.array(v.enum(["admin","manager","staff"])).min(1)}),cz=v.object({roles:v.array(v.enum(["admin","manager","staff"])).min(1).optional(),enabled:v.boolean().optional()}),id=v.object({name:v.string().min(1).max(255),email:v.string().email().toLowerCase(),contact_info:v.object({phone:v.string().optional(),address:v.string().optional(),company:v.string().optional()}).optional().default({})}),ad=v.object({email:v.string().email().toLowerCase(),password:v.string().min(1)}),cd=v.object({email:v.string().email().toLowerCase()}),dd=v.object({token:v.string().min(1),new_password:v.string().min(8).max(128)});ft();var ld="preferred",pM=["disabled","preferred","required"];function ma(e){return pM.includes(e)}var G0=e=>{let{accountIdEndpointMode:t}=e,r=Ee(t??ld);return Object.assign(e,{accountIdEndpointMode:async()=>{let o=await r();if(!ma(o))throw new Error(`Invalid value for accountIdEndpointMode: ${o}. Valid values are: "required", "preferred", "disabled".`);return o}})};var j0="Invalid AccountIdEndpointMode value",W0=e=>{throw new Error(e)},uM="AWS_ACCOUNT_ID_ENDPOINT_MODE",fM="account_id_endpoint_mode",z0={environmentVariableSelector:e=>{let t=e[uM];return t&&!ma(t)&&W0(j0),t},configFileSelector:e=>{let t=e[fM];return t&&!ma(t)&&W0(j0),t},default:ld};var K0=["AWS_ENABLE_ENDPOINT_DISCOVERY","AWS_ENDPOINT_DISCOVERY_ENABLED"],wf="endpoint_discovery_enabled",q0=e=>["false","0"].indexOf(e)>=0,J0={environmentVariableSelector:e=>{for(let t=0;t<K0.length;t++){let r=K0[t];if(r in e){let o=e[r];if(o==="")throw Error(`Environment variable ${r} can't be empty of undefined, got "${o}"`);return!q0(o)}}},configFileSelector:e=>{if(wf in e){let t=e[wf];if(t===void 0)throw Error(`Shared config entry ${wf} can't be undefined, got "${t}"`);return!q0(t)}},default:void 0};var gS=Lx(hS()),pd=class{cache;constructor(t){this.cache=new gS.default(t)}getEndpoint(t){let r=this.get(t);if(!r||r.length===0)return;let o=r.map(n=>n.Address);return o[Math.floor(Math.random()*o.length)]}get(t){if(!this.has(t))return;let r=this.cache.get(t);if(!r)return;let o=Date.now(),n=r.filter(s=>o<s.Expires);if(n.length===0){this.delete(t);return}return n}set(t,r){let o=Date.now();this.cache.set(t,r.map(({Address:n,CachePeriodInMinutes:s})=>({Address:n,Expires:o+s*60*1e3})))}delete(t){this.cache.set(t,[])}has(t){if(!this.cache.has(t))return!1;let r=this.cache.peek(t);return r?r.length>0:!1}clear(){this.cache.clear()}};var xS=(e,{endpointDiscoveryCommandCtor:t})=>{let{endpointCacheSize:r,endpointDiscoveryEnabled:o,endpointDiscoveryEnabledProvider:n}=e;return Object.assign(e,{endpointDiscoveryCommandCtor:t,endpointCache:new pd(r??1e3),endpointDiscoveryEnabled:o!==void 0?()=>Promise.resolve(o):n,isClientEndpointDiscoveryEnabled:o!==void 0})};ps();us();fs();An();Tt();Qe();ye();Rs();Ue();Qt();F();je();ft();var Cv=async(e,t,r)=>({operation:Fe(t).operation,region:await Ee(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function E4(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"dynamodb",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}var Av=e=>{let t=[];switch(e.operation){default:t.push(E4(e))}return t},Pv=e=>{let t=Ir(e);return Object.assign(t,{authSchemePreference:Ee(e.authSchemePreference??[])})};Ue();F();var Dv=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"dynamodb"}),Ht={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},AccountId:{type:"builtInParams",name:"accountId"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"},AccountIdEndpointMode:{type:"builtInParams",name:"accountIdEndpointMode"}};ye();F();var X=class e extends Lt{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var Tl=class e extends X{name="BackupInUseException";$fault="client";constructor(t){super({name:"BackupInUseException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},vl=class e extends X{name="BackupNotFoundException";$fault="client";constructor(t){super({name:"BackupNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Cl=class e extends X{name="InternalServerError";$fault="server";constructor(t){super({name:"InternalServerError",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype)}},Al=class e extends X{name="RequestLimitExceeded";$fault="client";ThrottlingReasons;constructor(t){super({name:"RequestLimitExceeded",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.ThrottlingReasons=t.ThrottlingReasons}},Pl=class e extends X{name="ThrottlingException";$fault="client";throttlingReasons;constructor(t){super({name:"ThrottlingException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.throttlingReasons=t.throttlingReasons}},Dl=class e extends X{name="InvalidEndpointException";$fault="client";Message;constructor(t){super({name:"InvalidEndpointException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message}},Nl=class e extends X{name="ProvisionedThroughputExceededException";$fault="client";ThrottlingReasons;constructor(t){super({name:"ProvisionedThroughputExceededException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.ThrottlingReasons=t.ThrottlingReasons}},Ol=class e extends X{name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},kl=class e extends X{name="ItemCollectionSizeLimitExceededException";$fault="client";constructor(t){super({name:"ItemCollectionSizeLimitExceededException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},$l=class e extends X{name="ReplicatedWriteConflictException";$fault="client";$retryable={};constructor(t){super({name:"ReplicatedWriteConflictException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ml=class e extends X{name="ContinuousBackupsUnavailableException";$fault="client";constructor(t){super({name:"ContinuousBackupsUnavailableException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ll=class e extends X{name="LimitExceededException";$fault="client";constructor(t){super({name:"LimitExceededException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ul=class e extends X{name="TableInUseException";$fault="client";constructor(t){super({name:"TableInUseException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Fl=class e extends X{name="TableNotFoundException";$fault="client";constructor(t){super({name:"TableNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Bl=class e extends X{name="GlobalTableAlreadyExistsException";$fault="client";constructor(t){super({name:"GlobalTableAlreadyExistsException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Hl=class e extends X{name="ResourceInUseException";$fault="client";constructor(t){super({name:"ResourceInUseException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Vl=class e extends X{name="TransactionConflictException";$fault="client";constructor(t){super({name:"TransactionConflictException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Gl=class e extends X{name="PolicyNotFoundException";$fault="client";constructor(t){super({name:"PolicyNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},jl=class e extends X{name="ExportNotFoundException";$fault="client";constructor(t){super({name:"ExportNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Wl=class e extends X{name="GlobalTableNotFoundException";$fault="client";constructor(t){super({name:"GlobalTableNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},zl=class e extends X{name="ImportNotFoundException";$fault="client";constructor(t){super({name:"ImportNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Kl=class e extends X{name="DuplicateItemException";$fault="client";constructor(t){super({name:"DuplicateItemException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},ql=class e extends X{name="IdempotentParameterMismatchException";$fault="client";Message;constructor(t){super({name:"IdempotentParameterMismatchException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message}},Jl=class e extends X{name="TransactionInProgressException";$fault="client";Message;constructor(t){super({name:"TransactionInProgressException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message}},Yl=class e extends X{name="ExportConflictException";$fault="client";constructor(t){super({name:"ExportConflictException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Xl=class e extends X{name="InvalidExportTimeException";$fault="client";constructor(t){super({name:"InvalidExportTimeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ql=class e extends X{name="PointInTimeRecoveryUnavailableException";$fault="client";constructor(t){super({name:"PointInTimeRecoveryUnavailableException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Zl=class e extends X{name="ImportConflictException";$fault="client";constructor(t){super({name:"ImportConflictException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},ep=class e extends X{name="TableAlreadyExistsException";$fault="client";constructor(t){super({name:"TableAlreadyExistsException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},tp=class e extends X{name="InvalidRestoreTimeException";$fault="client";constructor(t){super({name:"InvalidRestoreTimeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},rp=class e extends X{name="ReplicaAlreadyExistsException";$fault="client";constructor(t){super({name:"ReplicaAlreadyExistsException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},op=class e extends X{name="ReplicaNotFoundException";$fault="client";constructor(t){super({name:"ReplicaNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},np=class e extends X{name="IndexNotFoundException";$fault="client";constructor(t){super({name:"IndexNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},sp=class e extends X{name="ConditionalCheckFailedException";$fault="client";Item;constructor(t){super({name:"ConditionalCheckFailedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Item=t.Item}},ip=class e extends X{name="TransactionCanceledException";$fault="client";Message;CancellationReasons;constructor(t){super({name:"TransactionCanceledException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.CancellationReasons=t.CancellationReasons}};var _4="Action";var b4="AttributeMap";var wh="AttributesToGet",Ov="AttributeUpdates",w4="AttributeValue",Rh="AttributeValueList",R4="AttributeValueUpdate",I4="Address",Ih="Attributes";var T4="BackupInUseException";var v4="BackupNotFoundException",C4="BOOL";var A4="BS";var P4="B",D4="Code";var N4="ContinuousBackupsUnavailableException",Is="ConsumedCapacity",O4="ConditionalCheckFailedException";var Th="ConditionExpression";var kv="ComparisonOperator",La="ConditionalOperator";var k4="CachePeriodInMinutes",vh="ConsistentRead";var $4="CancellationReasonList",M4="ConfirmRemoveSelfResourceAccess";var L4="CancellationReason",U4="CancellationReasons";var $v="CapacityUnits";var F4="Capacity",B4="Condition",Mv="Count";var H4="DescribeEndpoints";var V4="DescribeEndpointsRequest",G4="DescribeEndpointsResponse";var j4="DeleteItem",W4="DuplicateItemException",z4="DeleteItemInput";var K4="DeleteItemOutput";var q4="ExpectedAttributeMap",Di="ExpressionAttributeNames",Ua="ExpressionAttributeValues",J4="ExpressionAttributeValueMap",Y4="ExpectedAttributeValue";var X4="ExportConflictException";var Q4="ExportNotFoundException";var Z4="ExpectedRevisionId";var Lv="ExclusiveStartKey";var Uv="Endpoints";var eU="Endpoint",Ch="Expected",tU="Exists";var rU="FilterConditionMap";var Fv="FilterExpression";var oU="GetItem",nU="GetItemInput",sU="GetItemOutput";var iU="GlobalSecondaryIndexes";var aU="GlobalTableAlreadyExistsException";var cU="GlobalTableNotFoundException";var ap="Item";var dU="ImportConflictException",lU="ItemCollectionKey",pU="ItemCollectionKeyAttributeMap",cp="ItemCollectionMetrics";var uU="ItemCollectionSizeLimitExceededException";var fU="InvalidEndpointException";var mU="InvalidExportTimeException";var hU="ItemList",Bv="IndexName",gU="ImportNotFoundException",xU="IndexNotFoundException",yU="IdempotentParameterMismatchException";var SU="InvalidRestoreTimeException";var EU="InternalServerError";var Hv="Items",dp="Key";var Vv="KeyConditions",_U="KeyConditionExpression";var Gv="Limit",bU="ListAttributeValue";var wU="LimitExceededException";var jv="LastEvaluatedKey";var RU="LocalSecondaryIndexes";var IU="L",Fa="Message",TU="MapAttributeValue";var vU="M",CU="N";var AU="NS";var PU="NULL";var Ah="ProjectionExpression",DU="PutItem";var NU="PutItemInput",OU="PutItemInputAttributeMap",kU="PutItemOutput";var $U="PointInTimeRecoveryUnavailableException";var MU="PolicyNotFoundException";var LU="PutResourcePolicyInput";var UU="ProvisionedThroughputExceededException";var FU="Policy";var BU="Query",HU="QueryFilter",VU="QueryInput",GU="QueryOutput";var jU="ResourceArn",WU="ReplicaAlreadyExistsException";var Ni="ReturnConsumedCapacity",Wv="ReadCapacityUnits";var Ph="ReturnItemCollectionMetrics";var zU="ResourceInUseException";var KU="RequestLimitExceeded";var qU="ReplicaNotFoundException",JU="ResourceNotFoundException";var Dh="ReturnValues",Nh="ReturnValuesOnConditionCheckFailure",YU="ReplicatedWriteConflictException";var zv="ScannedCount";var XU="SizeEstimateRangeGB",QU="ScanFilter",ZU="ScanInput";var eF="SecondaryIndexesCapacityMap",tF="ScanIndexForward";var rF="ScanOutput";var oF="SS";var nF="S",sF="Scan",Kv="Select",iF="Segment";var aF="Table";var cF="TableAlreadyExistsException";var dF="TransactionCanceledException",lF="TransactionConflictException";var pF="ThrottlingException";var uF="TransactionInProgressException",fF="TableInUseException";var Ts="TableName",mF="TableNotFoundException";var qv="ThrottlingReasons";var hF="ThrottlingReasonList";var gF="ThrottlingReason";var xF="TotalSegments";var yF="UpdateExpression";var SF="UpdateItemInput",EF="UpdateItemOutput",_F="UpdateItem";var Jv="Value",Yv="WriteCapacityUnits";var bF="awsQueryError",ce="client",ne="error",Xv="httpError",wF="httpHeader",Se="message",RF="reason",IF="resource",TF="server",Qv="smithy.ts.sdk.synthetic.com.amazonaws.dynamodb",vF="throttlingReasons",CF="x-amz-confirm-remove-self-resource-access",b="com.amazonaws.dynamodb";var AF=[3,b,R4,0,[Jv,_4],[()=>To,0]];var PF=[-3,b,T4,{[ne]:ce},[Se],[0]];w.for(b).registerError(PF,Tl);var DF=[-3,b,v4,{[ne]:ce},[Se],[0]];w.for(b).registerError(DF,vl);var NF=[3,b,L4,0,[ap,D4,Fa],[()=>vs,0,0]],Zv=[3,b,F4,0,[Wv,Yv,$v],[1,1,1]],eC=[3,b,B4,0,[Rh,kv],[()=>tC,0]],OF=[-3,b,O4,{[ne]:ce},[Se,ap],[0,()=>vs]];w.for(b).registerError(OF,sp);var Oi=[3,b,Is,0,[Ts,$v,Wv,Yv,aF,RU,iU],[0,1,1,1,()=>Zv,()=>Nv,()=>Nv]];var kF=[-3,b,N4,{[ne]:ce},[Se],[0]];w.for(b).registerError(kF,Ml);var $F=[3,b,z4,0,[Ts,dp,Ch,La,Dh,Ni,Ph,Th,Di,Ua,Nh],[0,()=>Cs,()=>$h,0,0,0,0,0,128,()=>Ba,0]],MF=[3,b,K4,0,[Ih,Is,cp],[()=>vs,()=>Oi,()=>Oh]];var LF=[3,b,V4,0,[],[]],UF=[3,b,G4,0,[Uv],[()=>D6]];var FF=[-3,b,W4,{[ne]:ce},[Se],[0]];w.for(b).registerError(FF,Kl);var BF=[3,b,eU,0,[I4,k4],[0,1]];var HF=[3,b,Y4,0,[Jv,tU,kv,Rh],[()=>To,2,0,()=>tC]],VF=[-3,b,X4,{[ne]:ce},[Se],[0]];w.for(b).registerError(VF,Yl);var GF=[-3,b,Q4,{[ne]:ce},[Se],[0]];w.for(b).registerError(GF,jl);var jF=[3,b,nU,0,[Ts,dp,wh,vh,Ni,Ah,Di],[0,()=>Cs,64,2,0,0,128]],WF=[3,b,sU,0,[ap,Is],[()=>vs,()=>Oi]];var zF=[-3,b,aU,{[ne]:ce},[Se],[0]];w.for(b).registerError(zF,Bl);var KF=[-3,b,cU,{[ne]:ce},[Se],[0]];w.for(b).registerError(KF,Wl);var qF=[-3,b,yU,{[ne]:ce},[Fa],[0]];w.for(b).registerError(qF,ql);var JF=[-3,b,dU,{[ne]:ce},[Se],[0]];w.for(b).registerError(JF,Zl);var YF=[-3,b,gU,{[ne]:ce},[Se],[0]];w.for(b).registerError(YF,zl);var XF=[-3,b,xU,{[ne]:ce},[Se],[0]];w.for(b).registerError(XF,np);var QF=[-3,b,EU,{[ne]:TF},[Se],[0]];w.for(b).registerError(QF,Cl);var ZF=[-3,b,fU,{[ne]:ce,[Xv]:421},[Fa],[0]];w.for(b).registerError(ZF,Dl);var e6=[-3,b,mU,{[ne]:ce},[Se],[0]];w.for(b).registerError(e6,Xl);var t6=[-3,b,SU,{[ne]:ce},[Se],[0]];w.for(b).registerError(t6,tp);var Oh=[3,b,cp,0,[lU,XU],[()=>k6,65]],r6=[-3,b,uU,{[ne]:ce},[Se],[0]];w.for(b).registerError(r6,kl);var o6=[-3,b,wU,{[ne]:ce},[Se],[0]];w.for(b).registerError(o6,Ll);var n6=[-3,b,$U,{[ne]:ce},[Se],[0]];w.for(b).registerError(n6,Ql);var s6=[-3,b,MU,{[ne]:ce},[Se],[0]];w.for(b).registerError(s6,Gl);var i6=[-3,b,UU,{[ne]:ce},[Se,qv],[0,()=>kh]];w.for(b).registerError(i6,Nl);var a6=[3,b,NU,0,[Ts,ap,Ch,Dh,Ni,Ph,La,Th,Di,Ua,Nh],[0,()=>L6,()=>$h,0,0,0,0,0,128,()=>Ba,0]],c6=[3,b,kU,0,[Ih,Is,cp],[()=>vs,()=>Oi,()=>Oh]];var Mue=[3,b,LU,0,[jU,FU,Z4,M4],[0,0,0,[2,{[wF]:CF}]]];var d6=[3,b,VU,0,[Ts,Bv,Kv,wh,Gv,vh,Vv,HU,La,tF,Lv,Ni,Ah,Fv,_U,Di,Ua],[0,0,0,64,1,2,()=>$6,()=>oC,0,2,()=>Cs,0,0,0,0,128,()=>Ba]],l6=[3,b,GU,0,[Hv,Mv,zv,jv,Is],[()=>rC,1,1,()=>Cs,()=>Oi]];var p6=[-3,b,WU,{[ne]:ce},[Se],[0]];w.for(b).registerError(p6,rp);var u6=[-3,b,qU,{[ne]:ce},[Se],[0]];w.for(b).registerError(u6,op);var f6=[-3,b,YU,{[ne]:ce},[Se],[0]];w.for(b).registerError(f6,$l);var m6=[-3,b,KU,{[ne]:ce},[Se,qv],[0,()=>kh]];w.for(b).registerError(m6,Al);var h6=[-3,b,zU,{[ne]:ce},[Se],[0]];w.for(b).registerError(h6,Hl);var g6=[-3,b,JU,{[ne]:ce},[Se],[0]];w.for(b).registerError(g6,Ol);var x6=[3,b,ZU,0,[Ts,Bv,wh,Gv,Kv,QU,La,Lv,Ni,xF,iF,Ah,Fv,Di,Ua,vh],[0,0,64,1,0,()=>oC,0,()=>Cs,0,1,1,0,0,128,()=>Ba,2]],y6=[3,b,rF,0,[Hv,Mv,zv,jv,Is],[()=>rC,1,1,()=>Cs,()=>Oi]];var S6=[-3,b,cF,{[ne]:ce},[Se],[0]];w.for(b).registerError(S6,ep);var E6=[-3,b,fF,{[ne]:ce},[Se],[0]];w.for(b).registerError(E6,Ul);var _6=[-3,b,mF,{[ne]:ce},[Se],[0]];w.for(b).registerError(_6,Fl);var b6=[-3,b,pF,{[bF]:["Throttling",400],[ne]:ce,[Xv]:400},[Se,vF],[0,()=>kh]];w.for(b).registerError(b6,Pl);var w6=[3,b,gF,0,[RF,IF],[0,0]];var R6=[-3,b,dF,{[ne]:ce},[Fa,U4],[0,()=>P6]];w.for(b).registerError(R6,ip);var I6=[-3,b,lF,{[ne]:ce},[Se],[0]];w.for(b).registerError(I6,Vl);var T6=[-3,b,uF,{[ne]:ce},[Fa],[0]];w.for(b).registerError(T6,Jl);var v6=[3,b,SF,0,[Ts,dp,Ov,Ch,La,Dh,Ni,Ph,yF,Th,Di,Ua,Nh],[0,()=>Cs,()=>O6,()=>$h,0,0,0,0,0,0,128,()=>Ba,0]],C6=[3,b,EF,0,[Ih,Is,cp],[()=>vs,()=>Oi,()=>Oh]];var A6=[-3,Qv,"DynamoDBServiceException",0,[],[]];w.for(Qv).registerError(A6,X);var tC=[1,b,Rh,0,()=>To];var P6=[1,b,$4,0,()=>NF];var D6=[1,b,Uv,0,()=>BF];var rC=[1,b,hU,0,()=>vs];var N6=[1,b,bU,0,()=>To];var kh=[1,b,hF,0,()=>w6];var vs=[2,b,b4,0,0,()=>To],O6=[2,b,Ov,0,0,()=>AF];var $h=[2,b,q4,0,0,()=>HF];var Ba=[2,b,J4,0,0,()=>To],oC=[2,b,rU,0,0,()=>eC],k6=[2,b,pU,0,0,()=>To];var Cs=[2,b,dp,0,0,()=>To],$6=[2,b,Vv,0,0,()=>eC],M6=[2,b,TU,0,0,()=>To],L6=[2,b,OU,0,0,()=>To],Nv=[2,b,eF,0,0,()=>Zv],To=[4,b,w4,0,[nF,CU,P4,oF,AU,A4,vU,IU,PU,C4],[0,0,21,64,64,85,()=>M6,()=>N6,2,2]];var nC=[9,b,j4,0,()=>$F,()=>MF];var sC=[9,b,H4,0,()=>LF,()=>UF];var iC=[9,b,oU,0,()=>jF,()=>WF];var aC=[9,b,DU,0,()=>a6,()=>c6];var cC=[9,b,BU,0,()=>d6,()=>l6];var dC=[9,b,sF,0,()=>x6,()=>y6];var lC=[9,b,_F,0,()=>v6,()=>C6];var lp=class extends Y.classBuilder().ep(Ht).m(function(t,r,o,n){return[he(o,t.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeEndpoints",{}).n("DynamoDBClient","DescribeEndpointsCommand").sc(sC).build(){};var pC={name:"@aws-sdk/client-dynamodb",description:"AWS SDK for JavaScript Dynamodb Client for Node.js, Browser and React Native",version:"3.958.0",scripts:{build:"concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs","build:cjs":"node ../../scripts/compilation/inline client-dynamodb","build:es":"tsc -p tsconfig.es.json","build:include:deps":'yarn g:turbo run build -F="$npm_package_name"',"build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo dynamodb","test:e2e":"yarn g:vitest run -c vitest.config.e2e.mts","test:e2e:watch":"yarn g:vitest watch -c vitest.config.e2e.mts","test:index":"tsc --noEmit ./test/index-types.ts && node ./test/index-objects.spec.mjs"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.957.0","@aws-sdk/credential-provider-node":"3.958.0","@aws-sdk/dynamodb-codec":"3.957.0","@aws-sdk/middleware-endpoint-discovery":"3.957.0","@aws-sdk/middleware-host-header":"3.957.0","@aws-sdk/middleware-logger":"3.957.0","@aws-sdk/middleware-recursion-detection":"3.957.0","@aws-sdk/middleware-user-agent":"3.957.0","@aws-sdk/region-config-resolver":"3.957.0","@aws-sdk/types":"3.957.0","@aws-sdk/util-endpoints":"3.957.0","@aws-sdk/util-user-agent-browser":"3.957.0","@aws-sdk/util-user-agent-node":"3.957.0","@smithy/config-resolver":"^4.4.5","@smithy/core":"^3.20.0","@smithy/fetch-http-handler":"^5.3.8","@smithy/hash-node":"^4.2.7","@smithy/invalid-dependency":"^4.2.7","@smithy/middleware-content-length":"^4.2.7","@smithy/middleware-endpoint":"^4.4.1","@smithy/middleware-retry":"^4.4.17","@smithy/middleware-serde":"^4.2.8","@smithy/middleware-stack":"^4.2.7","@smithy/node-config-provider":"^4.3.7","@smithy/node-http-handler":"^4.4.7","@smithy/protocol-http":"^5.3.7","@smithy/smithy-client":"^4.10.2","@smithy/types":"^4.11.0","@smithy/url-parser":"^4.2.7","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.16","@smithy/util-defaults-mode-node":"^4.2.19","@smithy/util-endpoints":"^3.2.7","@smithy/util-middleware":"^4.2.7","@smithy/util-retry":"^4.2.7","@smithy/util-utf8":"^4.2.0","@smithy/util-waiter":"^4.2.7",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-dynamodb",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-dynamodb"}};je();Lh();Ie();vt();Ie();var HC="AWS_EC2_METADATA_DISABLED",VC=async e=>{let{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:o,fromInstanceMetadata:n}=await Promise.resolve().then(()=>(ja(),Ga));if(process.env[r]||process.env[t]){e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:s}=await Promise.resolve().then(()=>(Kh(),zh));return Si(s(e),o(e))}return process.env[HC]&&process.env[HC]!=="false"?async()=>{throw new $("EC2 Instance Metadata Service access disabled",{logger:e.logger})}:(e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),n(e))};function GC(e,t){let r=gB(e),o,n,s,i=async a=>{if(a?.forceRefresh)return await r(a);if(s?.expiration&&s?.expiration?.getTime()<Date.now()&&(s=void 0),o)await o;else if(!s||t?.(s))if(s)n||(n=r(a).then(c=>{s=c,n=void 0}));else return o=r(a).then(c=>{s=c,o=void 0}),i(a);return s};return i}var gB=e=>async t=>{let r;for(let o of e)try{return await o(t)}catch(n){if(r=n,n?.tryNextLink)continue;throw n}throw r};var Ck=!1,su=(e={})=>GC([async()=>{if(e.profile??process.env[lh])throw process.env[pp]&&process.env[up]&&(Ck||((e.logger?.warn&&e.logger?.constructor?.name!=="NoOpLogger"?e.logger.warn.bind(e.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),Ck=!0)),new $("AWS_PROFILE is set, skipping fromEnv provider.",{logger:e.logger,tryNextLink:!0});return e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),Mh(e)()},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:r,ssoAccountId:o,ssoRegion:n,ssoRoleName:s,ssoSession:i}=e;if(!r&&!o&&!n&&!s&&!i)throw new $("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:e.logger});let{fromSSO:a}=await Promise.resolve().then(()=>(bg(),_g));return a(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:r}=await Promise.resolve().then(()=>(vk(),Tk));return r(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:r}=await Promise.resolve().then(()=>(Qg(),Xg));return r(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:r}=await Promise.resolve().then(()=>(nx(),ox));return r(e)(t)},async()=>(e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await VC(e))()),async()=>{throw new $("Could not load credentials from any providers",{tryNextLink:!1,logger:e.logger})}],xH);var xH=e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5;Ps();Tt();Ds();Qt();Mr();qo();F();Ns();Os();on();je();tn();tn();ye();F();mt();var iu=class extends Tn{constructor(){super({timestampFormat:{useTrait:!0,default:7},jsonName:!1})}createSerializer(){let t=new ix(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new ax(this.settings);return t.setSerdeContext(this.serdeContext),t}},Ak="com.amazonaws.dynamodb#AttributeValue",ix=class extends Ri{_write(t,r,o){let n=j.of(t);if(n.isStructSchema()&&n.getName(!0)===Ak&&r&&typeof r=="object"){let s=r,i=Ta(s),a=this.serdeContext?.base64Encoder??Ne;if(s.B instanceof Uint8Array&&(i.B=a(s.B)),Array.isArray(s.BS)&&(i.BS=s.BS.map(a)),Array.isArray(s.L)&&(i.L=s.L.filter(c=>c!=null).map(c=>this._write(n,c,o))),s.M&&typeof s.M=="object"){i.M={};for(let[c,l]of Object.entries(s.M))l!=null&&(i.M[c]=this._write(n,l,o))}return i}return super._write(n,r,o)}},ax=class extends wi{_read(t,r){let o=j.of(t);if(o.isStructSchema()&&o.getName(!0)===Ak&&r&&typeof r=="object"){let n=r,s=Ta(n),i=this.serdeContext?.base64Decoder??Le;if(typeof n.B=="string"&&(s.B=i(n.B)),Array.isArray(n.BS)&&(s.BS=n.BS.map(i)),Array.isArray(n.L)&&(s.L=n.L.map(a=>this._read(o,a))),n.M&&typeof n.M=="object"){s.M={};for(let[a,c]of Object.entries(n.M))s.M[a]=this._read(o,c)}return s}return super._read(o,r)}};F();en();mt();He();_n();io();var lx="required",z="type",We="rules",Te="conditions",B="fn",H="argv",te="ref",au="assign",Do="url",No="properties",Oo="headers",Xk="metricValues";var ze="error",wt="stringEquals",Pk="https://dynamodb.{Region}.{PartitionResult#dualStackDnsSuffix}",jt="endpoint",Xe="tree",px="dynamodb",wc={[lx]:!1,[z]:"string"},Dk={[lx]:!0,default:!1,[z]:"boolean"},Nk={[B]:"isSet",[H]:[{[te]:"Endpoint"}]},yH={[te]:"Endpoint"},Ok={[B]:"isSet",[H]:[{[te]:"Region"}]},Qk={[te]:"Region"},kk={[B]:"aws.partition",[H]:[Qk],[au]:"PartitionResult"},$k={[Te]:[{[B]:"booleanEquals",[H]:[{[te]:"UseFIPS"},!0]}],[ze]:"Invalid Configuration: FIPS and custom endpoint are not supported",[z]:ze},Ji={[B]:"booleanEquals",[H]:[{[te]:"UseFIPS"},!0]},Mk={[Te]:[{[B]:"booleanEquals",[H]:[{[te]:"UseDualStack"},!0]}],[ze]:"Invalid Configuration: Dualstack and custom endpoint are not supported",[z]:ze},Zk={[B]:"booleanEquals",[H]:[{[te]:"UseDualStack"},!0]},Lk={[jt]:{[Do]:"{Endpoint}",[No]:{},[Oo]:{}},[z]:jt},dn={},Uk={[B]:"booleanEquals",[H]:[{[B]:"getAttr",[H]:[{[te]:"PartitionResult"},"supportsFIPS"]},!0]},Fk={[B]:"booleanEquals",[H]:[{[B]:"getAttr",[H]:[{[te]:"PartitionResult"},"supportsDualStack"]},!0]},cx={[Te]:[{[B]:"isSet",[H]:[{[te]:"AccountIdEndpointMode"}]},{[B]:wt,[H]:[{[te]:"AccountIdEndpointMode"},"required"]}],[We]:[{[ze]:"Invalid Configuration: AccountIdEndpointMode is required and FIPS is enabled, but FIPS account endpoints are not supported",[z]:ze}],[z]:Xe},Rc={[B]:"getAttr",[H]:[{[te]:"PartitionResult"},"name"]},Bk={[jt]:{[Do]:"https://dynamodb.{Region}.{PartitionResult#dnsSuffix}",[No]:{},[Oo]:{}},[z]:jt},Hk={[Do]:"https://{ParsedArn#accountId}.ddb.{Region}.{PartitionResult#dualStackDnsSuffix}",[No]:{[Xk]:["O"]},[Oo]:{}},dx={[Xk]:["O"]},Vk={[ze]:"Credentials-sourced account ID parameter is invalid",[z]:ze},Gk={[Te]:[{[B]:"isSet",[H]:[{[te]:"AccountIdEndpointMode"}]},{[B]:wt,[H]:[{[te]:"AccountIdEndpointMode"},"required"]}],[We]:[{[Te]:[{[B]:"not",[H]:[Ji]}],[We]:[{[Te]:[{[B]:wt,[H]:[Rc,"aws"]}],[We]:[{[ze]:"AccountIdEndpointMode is required but no AccountID was provided or able to be loaded",[z]:ze}],[z]:Xe},{[ze]:"Invalid Configuration: AccountIdEndpointMode is required but account endpoints are not supported in this partition",[z]:ze}],[z]:Xe},{[ze]:"Invalid Configuration: AccountIdEndpointMode is required and FIPS is enabled, but FIPS account endpoints are not supported",[z]:ze}],[z]:Xe},jk={[Do]:"https://{ParsedArn#accountId}.ddb.{Region}.{PartitionResult#dnsSuffix}",[No]:dx,[Oo]:{}},Wk=[Ji],zk=[Zk],Kk=[{[B]:"isSet",[H]:[{[te]:"AccountIdEndpointMode"}]},{[B]:"not",[H]:[{[B]:wt,[H]:[{[te]:"AccountIdEndpointMode"},"disabled"]}]},{[B]:wt,[H]:[Rc,"aws"]},{[B]:"not",[H]:[Ji]},{[B]:"isSet",[H]:[{[te]:"ResourceArn"}]},{[B]:"aws.parseArn",[H]:[{[te]:"ResourceArn"}],[au]:"ParsedArn"},{[B]:wt,[H]:[{[B]:"getAttr",[H]:[{[te]:"ParsedArn"},"service"]},px]},{[B]:"isValidHostLabel",[H]:[{[B]:"getAttr",[H]:[{[te]:"ParsedArn"},"region"]},!1]},{[B]:wt,[H]:[{[B]:"getAttr",[H]:[{[te]:"ParsedArn"},"region"]},"{Region}"]},{[B]:"isValidHostLabel",[H]:[{[B]:"getAttr",[H]:[{[te]:"ParsedArn"},"accountId"]},!1]}],qk=[{[B]:"isSet",[H]:[{[te]:"AccountIdEndpointMode"}]},{[B]:"not",[H]:[{[B]:wt,[H]:[{[te]:"AccountIdEndpointMode"},"disabled"]}]},{[B]:wt,[H]:[Rc,"aws"]},{[B]:"not",[H]:[Ji]},{[B]:"isSet",[H]:[{[te]:"ResourceArnList"}]},{[B]:"getAttr",[H]:[{[te]:"ResourceArnList"},"[0]"],[au]:"FirstArn"},{[B]:"aws.parseArn",[H]:[{[te]:"FirstArn"}],[au]:"ParsedArn"},{[B]:wt,[H]:[{[B]:"getAttr",[H]:[{[te]:"ParsedArn"},"service"]},px]},{[B]:"isValidHostLabel",[H]:[{[B]:"getAttr",[H]:[{[te]:"ParsedArn"},"region"]},!1]},{[B]:wt,[H]:[{[B]:"getAttr",[H]:[{[te]:"ParsedArn"},"region"]},"{Region}"]},{[B]:"isValidHostLabel",[H]:[{[B]:"getAttr",[H]:[{[te]:"ParsedArn"},"accountId"]},!1]}],Jk=[{[B]:"isSet",[H]:[{[te]:"AccountIdEndpointMode"}]},{[B]:"not",[H]:[{[B]:wt,[H]:[{[te]:"AccountIdEndpointMode"},"disabled"]}]},{[B]:wt,[H]:[Rc,"aws"]},{[B]:"not",[H]:[Ji]},{[B]:"isSet",[H]:[{[te]:"AccountId"}]}],Yk=[{[B]:"isValidHostLabel",[H]:[{[te]:"AccountId"},!1]}],SH={version:"1.0",parameters:{Region:wc,UseDualStack:Dk,UseFIPS:Dk,Endpoint:wc,AccountId:wc,AccountIdEndpointMode:wc,ResourceArn:wc,ResourceArnList:{[lx]:!1,[z]:"stringArray"}},[We]:[{[Te]:[Nk,Ok,kk],[We]:[$k,Mk,{[Te]:[{[B]:wt,[H]:[yH,Pk]}],error:"Endpoint override is not supported for dual-stack endpoints. Please enable dual-stack functionality by enabling the configuration. For more details, see: https://docs.aws.amazon.com/sdkref/latest/guide/feature-endpoints.html",[z]:ze},Lk],[z]:Xe},{[Te]:[Nk],[We]:[$k,Mk,Lk],[z]:Xe},{[Te]:[Ok],[We]:[{[Te]:[kk],[We]:[{[Te]:[{[B]:wt,[H]:[Qk,"local"]}],[We]:[{[Te]:Wk,error:"Invalid Configuration: FIPS and local endpoint are not supported",[z]:ze},{[Te]:zk,error:"Invalid Configuration: Dualstack and local endpoint are not supported",[z]:ze},{endpoint:{[Do]:"http://localhost:8000",[No]:{authSchemes:[{name:"sigv4",signingName:px,signingRegion:"us-east-1"}]},[Oo]:dn},[z]:jt}],[z]:Xe},{[Te]:[Ji,Zk],[We]:[{[Te]:[Uk,Fk],[We]:[cx,{endpoint:{[Do]:"https://dynamodb-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[No]:dn,[Oo]:dn},[z]:jt}],[z]:Xe},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[z]:ze}],[z]:Xe},{[Te]:Wk,[We]:[{[Te]:[Uk],[We]:[{[Te]:[{[B]:wt,[H]:[Rc,"aws-us-gov"]}],[We]:[cx,Bk],[z]:Xe},cx,{endpoint:{[Do]:"https://dynamodb-fips.{Region}.{PartitionResult#dnsSuffix}",[No]:dn,[Oo]:dn},[z]:jt}],[z]:Xe},{error:"FIPS is enabled but this partition does not support FIPS",[z]:ze}],[z]:Xe},{[Te]:zk,[We]:[{[Te]:[Fk],[We]:[{[Te]:Kk,endpoint:Hk,[z]:jt},{[Te]:qk,endpoint:Hk,[z]:jt},{[Te]:Jk,[We]:[{[Te]:Yk,[We]:[{endpoint:{[Do]:"https://{AccountId}.ddb.{Region}.{PartitionResult#dualStackDnsSuffix}",[No]:dx,[Oo]:dn},[z]:jt}],[z]:Xe},Vk],[z]:Xe},Gk,{endpoint:{[Do]:Pk,[No]:dn,[Oo]:dn},[z]:jt}],[z]:Xe},{error:"DualStack is enabled but this partition does not support DualStack",[z]:ze}],[z]:Xe},{[Te]:Kk,endpoint:jk,[z]:jt},{[Te]:qk,endpoint:jk,[z]:jt},{[Te]:Jk,[We]:[{[Te]:Yk,[We]:[{endpoint:{[Do]:"https://{AccountId}.ddb.{Region}.{PartitionResult#dnsSuffix}",[No]:dx,[Oo]:dn},[z]:jt}],[z]:Xe},Vk],[z]:Xe},Gk,Bk],[z]:Xe}],[z]:Xe},{error:"Invalid Configuration: Missing Region",[z]:ze}]},e1=SH;var EH=new Mt({size:50,params:["AccountId","AccountIdEndpointMode","Endpoint","Region","ResourceArn","ResourceArnList","UseDualStack","UseFIPS"]}),t1=(e,t={})=>EH.get(e,()=>Er(e1,{endpointParams:e,logger:t.logger}));st.aws=qt;var r1=e=>({apiVersion:"2012-08-10",base64Decoder:e?.base64Decoder??Le,base64Encoder:e?.base64Encoder??Ne,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??t1,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Av,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new at}],logger:e?.logger??new xt,protocol:e?.protocol??Zd,protocolSettings:e?.protocolSettings??{defaultNamespace:"com.amazonaws.dynamodb",xmlNamespace:"http://dynamodb.amazonaws.com/doc/2012-08-10/",version:"2012-08-10",serviceTarget:"DynamoDB_20120810",jsonCodec:new iu},serviceId:e?.serviceId??"DynamoDB",urlParser:e?.urlParser??rt,utf8Decoder:e?.utf8Decoder??Oe,utf8Encoder:e?.utf8Encoder??De});var o1=e=>{vr(process.version);let t=Wr(e),r=()=>t().then(Tr),o=r1(e);_r(process.version);let n={profile:e?.profile,logger:o.logger};return{...o,...e,runtime:"node",defaultsMode:t,accountIdEndpointMode:e?.accountIdEndpointMode??L(z0,n),authSchemePreference:e?.authSchemePreference??L(br,n),bodyLengthChecker:e?.bodyLengthChecker??jr,credentialDefaultProvider:e?.credentialDefaultProvider??su,defaultUserAgentProvider:e?.defaultUserAgentProvider??Vr({serviceId:o.serviceId,clientVersion:pC.version}),endpointDiscoveryEnabledProvider:e?.endpointDiscoveryEnabledProvider??L(J0,n),maxAttempts:e?.maxAttempts??L(Ur,e),region:e?.region??L(yt,{...Ut,...n}),requestHandler:ht.create(e?.requestHandler??r),retryMode:e?.retryMode??L({...Br,default:async()=>(await r()).retryMode||Bt},e),sha256:e?.sha256??Vt.bind(null,"sha256"),streamCollector:e?.streamCollector??Dt,useDualstackEndpoint:e?.useDualstackEndpoint??L(Nr,n),useFipsEndpoint:e?.useFipsEndpoint??L(Or,n),userAgentAppId:e?.userAgentAppId??L(Gr,n)}};$n();$e();F();var n1=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,o=e.credentials;return{setHttpAuthScheme(n){let s=t.findIndex(i=>i.schemeId===n.schemeId);s===-1?t.push(n):t.splice(s,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){o=n},credentials(){return o}}},s1=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()});var i1=(e,t)=>{let r=Object.assign(Jr(e),Cr(e),ir(e),n1(e));return t.forEach(o=>o.configure(r)),Object.assign(e,Yr(r),Ar(r),ar(r),s1(r))};var cu=class extends Ze{config;constructor(...[t]){let r=o1(t||{});super(r),this.initConfig=r;let o=Dv(r),n=G0(o),s=xr(n),i=Fr(s),a=kr(i),c=a,l=Lr(c),p=Pv(l),u=xS(p,{endpointDiscoveryCommandCtor:lp}),f=i1(u,t?.extensions||[]);this.config=f,this.middlewareStack.use(mr(this.config)),this.middlewareStack.use(Dr(this.config)),this.middlewareStack.use(Hr(this.config)),this.middlewareStack.use($r(this.config)),this.middlewareStack.use(dr(this.config)),this.middlewareStack.use(lr(this.config)),this.middlewareStack.use(pr(this.config)),this.middlewareStack.use(ur(this.config,{httpAuthSchemeParametersProvider:Cv,identityProviderConfigProvider:async m=>new $t({"aws.auth#sigv4":m.credentials})})),this.middlewareStack.use(fr(this.config))}destroy(){super.destroy()}};Ue();F();var du=class extends Y.classBuilder().ep({...Ht,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(t,r,o,n){return[he(o,t.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DeleteItem",{}).n("DynamoDBClient","DeleteItemCommand").sc(nC).build(){};Ue();F();var lu=class extends Y.classBuilder().ep({...Ht,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(t,r,o,n){return[he(o,t.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","GetItem",{}).n("DynamoDBClient","GetItemCommand").sc(iC).build(){};Ue();F();var pu=class extends Y.classBuilder().ep({...Ht,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(t,r,o,n){return[he(o,t.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","PutItem",{}).n("DynamoDBClient","PutItemCommand").sc(aC).build(){};Ue();F();var uu=class extends Y.classBuilder().ep({...Ht,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(t,r,o,n){return[he(o,t.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","Query",{}).n("DynamoDBClient","QueryCommand").sc(cC).build(){};Ue();F();var fu=class extends Y.classBuilder().ep({...Ht,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(t,r,o,n){return[he(o,t.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","Scan",{}).n("DynamoDBClient","ScanCommand").sc(dC).build(){};Ue();F();var mu=class extends Y.classBuilder().ep({...Ht,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(t,r,o,n){return[he(o,t.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","UpdateItem",{}).n("DynamoDBClient","UpdateItemCommand").sc(lC).build(){};je();F();var Gs=class e{value;constructor(t){typeof t=="object"&&"N"in t?this.value=String(t.N):this.value=String(t);let r=typeof t.valueOf()=="number"?t.valueOf():0;if(r>Number.MAX_SAFE_INTEGER||r<Number.MIN_SAFE_INTEGER||Math.abs(r)===1/0||Number.isNaN(r))throw new Error(`NumberValue should not be initialized with an imprecise number=${r}. Use a string instead.`)}static from(t){return new e(t)}toAttributeValue(){return{N:this.toString()}}toBigInt(){let t=this.toString();return BigInt(t)}toString(){return String(this.value)}valueOf(){return this.toString()}};var Ic=(e,t)=>{if(e===void 0)throw new Error("Pass options.removeUndefinedValues=true to remove undefined values from map/array/set.");if(e===null&&typeof e=="object")return hu();if(Array.isArray(e))return _H(e,t);if(e?.constructor?.name==="Set")return bH(e,t);if(e?.constructor?.name==="Map")return wH(e,t);if(e?.constructor?.name==="Object"||!e.constructor&&typeof e=="object")return a1(e,t);if(f1(e))return e.length===0&&t?.convertEmptyValues?hu():d1(e);if(typeof e=="boolean"||e?.constructor?.name==="Boolean")return{BOOL:e.valueOf()};if(typeof e=="number"||e?.constructor?.name==="Number")return u1(e,t);if(e instanceof Gs)return e.toAttributeValue();if(typeof e=="bigint")return p1(e);if(typeof e=="string"||e?.constructor?.name==="String")return e.length===0&&t?.convertEmptyValues?hu():l1(e);if(t?.convertClassInstanceToMap&&typeof e=="object")return a1(e,t);throw new Error(`Unsupported type passed: ${e}. Pass options.convertClassInstanceToMap=true to marshall typeof object as map attribute.`)},_H=(e,t)=>({L:e.filter(r=>typeof r!="function"&&(!t?.removeUndefinedValues||t?.removeUndefinedValues&&r!==void 0)).map(r=>Ic(r,t))}),bH=(e,t)=>{let r=t?.removeUndefinedValues?new Set([...e].filter(n=>n!==void 0)):e;if(!t?.removeUndefinedValues&&r.has(void 0))throw new Error("Pass options.removeUndefinedValues=true to remove undefined values from map/array/set.");if(r.size===0){if(t?.convertEmptyValues)return hu();throw new Error("Pass a non-empty set, or options.convertEmptyValues=true.")}let o=r.values().next().value;if(o instanceof Gs)return{NS:Array.from(r).map(n=>n.toString())};if(typeof o=="number")return{NS:Array.from(r).map(n=>u1(n,t)).map(n=>n.N)};if(typeof o=="bigint")return{NS:Array.from(r).map(p1).map(n=>n.N)};if(typeof o=="string")return{SS:Array.from(r).map(l1).map(n=>n.S)};if(f1(o))return{BS:Array.from(r).map(d1).map(n=>n.B)};throw new Error("Only Number Set (NS), Binary Set (BS) or String Set (SS) are allowed.")},wH=(e,t)=>({M:(r=>{let o={};for(let[n,s]of r)typeof s!="function"&&(s!==void 0||!t?.removeUndefinedValues)&&(o[n]=Ic(s,t));return o})(e)}),a1=(e,t)=>({M:(r=>{let o={};for(let n in r){let s=r[n];typeof s!="function"&&(s!==void 0||!t?.removeUndefinedValues)&&(o[n]=Ic(s,t))}return o})(e)}),hu=()=>({NULL:!0}),d1=e=>({B:e}),l1=e=>({S:e.toString()}),p1=e=>({N:e.toString()}),c1=e=>{throw new Error(`${e} Use NumberValue from @aws-sdk/lib-dynamodb.`)},u1=(e,t)=>{if([Number.NaN,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY].map(r=>r.toString()).includes(e.toString()))throw new Error(`Special numeric value ${e.toString()} is not allowed`);return t?.allowImpreciseNumbers||(Number(e)>Number.MAX_SAFE_INTEGER?c1(`Number ${e.toString()} is greater than Number.MAX_SAFE_INTEGER.`):Number(e)<Number.MIN_SAFE_INTEGER&&c1(`Number ${e.toString()} is lesser than Number.MIN_SAFE_INTEGER.`)),{N:e.toString()}},f1=e=>{let t=["ArrayBuffer","Blob","Buffer","DataView","File","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];return e?.constructor?t.includes(e.constructor.name):!1};var Tc=(e,t)=>{for(let[r,o]of Object.entries(e))if(o!==void 0)switch(r){case"NULL":return null;case"BOOL":return!!o;case"N":return m1(o,t);case"B":return g1(o);case"S":return h1(o);case"L":return RH(o,t);case"M":return IH(o,t);case"NS":return new Set(o.map(n=>m1(n,t)));case"BS":return new Set(o.map(g1));case"SS":return new Set(o.map(h1));default:throw new Error(`Unsupported type passed: ${r}`)}throw new Error(`No value defined: ${JSON.stringify(e)}`)},m1=(e,t)=>{if(typeof t?.wrapNumbers=="function")return t?.wrapNumbers(e);if(t?.wrapNumbers)return Gs.from(e);let r=Number(e),o=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];if((r>Number.MAX_SAFE_INTEGER||r<Number.MIN_SAFE_INTEGER)&&!o.includes(r))if(typeof BigInt=="function")try{return BigInt(e)}catch{throw new Error(`${e} can't be converted to BigInt. Set options.wrapNumbers to get string value.`)}else throw new Error(`${e} is outside SAFE_INTEGER bounds. Set options.wrapNumbers to get string value.`);return r},h1=e=>e,g1=e=>e,RH=(e,t)=>e.map(r=>Tc(r,t)),IH=(e,t)=>Object.entries(e).reduce((r,[o,n])=>(r[o]=Tc(n,t),r),{});function x1(e,t){let r=Ic(e,t),[o,n]=Object.entries(r)[0];switch(o){case"M":case"L":return t?.convertTopLevelContainer?r:n;case"SS":case"NS":case"BS":case"S":case"N":case"B":case"NULL":case"BOOL":case"$unknown":default:return r}}var y1=(e,t)=>t?.convertWithoutMapWrapper?Tc(e,t):Tc({M:e},t);var Vn=null,se={},Wt=[],S1="*",gu=(e,t,r)=>{if(e!==void 0){if(r==null)return t(e);{let o=Object.keys(r),n=o.length===1&&o[0]===S1,s=o.length>=1&&!n,i=o.length===0;if(s)return ux(e,t,r);if(i)return TH(e,t,Vn);if(n)return Object.entries(e??{}).reduce((a,[c,l])=>(typeof l!="function"&&(a[c]=gu(l,t,r[S1])),a),Array.isArray(e)?[]:{})}}},ux=(e,t,r)=>{let o;if(Array.isArray(e))o=e.filter(n=>typeof n!="function");else{o={};for(let[n,s]of Object.entries(e))typeof s!="function"&&(o[n]=s)}for(let[n,s]of Object.entries(r)){if(typeof e[n]=="function")continue;let i=gu(e[n],t,s);i!==void 0&&typeof i!="function"&&(o[n]=i)}return o},TH=(e,t,r)=>Array.isArray(e)?e.filter(o=>typeof o!="function").map(o=>gu(o,t,r)):Object.entries(e).reduce((o,[n,s])=>{if(typeof s=="function")return o;let i=gu(s,t,r);return i!==void 0&&typeof i!="function"&&(o[n]=i),o},{}),E1=(e,t,r)=>ux(e,n=>x1(n,r),t),_1=(e,t,r)=>ux(e,n=>y1(n,r),t);var Ke=class extends Y{addMarshallingMiddleware(t){let{marshallOptions:r={},unmarshallOptions:o={}}=t.translateConfig||{};r.convertTopLevelContainer=r.convertTopLevelContainer??!0,o.convertWithoutMapWrapper=o.convertWithoutMapWrapper??!0,this.clientCommand.middlewareStack.addRelativeTo((n,s)=>async i=>(Jt(s,"DDB_MAPPER","d"),n({...i,input:E1(i.input,this.inputKeyNodes,r)})),{name:"DocumentMarshall",relation:"before",toMiddleware:"serializerMiddleware",override:!0}),this.clientCommand.middlewareStack.addRelativeTo((n,s)=>async i=>{let a=await n(i);return a.output=_1(a.output,this.outputKeyNodes,o),a},{name:"DocumentUnmarshall",relation:"before",toMiddleware:"deserializerMiddleware",override:!0})}};var vc=class extends Ke{input;inputKeyNodes={Key:se,Expected:{"*":{Value:Vn,AttributeValueList:Wt}},ExpressionAttributeValues:se};outputKeyNodes={Attributes:se,ItemCollectionMetrics:{ItemCollectionKey:se}};clientCommand;middlewareStack;constructor(t){super(),this.input=t,this.clientCommand=new du(this.input),this.middlewareStack=this.clientCommand.middlewareStack}resolveMiddleware(t,r,o){this.addMarshallingMiddleware(r);let n=t.concat(this.middlewareStack),s=this.clientCommand.resolveMiddleware(n,r,o);return async()=>s(this.clientCommand)}};var Cc=class extends Ke{input;inputKeyNodes={Key:se};outputKeyNodes={Item:se};clientCommand;middlewareStack;constructor(t){super(),this.input=t,this.clientCommand=new lu(this.input),this.middlewareStack=this.clientCommand.middlewareStack}resolveMiddleware(t,r,o){this.addMarshallingMiddleware(r);let n=t.concat(this.middlewareStack),s=this.clientCommand.resolveMiddleware(n,r,o);return async()=>s(this.clientCommand)}};var Ac=class extends Ke{input;inputKeyNodes={Item:se,Expected:{"*":{Value:Vn,AttributeValueList:Wt}},ExpressionAttributeValues:se};outputKeyNodes={Attributes:se,ItemCollectionMetrics:{ItemCollectionKey:se}};clientCommand;middlewareStack;constructor(t){super(),this.input=t,this.clientCommand=new pu(this.input),this.middlewareStack=this.clientCommand.middlewareStack}resolveMiddleware(t,r,o){this.addMarshallingMiddleware(r);let n=t.concat(this.middlewareStack),s=this.clientCommand.resolveMiddleware(n,r,o);return async()=>s(this.clientCommand)}};var js=class extends Ke{input;inputKeyNodes={KeyConditions:{"*":{AttributeValueList:Wt}},QueryFilter:{"*":{AttributeValueList:Wt}},ExclusiveStartKey:se,ExpressionAttributeValues:se};outputKeyNodes={Items:{"*":se},LastEvaluatedKey:se};clientCommand;middlewareStack;constructor(t){super(),this.input=t,this.clientCommand=new uu(this.input),this.middlewareStack=this.clientCommand.middlewareStack}resolveMiddleware(t,r,o){this.addMarshallingMiddleware(r);let n=t.concat(this.middlewareStack),s=this.clientCommand.resolveMiddleware(n,r,o);return async()=>s(this.clientCommand)}};var Pc=class extends Ke{input;inputKeyNodes={ScanFilter:{"*":{AttributeValueList:Wt}},ExclusiveStartKey:se,ExpressionAttributeValues:se};outputKeyNodes={Items:{"*":se},LastEvaluatedKey:se};clientCommand;middlewareStack;constructor(t){super(),this.input=t,this.clientCommand=new fu(this.input),this.middlewareStack=this.clientCommand.middlewareStack}resolveMiddleware(t,r,o){this.addMarshallingMiddleware(r);let n=t.concat(this.middlewareStack),s=this.clientCommand.resolveMiddleware(n,r,o);return async()=>s(this.clientCommand)}};var Dc=class extends Ke{input;inputKeyNodes={Key:se,AttributeUpdates:{"*":{Value:Vn}},Expected:{"*":{Value:Vn,AttributeValueList:Wt}},ExpressionAttributeValues:se};outputKeyNodes={Attributes:se,ItemCollectionMetrics:{ItemCollectionKey:se}};clientCommand;middlewareStack;constructor(t){super(),this.input=t,this.clientCommand=new mu(this.input),this.middlewareStack=this.clientCommand.middlewareStack}resolveMiddleware(t,r,o){this.addMarshallingMiddleware(r);let n=t.concat(this.middlewareStack),s=this.clientCommand.resolveMiddleware(n,r,o);return async()=>s(this.clientCommand)}};F();var ln=class e extends Ze{config;constructor(t,r){if(super(t.config),this.config=t.config,this.config.translateConfig=r,this.middlewareStack=t.middlewareStack,this.config?.cacheMiddleware)throw new Error("@aws-sdk/lib-dynamodb - cacheMiddleware=true is not compatible with the DynamoDBDocumentClient. This option must be set to false.")}static from(t,r){return new e(t,r)}destroy(){}};Qe();var qTe=zo(ln,js,"ExclusiveStartKey","LastEvaluatedKey","Limit");Qe();var ZTe=zo(ln,Pc,"ExclusiveStartKey","LastEvaluatedKey","Limit");var pn=class e extends Error{code;statusCode;details;correlationId;constructor(t,r,o,n){super(r),this.name="AppError",this.code=t,this.statusCode=af(t),this.details=o,this.correlationId=n,Error.captureStackTrace&&Error.captureStackTrace(this,e)}},fx=class extends pn{constructor(t,r,o){super("ValidationError",t,r,o),this.name="ValidationError"}},mx=class extends pn{constructor(t="Authentication required",r){super("Unauthorized",t,void 0,r),this.name="UnauthorizedError"}},hx=class extends pn{constructor(t="Insufficient permissions",r){super("Forbidden",t,void 0,r),this.name="ForbiddenError"}},gx=class extends pn{constructor(t="Resource not found",r){super("NotFound",t,void 0,r),this.name="NotFoundError"}},xx=class extends pn{constructor(t="Resource already exists",r){super("Conflict",t,void 0,r),this.name="ConflictError"}},yx=class extends pn{constructor(t="Internal server error",r,o){super("InternalError",t,r,o),this.name="InternalError"}};function lt(e,t,r,o){switch(e){case"ValidationError":return new fx(t,r,o);case"Unauthorized":return new mx(t,o);case"Forbidden":return new hx(t,o);case"NotFound":return new gx(t,o);case"Conflict":return new xx(t,o);case"InternalError":return new yx(t,r,o);default:return new pn(e,t,r,o)}}import{randomUUID as b1}from"crypto";var vH=()=>{let e=new cu({region:process.env.AWS_REGION||"us-east-1",maxAttempts:3,retryMode:"adaptive",requestHandler:{requestTimeout:5e3,httpsAgent:{maxSockets:50,keepAlive:!0}}});return ln.from(e,{marshallOptions:{convertEmptyValues:!1,removeUndefinedValues:!0,convertClassInstanceToMap:!1},unmarshallOptions:{wrapNumbers:!1}})},Sx=null,CH=()=>(Sx||(Sx=vH(),S.info("DynamoDB client initialized")),Sx),AH=()=>{let e=ro();return{staff:e.dynamodb.staffTable,passwordResetTokens:e.dynamodb.passwordResetTokensTable,tenants:e.dynamodb.tenantsTable}},_x=class{client;tables;constructor(){this.client=CH(),this.tables=AH()}async getItem(t,r,o){try{S.info("DynamoDB GetItem operation",{tableName:t,key:Object.keys(r),correlationId:o});let n=new Cc({TableName:t,Key:r}),s=await this.client.send(n);return S.info("DynamoDB GetItem completed",{tableName:t,found:!!s.Item,correlationId:o}),s.Item}catch(n){throw S.error("DynamoDB GetItem failed",{tableName:t,error:n instanceof Error?n.message:"Unknown error",correlationId:o}),n}}async putItem(t,r,o){try{S.info("DynamoDB PutItem operation",{tableName:t,itemKeys:Object.keys(r),correlationId:o});let n=new Ac({TableName:t,Item:r});return await this.client.send(n),S.info("DynamoDB PutItem completed",{tableName:t,correlationId:o}),r}catch(n){throw S.error("DynamoDB PutItem failed",{tableName:t,error:n instanceof Error?n.message:"Unknown error",correlationId:o}),n}}async updateItem(t,r,o,n,s,i){try{S.info("DynamoDB UpdateItem operation",{tableName:t,key:Object.keys(r),correlationId:i});let a=new Dc({TableName:t,Key:r,UpdateExpression:o,ExpressionAttributeValues:n,ExpressionAttributeNames:s,ReturnValues:"ALL_NEW"}),c=await this.client.send(a);return S.info("DynamoDB UpdateItem completed",{tableName:t,correlationId:i}),c.Attributes}catch(a){throw S.error("DynamoDB UpdateItem failed",{tableName:t,error:a instanceof Error?a.message:"Unknown error",correlationId:i}),a}}async deleteItem(t,r,o){try{S.info("DynamoDB DeleteItem operation",{tableName:t,key:Object.keys(r),correlationId:o});let n=new vc({TableName:t,Key:r});await this.client.send(n),S.info("DynamoDB DeleteItem completed",{tableName:t,correlationId:o})}catch(n){throw S.error("DynamoDB DeleteItem failed",{tableName:t,error:n instanceof Error?n.message:"Unknown error",correlationId:o}),n}}async queryItems(t,r,o,n,s,i){try{S.info("DynamoDB Query operation",{tableName:t,indexName:n,correlationId:i});let a=new js({TableName:t,KeyConditionExpression:r,ExpressionAttributeValues:o,ExpressionAttributeNames:s,IndexName:n}),c=await this.client.send(a);return S.info("DynamoDB Query completed",{tableName:t,itemCount:c.Items?.length||0,correlationId:i}),c.Items||[]}catch(a){throw S.error("DynamoDB Query failed",{tableName:t,error:a instanceof Error?a.message:"Unknown error",correlationId:i}),a}}async getStaffById(t,r){try{let o=await this.getItem(this.tables.staff,{staff_id:t},r);if(!o)return{found:!1};let n=si.safeParse(o);if(!n.success)throw S.error("Invalid staff record format in database",{staffId:t,errors:n.error.errors,correlationId:r}),lt("InternalError","Invalid staff record format");return{staff:n.data,found:!0}}catch(o){throw S.error("Failed to get staff by ID",{staffId:t,error:o instanceof Error?o.message:"Unknown error",correlationId:r}),o}}async getStaffByEmail(t,r){try{let o=t.toLowerCase(),n=await this.queryItems(this.tables.staff,"email = :email",{":email":o},"EmailIndex",void 0,r);if(!n||n.length===0)return{found:!1};let s=n[0],i=si.safeParse(s);if(!i.success)throw S.error("Invalid staff record format in database",{email:o,errors:i.error.errors,correlationId:r}),lt("InternalError","Invalid staff record format");return{staff:i.data,found:!0}}catch(o){throw S.error("Failed to get staff by email",{email:t,error:o instanceof Error?o.message:"Unknown error",correlationId:r}),o}}async createStaff(t,r){try{let o=new Date().toISOString(),n={staff_id:b1(),...t,email:t.email.toLowerCase(),created_at:o,updated_at:o},s=si.safeParse(n);if(!s.success)throw S.error("Invalid staff record data",{errors:s.error.errors,correlationId:r}),lt("ValidationError","Invalid staff record data");if((await this.getStaffByEmail(n.email,r)).found)throw S.warn("Attempted to create staff with duplicate email",{email:n.email,correlationId:r}),lt("Conflict","Staff member with this email already exists");return await this.putItem(this.tables.staff,s.data,r),{success:!0,data:s.data,correlationId:r}}catch(o){if(S.error("Failed to create staff",{error:o instanceof Error?o.message:"Unknown error",correlationId:r}),o instanceof Error&&o.message.includes("already exists"))return{success:!1,error:o.message,correlationId:r};throw o}}async updateStaff(t,r,o){try{let n={...r,updated_at:new Date().toISOString()},s="SET "+Object.keys(n).map((p,u)=>`#${p} = :val${u}`).join(", "),i=Object.keys(n).reduce((p,u)=>(p[`#${u}`]=u,p),{}),a=Object.keys(n).reduce((p,u,f)=>(p[`:val${f}`]=n[u],p),{}),c=await this.updateItem(this.tables.staff,{staff_id:t},s,a,i,o);if(!c)throw lt("NotFound","Staff member not found");let l=si.safeParse(c);if(!l.success)throw S.error("Invalid staff record after update",{staffId:t,errors:l.error.errors,correlationId:o}),lt("InternalError","Invalid staff record after update");return{success:!0,data:l.data,correlationId:o}}catch(n){throw S.error("Failed to update staff",{staffId:t,error:n instanceof Error?n.message:"Unknown error",correlationId:o}),n}}async updateStaffPassword(t,r,o){try{let n={password_hash:r,updated_at:new Date().toISOString()},s="SET password_hash = :password_hash, updated_at = :updated_at",i={":password_hash":n.password_hash,":updated_at":n.updated_at},a=await this.updateItem(this.tables.staff,{staff_id:t},s,i,void 0,o);if(!a)throw lt("NotFound","Staff member not found");let c=si.safeParse(a);if(!c.success)throw S.error("Invalid staff record after password update",{staffId:t,errors:c.error.errors,correlationId:o}),lt("InternalError","Invalid staff record after password update");return{success:!0,data:c.data,correlationId:o}}catch(n){throw S.error("Failed to update staff password",{staffId:t,error:n instanceof Error?n.message:"Unknown error",correlationId:o}),n}}async getPasswordResetToken(t,r){try{let o=await this.getItem(this.tables.passwordResetTokens,{token_hash:t},r);if(!o)return{found:!1};let n=od.safeParse(o);if(!n.success)throw S.error("Invalid password reset token format in database",{tokenHash:t,errors:n.error.errors,correlationId:r}),lt("InternalError","Invalid password reset token format");let s=Math.floor(Date.now()/1e3),i=n.data.expires_at<=s;return{token:n.data,found:!0,expired:i}}catch(o){throw S.error("Failed to get password reset token",{tokenHash:t,error:o instanceof Error?o.message:"Unknown error",correlationId:r}),o}}async createPasswordResetToken(t,r){try{let o={...t,created_at:new Date().toISOString()},n=od.safeParse(o);if(!n.success)throw S.error("Invalid password reset token data",{errors:n.error.errors,correlationId:r}),lt("ValidationError","Invalid password reset token data");return await this.putItem(this.tables.passwordResetTokens,n.data,r),{success:!0,data:n.data,correlationId:r}}catch(o){throw S.error("Failed to create password reset token",{error:o instanceof Error?o.message:"Unknown error",correlationId:r}),o}}async markPasswordResetTokenUsed(t,r){try{let o=await this.updateItem(this.tables.passwordResetTokens,{token_hash:t},"SET used_at = :used_at",{":used_at":new Date().toISOString()},void 0,r);if(!o)throw lt("NotFound","Password reset token not found");let n=od.safeParse(o);if(!n.success)throw S.error("Invalid password reset token after update",{tokenHash:t,errors:n.error.errors,correlationId:r}),lt("InternalError","Invalid password reset token after update");return{success:!0,data:n.data,correlationId:r}}catch(o){throw S.error("Failed to mark password reset token as used",{tokenHash:t,error:o instanceof Error?o.message:"Unknown error",correlationId:r}),o}}async deletePasswordResetToken(t,r){return this.deleteItem(this.tables.passwordResetTokens,{token_hash:t},r)}async getTenant(t,r){try{let o=await this.getItem(this.tables.tenants,{tenant_id:t},r);if(!o)return{found:!1};let n=nd.safeParse(o);if(!n.success)throw S.error("Invalid tenant record format in database",{tenantId:t,errors:n.error.errors,correlationId:r}),lt("InternalError","Invalid tenant record format");return{tenant:n.data,found:!0}}catch(o){throw S.error("Failed to get tenant",{tenantId:t,error:o instanceof Error?o.message:"Unknown error",correlationId:r}),o}}async createTenant(t,r){try{let o=new Date().toISOString(),n={tenant_id:b1(),...t,email:t.email.toLowerCase(),status:"pending",created_at:o,updated_at:o},s=nd.safeParse(n);if(!s.success)throw S.error("Invalid tenant record data",{errors:s.error.errors,correlationId:r}),lt("ValidationError","Invalid tenant record data");return await this.putItem(this.tables.tenants,s.data,r),{success:!0,data:s.data,correlationId:r}}catch(o){throw S.error("Failed to create tenant",{error:o instanceof Error?o.message:"Unknown error",correlationId:r}),o}}async updateTenant(t,r,o){try{let n={...r,...r.email&&{email:r.email.toLowerCase()},updated_at:new Date().toISOString()},s="SET "+Object.keys(n).map((p,u)=>`#${p} = :val${u}`).join(", "),i=Object.keys(n).reduce((p,u)=>(p[`#${u}`]=u,p),{}),a=Object.keys(n).reduce((p,u,f)=>(p[`:val${f}`]=n[u],p),{}),c=await this.updateItem(this.tables.tenants,{tenant_id:t},s,a,i,o);if(!c)throw lt("NotFound","Tenant not found");let l=nd.safeParse(c);if(!l.success)throw S.error("Invalid tenant record after update",{tenantId:t,errors:l.error.errors,correlationId:o}),lt("InternalError","Invalid tenant record after update");return{success:!0,data:l.data,correlationId:o}}catch(n){throw S.error("Failed to update tenant",{tenantId:t,error:n instanceof Error?n.message:"Unknown error",correlationId:o}),n}}},Ex=null,Q={get instance(){return Ex||(Ex=new _x),Ex},getItem:(e,t,r)=>Q.instance.getItem(e,t,r),putItem:(e,t,r)=>Q.instance.putItem(e,t,r),updateItem:(e,t,r,o,n,s)=>Q.instance.updateItem(e,t,r,o,n,s),deleteItem:(e,t,r)=>Q.instance.deleteItem(e,t,r),queryItems:(e,t,r,o,n,s)=>Q.instance.queryItems(e,t,r,o,n,s),getStaffById:(e,t)=>Q.instance.getStaffById(e,t),getStaffByEmail:(e,t)=>Q.instance.getStaffByEmail(e,t),createStaff:(e,t)=>Q.instance.createStaff(e,t),updateStaff:(e,t,r)=>Q.instance.updateStaff(e,t,r),updateStaffPassword:(e,t,r)=>Q.instance.updateStaffPassword(e,t,r),getPasswordResetToken:(e,t)=>Q.instance.getPasswordResetToken(e,t),createPasswordResetToken:(e,t)=>Q.instance.createPasswordResetToken(e,t),markPasswordResetTokenUsed:(e,t)=>Q.instance.markPasswordResetTokenUsed(e,t),deletePasswordResetToken:(e,t)=>Q.instance.deletePasswordResetToken(e,t),getTenant:(e,t)=>Q.instance.getTenant(e,t),createTenant:(e,t)=>Q.instance.createTenant(e,t),updateTenant:(e,t,r)=>Q.instance.updateTenant(e,t,r)};var wx=Lx(T1(),1);var Yi=class{saltRounds;constructor(){let t=ro();this.saltRounds=t.security.bcryptRounds,S.info("Password helper initialized",{saltRounds:this.saltRounds})}async hashPassword(t,r){try{if(S.info("Hashing password",{correlationId:r}),!t||t.length===0)throw new Error("Password cannot be empty");if(t.length<8)throw new Error("Password must be at least 8 characters long");let o=await wx.default.hash(t,this.saltRounds);return S.info("Password hashed successfully",{correlationId:r}),o}catch(o){throw S.error("Failed to hash password",{error:o instanceof Error?o.message:"Unknown error",correlationId:r}),o}}async verifyPassword(t,r,o){try{if(S.info("Verifying password",{correlationId:o}),!t||!r)return S.info("Password verification failed: empty password or hash",{correlationId:o}),!1;let n=await wx.default.compare(t,r);return S.info("Password verification completed",{isValid:n,correlationId:o}),n}catch(n){return S.error("Failed to verify password",{error:n instanceof Error?n.message:"Unknown error",correlationId:o}),!1}}static validatePasswordStrength(t){let r=[];return t?(t.length<8&&r.push("Password must be at least 8 characters long"),t.length>128&&r.push("Password must be less than 128 characters long"),/[a-z]/.test(t)||r.push("Password must contain at least one lowercase letter"),/[A-Z]/.test(t)||r.push("Password must contain at least one uppercase letter"),/\d/.test(t)||r.push("Password must contain at least one number"),/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(t)||r.push("Password must contain at least one special character"),["password","password123","123456","123456789","qwerty","abc123","password1","admin","letmein","welcome"].includes(t.toLowerCase())&&r.push("Password is too common and easily guessable"),{isValid:r.length===0,errors:r}):(r.push("Password is required"),{isValid:!1,errors:r})}static generateSecurePassword(t=16){let r="abcdefghijklmnopqrstuvwxyz",o="ABCDEFGHIJKLMNOPQRSTUVWXYZ",n="0123456789",s="!@#$%^&*()_+-=[]{}|;:,.<>?",i=r+o+n+s,a="";a+=r[Math.floor(Math.random()*r.length)],a+=o[Math.floor(Math.random()*o.length)],a+=n[Math.floor(Math.random()*n.length)],a+=s[Math.floor(Math.random()*s.length)];for(let c=4;c<t;c++)a+=i[Math.floor(Math.random()*i.length)];return a.split("").sort(()=>Math.random()-.5).join("")}},bx=null,jn={get instance(){return bx||(bx=new Yi),bx},hashPassword:(e,t)=>jn.instance.hashPassword(e,t),verifyPassword:(e,t,r)=>jn.instance.verifyPassword(e,t,r),constructor:Yi};var Rx=async(e,t)=>{try{S.info("Processing login request",{correlationId:e.correlationId,email:e.body?.email});let r=ad.safeParse(e.body);if(!r.success){S.warn("Login validation failed",{correlationId:e.correlationId,errors:r.error.errors}),M(t,"ValidationError","Invalid login credentials format",e.correlationId,{validationErrors:r.error.errors});return}let{email:o,password:n}=r.data,s=await Q.getStaffByEmail(o,e.correlationId);if(!s.found||!s.staff){S.warn("Login attempt for non-existent email",{correlationId:e.correlationId,email:o}),M(t,"Unauthorized","Invalid email or password",e.correlationId);return}let i=s.staff;if(!i.enabled){S.warn("Login attempt for disabled account",{correlationId:e.correlationId,email:o,staffId:i.staff_id}),M(t,"Unauthorized","Account is disabled",e.correlationId);return}if(!await jn.verifyPassword(n,i.password_hash,e.correlationId)){S.warn("Login attempt with invalid password",{correlationId:e.correlationId,email:o,staffId:i.staff_id}),M(t,"Unauthorized","Invalid email or password",e.correlationId);return}let c=await ni.signToken({staffId:i.staff_id,email:i.email,roles:i.roles},e.correlationId);S.info("Login successful",{correlationId:e.correlationId,staffId:i.staff_id,email:i.email,roles:i.roles}),t.status(200).json({success:!0,data:{token:c,staff:{staff_id:i.staff_id,email:i.email,roles:i.roles,enabled:i.enabled}},timestamp:new Date().toISOString()})}catch(r){S.error("Login handler error",{correlationId:e.correlationId,error:r instanceof Error?r.message:"Unknown error"}),M(t,"InternalError","Login failed",e.correlationId)}};ps();us();fs();An();Tt();Qe();ye();Rs();Ue();Qt();F();je();ft();var v1=async(e,t,r)=>({operation:Fe(t).operation,region:await Ee(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function PH(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"ses",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}var C1=e=>{let t=[];switch(e.operation){default:t.push(PH(e))}return t},A1=e=>{let t=Ir(e);return Object.assign(t,{authSchemePreference:Ee(e.authSchemePreference??[])})};var P1=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"ses"}),D1={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var N1={name:"@aws-sdk/client-ses",description:"AWS SDK for JavaScript Ses Client for Node.js, Browser and React Native",version:"3.958.0",scripts:{build:"concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs","build:cjs":"node ../../scripts/compilation/inline client-ses","build:es":"tsc -p tsconfig.es.json","build:include:deps":'yarn g:turbo run build -F="$npm_package_name"',"build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo ses","test:e2e":"yarn g:vitest run -c vitest.config.e2e.mts --mode development","test:e2e:watch":"yarn g:vitest watch -c vitest.config.e2e.mts","test:index":"tsc --noEmit ./test/index-types.ts && node ./test/index-objects.spec.mjs"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.957.0","@aws-sdk/credential-provider-node":"3.958.0","@aws-sdk/middleware-host-header":"3.957.0","@aws-sdk/middleware-logger":"3.957.0","@aws-sdk/middleware-recursion-detection":"3.957.0","@aws-sdk/middleware-user-agent":"3.957.0","@aws-sdk/region-config-resolver":"3.957.0","@aws-sdk/types":"3.957.0","@aws-sdk/util-endpoints":"3.957.0","@aws-sdk/util-user-agent-browser":"3.957.0","@aws-sdk/util-user-agent-node":"3.957.0","@smithy/config-resolver":"^4.4.5","@smithy/core":"^3.20.0","@smithy/fetch-http-handler":"^5.3.8","@smithy/hash-node":"^4.2.7","@smithy/invalid-dependency":"^4.2.7","@smithy/middleware-content-length":"^4.2.7","@smithy/middleware-endpoint":"^4.4.1","@smithy/middleware-retry":"^4.4.17","@smithy/middleware-serde":"^4.2.8","@smithy/middleware-stack":"^4.2.7","@smithy/node-config-provider":"^4.3.7","@smithy/node-http-handler":"^4.4.7","@smithy/protocol-http":"^5.3.7","@smithy/smithy-client":"^4.10.2","@smithy/types":"^4.11.0","@smithy/url-parser":"^4.2.7","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.16","@smithy/util-defaults-mode-node":"^4.2.19","@smithy/util-endpoints":"^3.2.7","@smithy/util-middleware":"^4.2.7","@smithy/util-retry":"^4.2.7","@smithy/util-utf8":"^4.2.0","@smithy/util-waiter":"^4.2.7",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-ses",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-ses"}};je();Ps();Tt();Ds();Qt();Mr();qo();F();Ns();Os();on();je();tn();F();en();mt();He();_n();io();var V1="required",$o="fn",Mo="argv",Qi="ref";var O1="isSet",Oc="booleanEquals",Xi="error",Nc="endpoint",un="tree",Ix="PartitionResult",k1={[V1]:!1,type:"string"},$1={[V1]:!0,default:!1,type:"boolean"},M1={[Qi]:"Endpoint"},G1={[$o]:Oc,[Mo]:[{[Qi]:"UseFIPS"},!0]},j1={[$o]:Oc,[Mo]:[{[Qi]:"UseDualStack"},!0]},ko={},L1={[$o]:"getAttr",[Mo]:[{[Qi]:Ix},"supportsFIPS"]},U1={[$o]:Oc,[Mo]:[!0,{[$o]:"getAttr",[Mo]:[{[Qi]:Ix},"supportsDualStack"]}]},F1=[G1],B1=[j1],H1=[{[Qi]:"Region"}],NH={version:"1.0",parameters:{Region:k1,UseDualStack:$1,UseFIPS:$1,Endpoint:k1},rules:[{conditions:[{[$o]:O1,[Mo]:[M1]}],rules:[{conditions:F1,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Xi},{conditions:B1,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Xi},{endpoint:{url:M1,properties:ko,headers:ko},type:Nc}],type:un},{conditions:[{[$o]:O1,[Mo]:H1}],rules:[{conditions:[{[$o]:"aws.partition",[Mo]:H1,assign:Ix}],rules:[{conditions:[G1,j1],rules:[{conditions:[{[$o]:Oc,[Mo]:[!0,L1]},U1],rules:[{endpoint:{url:"https://email-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ko,headers:ko},type:Nc}],type:un},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Xi}],type:un},{conditions:F1,rules:[{conditions:[{[$o]:Oc,[Mo]:[L1,!0]}],rules:[{endpoint:{url:"https://email-fips.{Region}.{PartitionResult#dnsSuffix}",properties:ko,headers:ko},type:Nc}],type:un},{error:"FIPS is enabled but this partition does not support FIPS",type:Xi}],type:un},{conditions:B1,rules:[{conditions:[U1],rules:[{endpoint:{url:"https://email.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ko,headers:ko},type:Nc}],type:un},{error:"DualStack is enabled but this partition does not support DualStack",type:Xi}],type:un},{endpoint:{url:"https://email.{Region}.{PartitionResult#dnsSuffix}",properties:ko,headers:ko},type:Nc}],type:un}],type:un},{error:"Invalid Configuration: Missing Region",type:Xi}]},W1=NH;var OH=new Mt({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),z1=(e,t={})=>OH.get(e,()=>Er(W1,{endpointParams:e,logger:t.logger}));st.aws=qt;var K1=e=>({apiVersion:"2010-12-01",base64Decoder:e?.base64Decoder??Le,base64Encoder:e?.base64Encoder??Ne,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??z1,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??C1,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new at}],logger:e?.logger??new xt,protocol:e?.protocol??Ti,protocolSettings:e?.protocolSettings??{defaultNamespace:"com.amazonaws.ses",xmlNamespace:"http://ses.amazonaws.com/doc/2010-12-01/",version:"2010-12-01",serviceTarget:"SimpleEmailService"},serviceId:e?.serviceId??"SES",urlParser:e?.urlParser??rt,utf8Decoder:e?.utf8Decoder??Oe,utf8Encoder:e?.utf8Encoder??De});var q1=e=>{vr(process.version);let t=Wr(e),r=()=>t().then(Tr),o=K1(e);_r(process.version);let n={profile:e?.profile,logger:o.logger};return{...o,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??L(br,n),bodyLengthChecker:e?.bodyLengthChecker??jr,credentialDefaultProvider:e?.credentialDefaultProvider??su,defaultUserAgentProvider:e?.defaultUserAgentProvider??Vr({serviceId:o.serviceId,clientVersion:N1.version}),maxAttempts:e?.maxAttempts??L(Ur,e),region:e?.region??L(yt,{...Ut,...n}),requestHandler:ht.create(e?.requestHandler??r),retryMode:e?.retryMode??L({...Br,default:async()=>(await r()).retryMode||Bt},e),sha256:e?.sha256??Vt.bind(null,"sha256"),streamCollector:e?.streamCollector??Dt,useDualstackEndpoint:e?.useDualstackEndpoint??L(Nr,n),useFipsEndpoint:e?.useFipsEndpoint??L(Or,n),userAgentAppId:e?.userAgentAppId??L(Gr,n)}};$n();$e();F();var J1=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,o=e.credentials;return{setHttpAuthScheme(n){let s=t.findIndex(i=>i.schemeId===n.schemeId);s===-1?t.push(n):t.splice(s,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){o=n},credentials(){return o}}},Y1=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()});var X1=(e,t)=>{let r=Object.assign(Jr(e),Cr(e),ir(e),J1(e));return t.forEach(o=>o.configure(r)),Object.assign(e,Yr(r),Ar(r),ar(r),Y1(r))};var xu=class extends Ze{config;constructor(...[t]){let r=q1(t||{});super(r),this.initConfig=r;let o=P1(r),n=xr(o),s=Fr(n),i=kr(s),a=i,c=Lr(a),l=A1(c),p=X1(l,t?.extensions||[]);this.config=p,this.middlewareStack.use(mr(this.config)),this.middlewareStack.use(Dr(this.config)),this.middlewareStack.use(Hr(this.config)),this.middlewareStack.use($r(this.config)),this.middlewareStack.use(dr(this.config)),this.middlewareStack.use(lr(this.config)),this.middlewareStack.use(pr(this.config)),this.middlewareStack.use(ur(this.config,{httpAuthSchemeParametersProvider:v1,identityProviderConfigProvider:async u=>new $t({"aws.auth#sigv4":u.credentials})})),this.middlewareStack.use(fr(this.config))}destroy(){super.destroy()}};ye();F();var Z=class e extends Lt{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var yu=class e extends Z{name="AccountSendingPausedException";$fault="client";constructor(t){super({name:"AccountSendingPausedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Su=class e extends Z{name="AlreadyExistsException";$fault="client";Name;constructor(t){super({name:"AlreadyExistsException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Name=t.Name}},Eu=class e extends Z{name="CannotDeleteException";$fault="client";Name;constructor(t){super({name:"CannotDeleteException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Name=t.Name}},_u=class e extends Z{name="LimitExceededException";$fault="client";constructor(t){super({name:"LimitExceededException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},bu=class e extends Z{name="RuleSetDoesNotExistException";$fault="client";Name;constructor(t){super({name:"RuleSetDoesNotExistException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Name=t.Name}},wu=class e extends Z{name="ConfigurationSetAlreadyExistsException";$fault="client";ConfigurationSetName;constructor(t){super({name:"ConfigurationSetAlreadyExistsException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.ConfigurationSetName=t.ConfigurationSetName}},Ru=class e extends Z{name="ConfigurationSetDoesNotExistException";$fault="client";ConfigurationSetName;constructor(t){super({name:"ConfigurationSetDoesNotExistException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.ConfigurationSetName=t.ConfigurationSetName}},Iu=class e extends Z{name="ConfigurationSetSendingPausedException";$fault="client";ConfigurationSetName;constructor(t){super({name:"ConfigurationSetSendingPausedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.ConfigurationSetName=t.ConfigurationSetName}},Tu=class e extends Z{name="InvalidConfigurationSetException";$fault="client";constructor(t){super({name:"InvalidConfigurationSetException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},vu=class e extends Z{name="EventDestinationAlreadyExistsException";$fault="client";ConfigurationSetName;EventDestinationName;constructor(t){super({name:"EventDestinationAlreadyExistsException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.ConfigurationSetName=t.ConfigurationSetName,this.EventDestinationName=t.EventDestinationName}},Cu=class e extends Z{name="InvalidCloudWatchDestinationException";$fault="client";ConfigurationSetName;EventDestinationName;constructor(t){super({name:"InvalidCloudWatchDestinationException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.ConfigurationSetName=t.ConfigurationSetName,this.EventDestinationName=t.EventDestinationName}},Au=class e extends Z{name="InvalidFirehoseDestinationException";$fault="client";ConfigurationSetName;EventDestinationName;constructor(t){super({name:"InvalidFirehoseDestinationException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.ConfigurationSetName=t.ConfigurationSetName,this.EventDestinationName=t.EventDestinationName}},Pu=class e extends Z{name="InvalidSNSDestinationException";$fault="client";ConfigurationSetName;EventDestinationName;constructor(t){super({name:"InvalidSNSDestinationException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.ConfigurationSetName=t.ConfigurationSetName,this.EventDestinationName=t.EventDestinationName}},Du=class e extends Z{name="InvalidTrackingOptionsException";$fault="client";constructor(t){super({name:"InvalidTrackingOptionsException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Nu=class e extends Z{name="TrackingOptionsAlreadyExistsException";$fault="client";ConfigurationSetName;constructor(t){super({name:"TrackingOptionsAlreadyExistsException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.ConfigurationSetName=t.ConfigurationSetName}},Ou=class e extends Z{name="CustomVerificationEmailInvalidContentException";$fault="client";constructor(t){super({name:"CustomVerificationEmailInvalidContentException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},ku=class e extends Z{name="CustomVerificationEmailTemplateAlreadyExistsException";$fault="client";CustomVerificationEmailTemplateName;constructor(t){super({name:"CustomVerificationEmailTemplateAlreadyExistsException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.CustomVerificationEmailTemplateName=t.CustomVerificationEmailTemplateName}},$u=class e extends Z{name="FromEmailAddressNotVerifiedException";$fault="client";FromEmailAddress;constructor(t){super({name:"FromEmailAddressNotVerifiedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.FromEmailAddress=t.FromEmailAddress}},Mu=class e extends Z{name="InvalidLambdaFunctionException";$fault="client";FunctionArn;constructor(t){super({name:"InvalidLambdaFunctionException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.FunctionArn=t.FunctionArn}},Lu=class e extends Z{name="InvalidS3ConfigurationException";$fault="client";Bucket;constructor(t){super({name:"InvalidS3ConfigurationException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Bucket=t.Bucket}},Uu=class e extends Z{name="InvalidSnsTopicException";$fault="client";Topic;constructor(t){super({name:"InvalidSnsTopicException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Topic=t.Topic}},Fu=class e extends Z{name="RuleDoesNotExistException";$fault="client";Name;constructor(t){super({name:"RuleDoesNotExistException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Name=t.Name}},Bu=class e extends Z{name="InvalidTemplateException";$fault="client";TemplateName;constructor(t){super({name:"InvalidTemplateException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.TemplateName=t.TemplateName}},Hu=class e extends Z{name="CustomVerificationEmailTemplateDoesNotExistException";$fault="client";CustomVerificationEmailTemplateName;constructor(t){super({name:"CustomVerificationEmailTemplateDoesNotExistException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.CustomVerificationEmailTemplateName=t.CustomVerificationEmailTemplateName}},Vu=class e extends Z{name="EventDestinationDoesNotExistException";$fault="client";ConfigurationSetName;EventDestinationName;constructor(t){super({name:"EventDestinationDoesNotExistException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.ConfigurationSetName=t.ConfigurationSetName,this.EventDestinationName=t.EventDestinationName}},Gu=class e extends Z{name="TrackingOptionsDoesNotExistException";$fault="client";ConfigurationSetName;constructor(t){super({name:"TrackingOptionsDoesNotExistException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.ConfigurationSetName=t.ConfigurationSetName}},ju=class e extends Z{name="TemplateDoesNotExistException";$fault="client";TemplateName;constructor(t){super({name:"TemplateDoesNotExistException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.TemplateName=t.TemplateName}},Wu=class e extends Z{name="InvalidDeliveryOptionsException";$fault="client";constructor(t){super({name:"InvalidDeliveryOptionsException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},zu=class e extends Z{name="InvalidPolicyException";$fault="client";constructor(t){super({name:"InvalidPolicyException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ku=class e extends Z{name="InvalidRenderingParameterException";$fault="client";TemplateName;constructor(t){super({name:"InvalidRenderingParameterException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.TemplateName=t.TemplateName}},qu=class e extends Z{name="MailFromDomainNotVerifiedException";$fault="client";constructor(t){super({name:"MailFromDomainNotVerifiedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ju=class e extends Z{name="MessageRejected";$fault="client";constructor(t){super({name:"MessageRejected",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Yu=class e extends Z{name="MissingRenderingAttributeException";$fault="client";TemplateName;constructor(t){super({name:"MissingRenderingAttributeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.TemplateName=t.TemplateName}},Xu=class e extends Z{name="ProductionAccessNotGrantedException";$fault="client";constructor(t){super({name:"ProductionAccessNotGrantedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}};var kH="AlreadyExistsException";var $H="AccountSendingPausedException";var Q1="Body";var MH="BccAddresses";var LH="Bucket",UH="Content";var FH="CcAddresses";var BH="CannotDeleteException";var HH="ConfigurationSetAlreadyExistsException";var VH="ConfigurationSetDoesNotExistException",uo="ConfigurationSetName",GH="ConfigurationSetSendingPausedException";var jH="CustomVerificationEmailInvalidContentException";var WH="CustomVerificationEmailTemplateAlreadyExistsException",zH="CustomVerificationEmailTemplateDoesNotExistException",Z1="CustomVerificationEmailTemplateName";var KH="Charset";var e$="Destination";var qH="Data";var JH="EventDestinationAlreadyExistsException",YH="EventDestinationDoesNotExistException",kc="EventDestinationName";var XH="FunctionArn";var QH="FromEmailAddress",ZH="FromEmailAddressNotVerifiedException";var eV="Html";var tV="InvalidConfigurationSetException",rV="InvalidCloudWatchDestinationException";var oV="InvalidDeliveryOptionsException";var nV="InvalidFirehoseDestinationException",sV="InvalidLambdaFunctionException";var iV="InvalidPolicyException";var aV="InvalidRenderingParameterException",cV="InvalidS3ConfigurationException",dV="InvalidSNSDestinationException",lV="InvalidSnsTopicException";var pV="InvalidTemplateException",uV="InvalidTrackingOptionsException";var fV="LimitExceededException";var t$="Message";var mV="MailFromDomainNotVerifiedException";var hV="MessageId";var gV="MissingRenderingAttributeException",xV="MessageRejected";var yV="MessageTag",SV="MessageTagList";var $c="Name";var EV="ProductionAccessNotGrantedException";var _V="RuleDoesNotExistException";var bV="ReturnPath",wV="ReturnPathArn";var RV="RuleSetDoesNotExistException";var IV="ReplyToAddresses";var TV="SourceArn";var vV="SendEmailRequest",CV="SendEmailResponse";var AV="SendEmail";var PV="Source";var DV="Subject",NV="Text";var OV="ToAddresses";var kV="TemplateDoesNotExistException";var Qu="TemplateName";var $V="TrackingOptionsAlreadyExistsException",MV="TrackingOptionsDoesNotExistException";var LV="Tags";var UV="Topic";var FV="Value";var de="awsQueryError",le="client",pe="error",ue="httpError",fe="message",r$="smithy.ts.sdk.synthetic.com.amazonaws.ses",D="com.amazonaws.ses",BV=[-3,D,$H,{[de]:["AccountSendingPausedException",400],[pe]:le,[ue]:400},[fe],[0]];w.for(D).registerError(BV,yu);var HV=[-3,D,kH,{[de]:["AlreadyExists",400],[pe]:le,[ue]:400},[$c,fe],[0,0]];w.for(D).registerError(HV,Su);var VV=[3,D,Q1,0,[NV,eV],[()=>Tx,()=>Tx]];var GV=[-3,D,BH,{[de]:["CannotDelete",400],[pe]:le,[ue]:400},[$c,fe],[0,0]];w.for(D).registerError(GV,Eu);var jV=[-3,D,HH,{[de]:["ConfigurationSetAlreadyExists",400],[pe]:le,[ue]:400},[uo,fe],[0,0]];w.for(D).registerError(jV,wu);var WV=[-3,D,VH,{[de]:["ConfigurationSetDoesNotExist",400],[pe]:le,[ue]:400},[uo,fe],[0,0]];w.for(D).registerError(WV,Ru);var zV=[-3,D,GH,{[de]:["ConfigurationSetSendingPausedException",400],[pe]:le,[ue]:400},[uo,fe],[0,0]];w.for(D).registerError(zV,Iu);var Tx=[3,D,UH,0,[qH,KH],[0,0]];var KV=[-3,D,jH,{[de]:["CustomVerificationEmailInvalidContent",400],[pe]:le,[ue]:400},[fe],[0]];w.for(D).registerError(KV,Ou);var qV=[-3,D,WH,{[de]:["CustomVerificationEmailTemplateAlreadyExists",400],[pe]:le,[ue]:400},[Z1,fe],[0,0]];w.for(D).registerError(qV,ku);var JV=[-3,D,zH,{[de]:["CustomVerificationEmailTemplateDoesNotExist",400],[pe]:le,[ue]:400},[Z1,fe],[0,0]];w.for(D).registerError(JV,Hu);var YV=[3,D,e$,0,[OV,FH,MH],[64,64,64]];var XV=[-3,D,JH,{[de]:["EventDestinationAlreadyExists",400],[pe]:le,[ue]:400},[uo,kc,fe],[0,0,0]];w.for(D).registerError(XV,vu);var QV=[-3,D,YH,{[de]:["EventDestinationDoesNotExist",400],[pe]:le,[ue]:400},[uo,kc,fe],[0,0,0]];w.for(D).registerError(QV,Vu);var ZV=[-3,D,ZH,{[de]:["FromEmailAddressNotVerified",400],[pe]:le,[ue]:400},[QH,fe],[0,0]];w.for(D).registerError(ZV,$u);var eG=[-3,D,rV,{[de]:["InvalidCloudWatchDestination",400],[pe]:le,[ue]:400},[uo,kc,fe],[0,0,0]];w.for(D).registerError(eG,Cu);var tG=[-3,D,tV,{[de]:["InvalidConfigurationSet",400],[pe]:le,[ue]:400},[fe],[0]];w.for(D).registerError(tG,Tu);var rG=[-3,D,oV,{[de]:["InvalidDeliveryOptions",400],[pe]:le,[ue]:400},[fe],[0]];w.for(D).registerError(rG,Wu);var oG=[-3,D,nV,{[de]:["InvalidFirehoseDestination",400],[pe]:le,[ue]:400},[uo,kc,fe],[0,0,0]];w.for(D).registerError(oG,Au);var nG=[-3,D,sV,{[de]:["InvalidLambdaFunction",400],[pe]:le,[ue]:400},[XH,fe],[0,0]];w.for(D).registerError(nG,Mu);var sG=[-3,D,iV,{[de]:["InvalidPolicy",400],[pe]:le,[ue]:400},[fe],[0]];w.for(D).registerError(sG,zu);var iG=[-3,D,aV,{[de]:["InvalidRenderingParameter",400],[pe]:le,[ue]:400},[Qu,fe],[0,0]];w.for(D).registerError(iG,Ku);var aG=[-3,D,cV,{[de]:["InvalidS3Configuration",400],[pe]:le,[ue]:400},[LH,fe],[0,0]];w.for(D).registerError(aG,Lu);var cG=[-3,D,dV,{[de]:["InvalidSNSDestination",400],[pe]:le,[ue]:400},[uo,kc,fe],[0,0,0]];w.for(D).registerError(cG,Pu);var dG=[-3,D,lV,{[de]:["InvalidSnsTopic",400],[pe]:le,[ue]:400},[UV,fe],[0,0]];w.for(D).registerError(dG,Uu);var lG=[-3,D,pV,{[de]:["InvalidTemplate",400],[pe]:le,[ue]:400},[Qu,fe],[0,0]];w.for(D).registerError(lG,Bu);var pG=[-3,D,uV,{[de]:["InvalidTrackingOptions",400],[pe]:le,[ue]:400},[fe],[0]];w.for(D).registerError(pG,Du);var uG=[-3,D,fV,{[de]:["LimitExceeded",400],[pe]:le,[ue]:400},[fe],[0]];w.for(D).registerError(uG,_u);var fG=[-3,D,mV,{[de]:["MailFromDomainNotVerifiedException",400],[pe]:le,[ue]:400},[fe],[0]];w.for(D).registerError(fG,qu);var mG=[3,D,t$,0,[DV,Q1],[()=>Tx,()=>VV]];var hG=[-3,D,xV,{[de]:["MessageRejected",400],[pe]:le,[ue]:400},[fe],[0]];w.for(D).registerError(hG,Ju);var gG=[3,D,yV,0,[$c,FV],[0,0]],xG=[-3,D,gV,{[de]:["MissingRenderingAttribute",400],[pe]:le,[ue]:400},[Qu,fe],[0,0]];w.for(D).registerError(xG,Yu);var yG=[-3,D,EV,{[de]:["ProductionAccessNotGranted",400],[pe]:le,[ue]:400},[fe],[0]];w.for(D).registerError(yG,Xu);var SG=[-3,D,_V,{[de]:["RuleDoesNotExist",400],[pe]:le,[ue]:400},[$c,fe],[0,0]];w.for(D).registerError(SG,Fu);var EG=[-3,D,RV,{[de]:["RuleSetDoesNotExist",400],[pe]:le,[ue]:400},[$c,fe],[0,0]];w.for(D).registerError(EG,bu);var _G=[3,D,vV,0,[PV,e$,t$,IV,bV,TV,wV,LV,uo],[0,()=>YV,()=>mG,64,0,0,0,()=>vG,0]],bG=[3,D,CV,0,[hV],[0]];var wG=[-3,D,kV,{[de]:["TemplateDoesNotExist",400],[pe]:le,[ue]:400},[Qu,fe],[0,0]];w.for(D).registerError(wG,ju);var RG=[-3,D,$V,{[de]:["TrackingOptionsAlreadyExistsException",400],[pe]:le,[ue]:400},[uo,fe],[0,0]];w.for(D).registerError(RG,Nu);var IG=[-3,D,MV,{[de]:["TrackingOptionsDoesNotExistException",400],[pe]:le,[ue]:400},[uo,fe],[0,0]];w.for(D).registerError(IG,Gu);var TG=[-3,r$,"SESServiceException",0,[],[]];w.for(r$).registerError(TG,Z);var vG=[1,D,SV,0,()=>gG];var o$=[9,D,AV,0,()=>_G,()=>bG];Ue();F();var Zu=class extends Y.classBuilder().ep(D1).m(function(t,r,o,n){return[he(o,t.getEndpointParameterInstructions())]}).s("SimpleEmailService","SendEmail",{}).n("SESClient","SendEmailCommand").sc(o$).build(){};var CG=()=>new xu({region:process.env.AWS_REGION||"us-east-1",maxAttempts:3,retryMode:"adaptive",requestHandler:{requestTimeout:1e4}}),vx=null,AG=()=>(vx||(vx=CG(),S.info("SES client initialized")),vx),PG={passwordReset:e=>({subject:"Password Reset Request - AWS Lambda Control Plane",htmlBody:`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Password Reset Request</title>
        <style>
          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px; }
          .header { background-color: #f8f9fa; padding: 20px; border-radius: 5px; margin-bottom: 20px; }
          .content { padding: 20px 0; }
          .button { display: inline-block; background-color: #007bff; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; margin: 20px 0; }
          .footer { margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee; font-size: 12px; color: #666; }
          .warning { background-color: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 5px; margin: 20px 0; }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>Password Reset Request</h1>
        </div>
        
        <div class="content">
          <p>Hello ${e.recipientName},</p>
          
          <p>We received a request to reset your password for your AWS Lambda Control Plane account. If you made this request, please click the button below to reset your password:</p>
          
          <a href="${e.resetUrl}" class="button">Reset Password</a>
          
          <p>Alternatively, you can copy and paste this link into your browser:</p>
          <p style="word-break: break-all; background-color: #f8f9fa; padding: 10px; border-radius: 3px;">${e.resetUrl}</p>
          
          <div class="warning">
            <strong>Important:</strong> This password reset link will expire in ${e.expirationMinutes} minutes for security reasons.
          </div>
          
          <p>If you did not request a password reset, please ignore this email. Your password will remain unchanged.</p>
          
          <p>For security reasons, please do not share this email or the reset link with anyone.</p>
        </div>
        
        <div class="footer">
          <p>This is an automated message from AWS Lambda Control Plane. Please do not reply to this email.</p>
          <p>If you continue to have problems, please contact your system administrator.</p>
        </div>
      </body>
      </html>
    `,textBody:`
Password Reset Request - AWS Lambda Control Plane

Hello ${e.recipientName},

We received a request to reset your password for your AWS Lambda Control Plane account. If you made this request, please use the following link to reset your password:

${e.resetUrl}

IMPORTANT: This password reset link will expire in ${e.expirationMinutes} minutes for security reasons.

If you did not request a password reset, please ignore this email. Your password will remain unchanged.

For security reasons, please do not share this email or the reset link with anyone.

This is an automated message from AWS Lambda Control Plane. Please do not reply to this email.
If you continue to have problems, please contact your system administrator.
    `.trim()})},Ax=class{client;fromEmail;constructor(){this.client=AG();let t=ro();this.fromEmail=t.ses.fromEmail}async sendEmail(t,r,o){try{let n=Array.isArray(t)?t:[t];S.info("Sending email via SES",{recipients:n.length,subject:r.subject,correlationId:o});let s={Source:this.fromEmail,Destination:{ToAddresses:n},Message:{Subject:{Data:r.subject,Charset:"UTF-8"},Body:{Html:{Data:r.htmlBody,Charset:"UTF-8"},Text:{Data:r.textBody,Charset:"UTF-8"}}}},i=new Zu(s),a=await this.client.send(i);S.info("Email sent successfully via SES",{messageId:a.MessageId,recipients:n.length,correlationId:o})}catch(n){throw S.error("Failed to send email via SES",{error:n instanceof Error?n.message:"Unknown error",recipients:Array.isArray(t)?t.length:1,correlationId:o}),n}}async sendPasswordResetEmail(t,r,o,n){let i=`${ro().app.baseUrl}/auth/password-reset/confirm?token=${o}`,a=PG.passwordReset({recipientName:r,resetToken:o,resetUrl:i,expirationMinutes:30});await this.sendEmail(t,a,n)}static isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}static normalizeEmail(t){return t.toLowerCase().trim()}},Cx=null,ef={get instance(){return Cx||(Cx=new Ax),Cx},sendEmail:(e,t,r)=>ef.instance.sendEmail(e,t,r),sendPasswordResetEmail:(e,t,r,o)=>ef.instance.sendPasswordResetEmail(e,t,r,o)};import{randomBytes as DG,createHash as NG}from"crypto";var Px=async(e,t)=>{try{S.info("Processing password reset request",{correlationId:e.correlationId,email:e.body?.email});let r=cd.safeParse(e.body);if(!r.success){S.warn("Password reset request validation failed",{correlationId:e.correlationId,errors:r.error.errors}),M(t,"ValidationError","Invalid email format",e.correlationId,{validationErrors:r.error.errors});return}let{email:o}=r.data,n=await Q.getStaffByEmail(o,e.correlationId);if(!n.found||!n.staff){S.warn("Password reset request for non-existent email",{correlationId:e.correlationId,email:o}),t.status(200).json({success:!0,message:"If an account with that email exists, a password reset link has been sent.",timestamp:new Date().toISOString()});return}let s=n.staff;if(!s.enabled){S.warn("Password reset request for disabled account",{correlationId:e.correlationId,email:o,staffId:s.staff_id}),t.status(200).json({success:!0,message:"If an account with that email exists, a password reset link has been sent.",timestamp:new Date().toISOString()});return}let i=DG(32).toString("hex"),a=NG("sha256").update(i).digest("hex"),c=Math.floor(Date.now()/1e3)+30*60,l=await Q.createPasswordResetToken({token_hash:a,staff_id:s.staff_id,expires_at:c},e.correlationId);if(!l.success){S.error("Failed to create password reset token",{correlationId:e.correlationId,staffId:s.staff_id,error:l.error}),M(t,"InternalError","Failed to generate reset token",e.correlationId);return}try{await ef.sendPasswordResetEmail(s.email,s.email.split("@")[0]||"User",i,e.correlationId),S.info("Password reset email sent successfully",{correlationId:e.correlationId,staffId:s.staff_id,email:s.email,tokenHash:a})}catch(p){S.error("Failed to send password reset email",{correlationId:e.correlationId,staffId:s.staff_id,email:s.email,error:p instanceof Error?p.message:"Unknown error"});try{await Q.deletePasswordResetToken(a,e.correlationId)}catch(u){S.error("Failed to cleanup password reset token after email failure",{correlationId:e.correlationId,tokenHash:a,error:u instanceof Error?u.message:"Unknown error"})}M(t,"InternalError","Failed to send reset email",e.correlationId);return}t.status(200).json({success:!0,message:"If an account with that email exists, a password reset link has been sent.",timestamp:new Date().toISOString()})}catch(r){S.error("Password reset request handler error",{correlationId:e.correlationId,error:r instanceof Error?r.message:"Unknown error"}),M(t,"InternalError","Password reset request failed",e.correlationId)}};import{createHash as OG}from"crypto";var Dx=async(e,t)=>{try{S.info("Processing password reset confirmation",{correlationId:e.correlationId});let r=dd.safeParse(e.body);if(!r.success){S.warn("Password reset confirmation validation failed",{correlationId:e.correlationId,errors:r.error.errors}),M(t,"ValidationError","Invalid reset token or password format",e.correlationId,{validationErrors:r.error.errors});return}let{token:o,new_password:n}=r.data,s=Yi.validatePasswordStrength(n);if(!s.isValid){S.warn("Password reset confirmation with weak password",{correlationId:e.correlationId,errors:s.errors}),M(t,"ValidationError","Password does not meet security requirements",e.correlationId,{passwordErrors:s.errors});return}let i=OG("sha256").update(o).digest("hex"),a=await Q.getPasswordResetToken(i,e.correlationId);if(!a.found||!a.token){S.warn("Password reset confirmation with invalid token",{correlationId:e.correlationId,tokenHash:i}),M(t,"Unauthorized","Invalid or expired reset token",e.correlationId);return}let c=a.token;if(a.expired){S.warn("Password reset confirmation with expired token",{correlationId:e.correlationId,tokenHash:i,expiresAt:new Date(c.expires_at*1e3).toISOString()}),M(t,"Unauthorized","Reset token has expired",e.correlationId);return}if(c.used_at){S.warn("Password reset confirmation with already used token",{correlationId:e.correlationId,tokenHash:i,usedAt:c.used_at}),M(t,"Unauthorized","Reset token has already been used",e.correlationId);return}let l=await Q.getStaffById(c.staff_id,e.correlationId);if(!l.found||!l.staff){S.error("Password reset token references non-existent staff member",{correlationId:e.correlationId,staffId:c.staff_id,tokenHash:i}),M(t,"InternalError","Invalid reset token",e.correlationId);return}let p=l.staff;if(!p.enabled){S.warn("Password reset confirmation for disabled account",{correlationId:e.correlationId,staffId:p.staff_id,email:p.email}),M(t,"Unauthorized","Account is disabled",e.correlationId);return}let u=await jn.hashPassword(n,e.correlationId),f=await Q.updateStaffPassword(p.staff_id,u,e.correlationId);if(!f.success){S.error("Failed to update staff password",{correlationId:e.correlationId,staffId:p.staff_id,error:f.error}),M(t,"InternalError","Failed to update password",e.correlationId);return}try{await Q.markPasswordResetTokenUsed(i,e.correlationId)}catch(m){S.error("Failed to mark password reset token as used",{correlationId:e.correlationId,tokenHash:i,error:m instanceof Error?m.message:"Unknown error"})}S.info("Password reset completed successfully",{correlationId:e.correlationId,staffId:p.staff_id,email:p.email}),t.status(200).json({success:!0,message:"Password has been reset successfully",timestamp:new Date().toISOString()})}catch(r){S.error("Password reset confirmation handler error",{correlationId:e.correlationId,error:r instanceof Error?r.message:"Unknown error"}),M(t,"InternalError","Password reset confirmation failed",e.correlationId)}};function n$(e){e.post("/auth/login",oo({body:ad}),Rx),e.post("/auth/password-reset/request",oo({body:cd}),Px),e.post("/auth/password-reset/confirm",oo({body:dd}),Dx)}var Nx=async(e,t)=>{try{S.info("Processing staff registration request",{correlationId:e.correlationId,requestedBy:e.context.staff_id,requestedByEmail:e.context.email});let r=sd.safeParse(e.body);if(!r.success){S.warn("Staff registration validation failed",{correlationId:e.correlationId,errors:r.error.errors}),M(t,"ValidationError","Invalid staff registration data",e.correlationId,{validationErrors:r.error.errors});return}let{email:o,password:n,roles:s}=r.data,i=await jn.hashPassword(n,e.correlationId),a={email:o,password_hash:i,roles:s,enabled:!0},c=await Q.createStaff(a,e.correlationId);if(!c.success){S.warn("Staff registration failed",{correlationId:e.correlationId,email:o,error:c.error}),c.error?.includes("already exists")?M(t,"Conflict","Staff member with this email already exists",e.correlationId):M(t,"InternalError","Failed to create staff account",e.correlationId);return}S.info("Staff registration successful",{correlationId:e.correlationId,staffId:c.data?.staff_id,email:c.data?.email,roles:c.data?.roles,createdBy:e.context.staff_id}),t.status(201).json({success:!0,data:{staff_id:c.data?.staff_id,email:c.data?.email,roles:c.data?.roles,enabled:c.data?.enabled,created_at:c.data?.created_at},timestamp:new Date().toISOString()})}catch(r){S.error("Staff registration handler error",{correlationId:e.correlationId,error:r instanceof Error?r.message:"Unknown error"}),M(t,"InternalError","Staff registration failed",e.correlationId)}};var kG=v.object({staff_id:v.string().uuid()}),Ox=async(e,t)=>{try{S.info("Processing staff enable request",{correlationId:e.correlationId,requestedBy:e.context.staff_id,requestedByEmail:e.context.email});let r=kG.safeParse(e.body);if(!r.success){S.warn("Staff enable validation failed",{correlationId:e.correlationId,errors:r.error.errors}),M(t,"ValidationError","Invalid staff enable request",e.correlationId,{validationErrors:r.error.errors});return}let{staff_id:o}=r.data,n=await Q.getStaffById(o,e.correlationId);if(!n.found||!n.staff){S.warn("Staff enable attempt for non-existent staff",{correlationId:e.correlationId,staffId:o}),M(t,"NotFound","Staff member not found",e.correlationId);return}if(n.staff.enabled){S.info("Staff member already enabled",{correlationId:e.correlationId,staffId:o,email:n.staff.email}),t.status(200).json({success:!0,data:{staff_id:n.staff.staff_id,email:n.staff.email,roles:n.staff.roles,enabled:n.staff.enabled,updated_at:n.staff.updated_at},message:"Staff member is already enabled",timestamp:new Date().toISOString()});return}let s=await Q.updateStaff(o,{enabled:!0},e.correlationId);if(!s.success){S.error("Failed to enable staff member",{correlationId:e.correlationId,staffId:o,error:s.error}),M(t,"InternalError","Failed to enable staff member",e.correlationId);return}S.info("Staff member enabled successfully",{correlationId:e.correlationId,staffId:o,email:s.data?.email,enabledBy:e.context.staff_id}),t.status(200).json({success:!0,data:{staff_id:s.data?.staff_id,email:s.data?.email,roles:s.data?.roles,enabled:s.data?.enabled,updated_at:s.data?.updated_at},timestamp:new Date().toISOString()})}catch(r){S.error("Staff enable handler error",{correlationId:e.correlationId,error:r instanceof Error?r.message:"Unknown error"}),M(t,"InternalError","Staff enable failed",e.correlationId)}};var $G=v.object({staff_id:v.string().uuid()}),kx=async(e,t)=>{try{S.info("Processing staff disable request",{correlationId:e.correlationId,requestedBy:e.context.staff_id,requestedByEmail:e.context.email});let r=$G.safeParse(e.body);if(!r.success){S.warn("Staff disable validation failed",{correlationId:e.correlationId,errors:r.error.errors}),M(t,"ValidationError","Invalid staff disable request",e.correlationId,{validationErrors:r.error.errors});return}let{staff_id:o}=r.data;if(o===e.context.staff_id){S.warn("Staff member attempted to disable themselves",{correlationId:e.correlationId,staffId:o}),M(t,"Forbidden","Cannot disable your own account",e.correlationId);return}let n=await Q.getStaffById(o,e.correlationId);if(!n.found||!n.staff){S.warn("Staff disable attempt for non-existent staff",{correlationId:e.correlationId,staffId:o}),M(t,"NotFound","Staff member not found",e.correlationId);return}if(!n.staff.enabled){S.info("Staff member already disabled",{correlationId:e.correlationId,staffId:o,email:n.staff.email}),t.status(200).json({success:!0,data:{staff_id:n.staff.staff_id,email:n.staff.email,roles:n.staff.roles,enabled:n.staff.enabled,updated_at:n.staff.updated_at},message:"Staff member is already disabled",timestamp:new Date().toISOString()});return}let s=await Q.updateStaff(o,{enabled:!1},e.correlationId);if(!s.success){S.error("Failed to disable staff member",{correlationId:e.correlationId,staffId:o,error:s.error}),M(t,"InternalError","Failed to disable staff member",e.correlationId);return}S.info("Staff member disabled successfully",{correlationId:e.correlationId,staffId:o,email:s.data?.email,disabledBy:e.context.staff_id}),t.status(200).json({success:!0,data:{staff_id:s.data?.staff_id,email:s.data?.email,roles:s.data?.roles,enabled:s.data?.enabled,updated_at:s.data?.updated_at},timestamp:new Date().toISOString()})}catch(r){S.error("Staff disable handler error",{correlationId:e.correlationId,error:r instanceof Error?r.message:"Unknown error"}),M(t,"InternalError","Staff disable failed",e.correlationId)}};var $x=async(e,t)=>{try{S.info("Processing staff profile request",{correlationId:e.correlationId,staffId:e.context.staff_id,email:e.context.email});let r=e.context.staff_id;if(!r){S.error("Staff profile request without staff_id in context",{correlationId:e.correlationId,context:e.context}),M(t,"Unauthorized","Invalid authentication context",e.correlationId);return}let o=await Q.getStaffById(r,e.correlationId);if(!o.found||!o.staff){S.warn("Staff profile request for non-existent staff",{correlationId:e.correlationId,staffId:r}),M(t,"NotFound","Staff member not found",e.correlationId);return}let n=o.staff;if(!n.enabled){S.warn("Staff profile request for disabled account",{correlationId:e.correlationId,staffId:r,email:n.email}),M(t,"Forbidden","Account is disabled",e.correlationId);return}S.info("Staff profile retrieved successfully",{correlationId:e.correlationId,staffId:r,email:n.email,roles:n.roles}),t.status(200).json({success:!0,data:{staff_id:n.staff_id,email:n.email,roles:n.roles,enabled:n.enabled,created_at:n.created_at,updated_at:n.updated_at},timestamp:new Date().toISOString()})}catch(r){S.error("Staff profile handler error",{correlationId:e.correlationId,staffId:e.context.staff_id,error:r instanceof Error?r.message:"Unknown error"}),M(t,"InternalError","Failed to retrieve profile",e.correlationId)}};var MG=v.object({staff_id:v.string().uuid()}),LG=v.object({staff_id:v.string().uuid()});function s$(e){e.post("/staff/register",yn(),ua,oo({body:sd}),Nx),e.post("/staff/enable",yn(),ua,oo({body:MG}),Ox),e.post("/staff/disable",yn(),ua,oo({body:LG}),kx),e.get("/staff/me",yn(),$x)}var Mx=async(e,t)=>{try{S.info("Processing tenant registration request",{correlationId:e.correlationId,requestedBy:e.context.staff_id,requestedByEmail:e.context.email,requestedByRoles:e.context.roles});let r=id.safeParse(e.body);if(!r.success){S.warn("Tenant registration validation failed",{correlationId:e.correlationId,errors:r.error.errors}),M(t,"ValidationError","Invalid tenant registration data",e.correlationId,{validationErrors:r.error.errors});return}let{name:o,email:n,contact_info:s}=r.data,i={name:o,email:n,contact_info:s||{}},a=await Q.createTenant(i,e.correlationId);if(!a.success){S.warn("Tenant registration failed",{correlationId:e.correlationId,name:o,email:n,error:a.error}),a.error?.includes("already exists")||a.error?.includes("Conflict")?M(t,"Conflict","Tenant with this information already exists",e.correlationId):M(t,"InternalError","Failed to create tenant",e.correlationId);return}S.info("Tenant registration successful",{correlationId:e.correlationId,tenantId:a.data?.tenant_id,name:a.data?.name,email:a.data?.email,status:a.data?.status,createdBy:e.context.staff_id}),S.info("Tenant ready for downstream provisioning",{correlationId:e.correlationId,tenantId:a.data?.tenant_id,status:a.data?.status}),t.status(201).json({success:!0,data:{tenant_id:a.data?.tenant_id,name:a.data?.name,email:a.data?.email,contact_info:a.data?.contact_info,status:a.data?.status,created_at:a.data?.created_at},timestamp:new Date().toISOString()})}catch(r){S.error("Tenant registration handler error",{correlationId:e.correlationId,error:r instanceof Error?r.message:"Unknown error"}),M(t,"InternalError","Tenant registration failed",e.correlationId)}};function i$(e){e.post("/tenant/register",yn(),bf,oo({body:id}),Mx)}var Wn=null;function UG(){if(Wn)return Wn;S.info("Initializing Lambda function with internal routing");try{return Wn=Ty(),n$(Wn),s$(Wn),i$(Wn),S.info("Router initialized successfully with all routes registered"),Wn}catch(e){throw S.error("Failed to initialize router",{error:e}),e}}var fPe=async(e,t)=>{t.callbackWaitsForEmptyEventLoop=!1;try{let r=UG(),o=e.requestContext?.requestId||"unknown",n=e.httpMethod||e.requestContext?.http?.method||"UNKNOWN",s=e.path||e.rawPath||"/";S.info("Processing request",{method:n,path:s,correlationId:o,coldStart:!Wn});let i=await r.handle(e,t);return S.info("Request processed successfully",{statusCode:i.statusCode,correlationId:o}),i}catch(r){let o=e.requestContext?.requestId||"unknown";return S.error("Unhandled error in Lambda handler",{error:r instanceof Error?r.message:String(r),stack:r instanceof Error?r.stack:void 0,correlationId:o}),{statusCode:500,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","X-Correlation-ID":o},body:JSON.stringify({error:{code:"InternalError",message:"Internal server error",correlationId:o},timestamp:new Date().toISOString()})}}};export{fPe as handler};
/*! Bundled license information:

bcryptjs/dist/bcrypt.js:
  (**
   * @license bcrypt.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
   * Released under the Apache License, Version 2.0
   * see: https://github.com/dcodeIO/bcrypt.js for details
   *)
*/
//# sourceMappingURL=index.mjs.map
